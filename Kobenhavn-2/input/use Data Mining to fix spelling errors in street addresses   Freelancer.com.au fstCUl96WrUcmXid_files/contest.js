/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
define('jquery-wrapper',[],function(){return jQuery}),define('underscore-wrapper',['jquery-wrapper'],function(a){return _}),window.jQuery&&function(a){if(a.browser.msie)try{document.execCommand('BackgroundImageCache',!1,!0)}catch(b){}a.fn.rating=function(b){if(this.length==0)return this;if(typeof arguments[0]=='string'){if(this.length>1){var c=arguments;return this.each(function(){a.fn.rating.apply(a(this),c)})}return a.fn.rating[arguments[0]].apply(this,a.makeArray(arguments).slice(1)||[]),this}var b=a.extend({},a.fn.rating.options,b||{});return a.fn.rating.calls++,this.not('.star-rating-applied').addClass('star-rating-applied').each(function(){var c,d=a(this),f=(this.name||'unnamed-rating').replace(/\[|\]/g,'_').replace(/^\_+|\_+$/g,''),g=a(this.form||document.body),h=g.data('rating');if(!h||h.call!=a.fn.rating.calls)h={count:0,call:a.fn.rating.calls};var i=h[f];i&&(c=i.data('rating')),i&&c?c.count++:(c=a.extend({},b||{},(a.metadata?d.metadata():a.meta?d.data():null)||{},{count:0,stars:[],inputs:[]}),c.serial=h.count++,i=a('<span class="star-rating-control"/>'),d.before(i),i.addClass('rating-to-be-drawn'),d.attr('disabled')&&(c.readOnly=!0),i.append(c.cancel=a('').mouseover(function(){a(this).rating('drain'),a(this).addClass('star-rating-hover')}).mouseout(function(){a(this).rating('draw'),a(this).removeClass('star-rating-hover')}).click(function(){a(this).rating('select')}).data('rating',c)));var j=a('<div class="star-rating rater-'+c.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+'</a></div>');i.append(j),this.id&&j.attr('id',this.id),this.className&&j.addClass(this.className),c.half&&(c.split=2);if(typeof c.split=='number'&&c.split>0){var k=(a.fn.width?j.width():0)||c.starWidth,l=c.count%c.split,m=Math.floor(k/c.split);j.width(m).find('a').css({'margin-left':'-'+l*m+'px'})}c.readOnly?j.addClass('star-rating-readonly'):j.addClass('star-rating-live').mouseover(function(){a(this).rating('fill'),a(this).rating('focus')}).mouseout(function(){a(this).rating('draw'),a(this).rating('blur')}).click(function(){a(this).rating('select')}),this.checked&&(c.current=j),d.hide(),d.change(function(){a(this).rating('select')}),j.data('rating.input',d.data('rating.star',j)),c.stars[c.stars.length]=j[0],c.inputs[c.inputs.length]=d[0],c.rater=h[f]=i,c.context=g,d.data('rating',c),i.data('rating',c),j.data('rating',c),g.data('rating',h)}),a('.rating-to-be-drawn').rating('draw').removeClass('rating-to-be-drawn'),this},a.extend(a.fn.rating,{calls:0,focus:function(){var b=this.data('rating');if(!b)return this;if(!b.focus)return this;var c=a(this).data('rating.input')||a(this.tagName=='INPUT'?this:null);b.focus&&b.focus.apply(c[0],[c.val(),a('a',c.data('rating.star'))[0]])},blur:function(){var b=this.data('rating');if(!b)return this;if(!b.blur)return this;var c=a(this).data('rating.input')||a(this.tagName=='INPUT'?this:null);b.blur&&b.blur.apply(c[0],[c.val(),a('a',c.data('rating.star'))[0]])},fill:function(){var a=this.data('rating');if(!a)return this;if(a.readOnly)return;this.rating('drain'),this.prevAll().andSelf().filter('.rater-'+a.serial).addClass('star-rating-hover')},drain:function(){var a=this.data('rating');if(!a)return this;if(a.readOnly)return;a.rater.children().filter('.rater-'+a.serial).removeClass('star-rating-on').removeClass('star-rating-hover')},draw:function(){var b=this.data('rating');if(!b)return this;this.rating('drain'),b.current?(b.current.data('rating.input').attr('checked','checked'),b.current.prevAll().andSelf().filter('.rater-'+b.serial).addClass('star-rating-on')):a(b.inputs).removeAttr('checked'),b.cancel[b.readOnly||b.required?'hide':'show'](),this.siblings()[b.readOnly?'addClass':'removeClass']('star-rating-readonly')},select:function(b,c){var d=this.data('rating');if(!d)return this;if(d.readOnly)return;d.current=null;if(typeof b!='undefined'){if(typeof b=='number')return a(d.stars[b]).rating('select',undefined,c);typeof b=='string'&&a.each(d.stars,function(){a(this).data('rating.input').val()==b&&a(this).rating('select',undefined,c)})}else d.current=this[0].tagName=='INPUT'?this.data('rating.star'):this.is('.rater-'+d.serial)?this:null;this.data('rating',d),this.rating('draw');var f=a(d.current?d.current.data('rating.input'):null);(c||c==undefined)&&d.callback&&d.callback.apply(f[0],[f.val(),a('a',d.current)[0]])},readOnly:function(b,c){var d=this.data('rating');if(!d)return this;d.readOnly=b||b==undefined?!0:!1,c?a(d.inputs).attr('disabled','disabled'):a(d.inputs).removeAttr('disabled'),this.data('rating',d),this.rating('draw')},disable:function(){this.rating('readOnly',!0,!0)},enable:function(){this.rating('readOnly',!1,!1)}}),a.fn.rating.options={cancel:'Cancel Rating',cancelValue:'',split:0,starWidth:16}}(jQuery),define('jquery.rating.min',function(){}),function(a){a.PaginationCalculator=function(a,b){this.maxentries=a,this.opts=b},a.extend(a.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(a){var b=Math.floor(this.opts.num_display_entries/2),c=this.numPages(),d=c-this.opts.num_display_entries,e=a>b?Math.max(Math.min(a-b,d),0):0,f=a>b?Math.min(a+b+this.opts.num_display_entries%2,c):Math.min(this.opts.num_display_entries,c);return{start:e,end:f}}}),a.PaginationRenderers={},a.PaginationRenderers.defaultRenderer=function(b,c){this.maxentries=b,this.opts=c,this.pc=new a.PaginationCalculator(b,c)},a.extend(a.PaginationRenderers.defaultRenderer.prototype,{createLink:function(b,c,d){var e,f=this.pc.numPages();return b=b<0?0:b<f?b:f-1,d=a.extend({text:b+1,classes:''},d||{}),b==c?e=a('<li class=\'active\'><a>'+d.text+'</a></li>'):(e=a('<li class="pointer-cursor"><a>'+d.text+'</a></li>'),e.children().first().data('page_id',b)),d.classes&&e.addClass(d.classes),e},appendRange:function(a,b,c,d,e){var f;for(f=c;f<d;f++)this.createLink(f,b,e).appendTo(a)},getLinks:function(b,c){var d,e,f=this.pc.getInterval(b),g=this.pc.numPages(),h=a('<ul></ul>');return this.opts.prev_text&&(b>0||this.opts.prev_show_always)&&h.append(this.createLink(b-1,b,{text:this.opts.prev_text,classes:'prev'})),f.start>0&&this.opts.num_edge_entries>0&&(e=Math.min(this.opts.num_edge_entries,f.start),this.appendRange(h,b,0,e,{classes:'sp'}),this.opts.num_edge_entries<f.start&&this.opts.ellipse_text&&jQuery('<li><a>'+this.opts.ellipse_text+'</a></li>').appendTo(h)),this.appendRange(h,b,f.start,f.end),f.end<g&&this.opts.num_edge_entries>0&&(g-this.opts.num_edge_entries>f.end&&this.opts.ellipse_text&&jQuery('<li><a>'+this.opts.ellipse_text+'</a></li>').appendTo(h),d=Math.max(g-this.opts.num_edge_entries,f.end),this.appendRange(h,b,d,g,{classes:'ep'})),this.opts.next_text&&(b<g-1||this.opts.next_show_always)&&h.append(this.createLink(b+1,b,{text:this.opts.next_text,classes:'next'})),a(':not(li.active a)',h).click(c),a('li.active a',h).click(function(a){a.preventDefault(),a.stopPropagation()}),h}}),a.fn.pagination=function(b,c){function h(b){var c,d=a(b.target).data('page_id'),e=i(d);return e||b.stopPropagation(),e}function i(a){d.data('current_page',a),f=e.getLinks(a,h),d.empty(),f.appendTo(d);var b=c.callback(a,d);return b}c=jQuery.extend({items_per_page:10,num_display_entries:5,current_page:0,num_edge_entries:0,link_to:'#',prev_text:T_('Prev'),next_text:T_('Next'),ellipse_text:'...',prev_show_always:!0,next_show_always:!0,renderer:'defaultRenderer',callback:function(){return!1}},c||{});var d=this,e,f,g;g=c.current_page,d.data('current_page',g),b=!b||b<0?1:b,c.items_per_page=!c.items_per_page||c.items_per_page<0?1:c.items_per_page;if(!a.PaginationRenderers[c.renderer])throw new ReferenceError('Pagination renderer \''+c.renderer+'\' was not found in jQuery.PaginationRenderers object.');e=new a.PaginationRenderers[c.renderer](b,c);var j=new a.PaginationCalculator(b,c),k=j.numPages();d.bind('setPage',{numPages:k},function(a,b){if(b>=0&&b<a.data.numPages)return i(b),!1}),d.bind('prevPage',function(b){var c=a(this).data('current_page');return c>0&&i(c-1),!1}),d.bind('nextPage',{numPages:k},function(b){var c=a(this).data('current_page');return c<b.data.numPages-1&&i(c+1),!1}),f=e.getLinks(g,h),d.empty(),f.appendTo(d)}}(jQuery),define('utils/pagination',function(){}),define('contest/contest-pagination',['jquery-wrapper','utils/pagination'],function(a,b){a.fn.extend(a.PaginationRenderers.defaultRenderer.prototype,{createLink:function(b,c,d){var e,f=this.pc.numPages(),g=seoURL.replace('.html','');b=b<0?0:b<f?b:f-1,d=a.extend({text:b+1,classes:''},d||{});var h=d.text;return h!='Next'&&h!='Prev'&&(g='href='+g+'--'+h+'.html'),b==c?e=a('<li class=\'active\'><a>'+d.text+'</a></li>'):(e=a('<li class="pointer-cursor"><a '+g+'>'+h+'</a></li>'),e.children().first().data('page_id',b)),d.classes&&e.addClass(d.classes),e}})}),function(a){function f(b){this.$element=a(b),this.original_text=this.$element.html(),this.settings=a.extend({},a.fn.trunk8.defaults)}function g(){var b=this.data('trunk8'),d=b.settings,f=d.width,g=d.side,h=d.fill,i=c.getLineHeight(this)*d.lines,j=b.original_text,k=j.length,l='',m,n,o,p,q;this.html(j),q=this.text();if(f===e.auto){if(this.height()<=i)return;m=0,n=k-1;while(m<=n)o=m+(n-m>>1),p=c.eatStr(j,g,k-o,h),this.html(p),this.height()>i?n=o-1:(m=o+1,l=l.length>p.length?l:p);this.html(''),this.html(l),d.tooltip&&this.attr('title',q)}else isNaN(f)?a.error('Invalid width "'+f+'".'):(o=k-f,p=c.eatStr(j,g,o,h),this.html(p),d.tooltip&&this.attr('title',j))}var b,c,d={center:'center',left:'left',right:'right'},e={auto:'auto'};f.prototype.updateSettings=function(b){this.settings=a.extend(this.settings,b)},b={init:function(b){return this.each(function(){var c=a(this),d=c.data('trunk8');d||c.data('trunk8',d=new f(this)),d.updateSettings(b),g.call(c)})},update:function(b){return this.each(function(){var c=a(this);b&&(c.data('trunk8').original_text=b),g.call(c)})},revert:function(){return this.each(function(){var b=a(this).data('trunk8').original_text;a(this).html(b)})},getSettings:function(){return a(this.get(0)).data('trunk8').settings}},c={eatStr:function(b,e,f,g){var h=b.length,i=c.eatStr.generateKey.apply(null,arguments),j,k;if(c.eatStr.cache[i])return c.eatStr.cache[i];(typeof b!='string'||h===0)&&a.error('Invalid source string "'+b+'".');if(f<0||f>h)a.error('Invalid bite size "'+f+'".');else if(f===0)return b;typeof (g+'')!='string'&&a.error('Fill unable to be converted to a string.');switch(e){case d.right:return c.eatStr.cache[i]=a.trim(b.substr(0,h-f))+g;case d.left:return c.eatStr.cache[i]=g+a.trim(b.substr(f));case d.center:return j=h>>1,k=f>>1,c.eatStr.cache[i]=a.trim(c.eatStr(b.substr(0,h-j),d.right,f-k,''))+g+a.trim(c.eatStr(b.substr(h-j),d.left,k,''));default:a.error('Invalid side "'+e+'".')}},getLineHeight:function(b){var c=a(b).css('float');c!=='none'&&a(b).css('float','none');var d=a(b).css('position');d==='absolute'&&a(b).css('position','static');var e=a(b).html(),f='line-height-test',g;return a(b).html('i').wrap('<div id="'+f+'" />'),g=a('#'+f).innerHeight(),a(b).html(e).css({'float':c,position:d}).unwrap(),g}},c.eatStr.cache={},c.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,'')},a.fn.trunk8=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=='object'||!c)return b.init.apply(this,arguments);a.error('Method '+c+' does not exist on jQuery.trunk8')},a.fn.trunk8.defaults={fill:'&hellip;',lines:1,side:d.right,tooltip:!0,width:e.auto}}(jQuery),define('utils/trunk8',function(){}),define('jquery',[],function(){return jQuery}),function(a){var b=function(a,c,d){var e=document.createElement('img'),f,g;return e.onerror=c,e.onload=function(){g&&b.revokeObjectURL(g),c(b.scale(e,d))},window.Blob&&a instanceof Blob||window.File&&a instanceof File?f=g=b.createObjectURL(a):f=a,f?(e.src=f,e):b.readFile(a,function(a){e.src=a})},c=window.createObjectURL&&window||window.URL&&URL||window.webkitURL&&webkitURL;b.scale=function(a,b){b=b||{};var c=document.createElement('canvas'),d=a.width,e=a.height,f=Math.max((b.minWidth||d)/d,(b.minHeight||e)/e);return f>1&&(d=parseInt(d*f,10),e=parseInt(e*f,10)),f=Math.min((b.maxWidth||d)/d,(b.maxHeight||e)/e),f<1&&(d=parseInt(d*f,10),e=parseInt(e*f,10)),a.getContext||b.canvas&&c.getContext?(c.width=d,c.height=e,c.getContext('2d').drawImage(a,0,0,d,e),c):(a.width=d,a.height=e,a)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b){if(window.FileReader&&FileReader.prototype.readAsDataURL){var c=new FileReader;return c.onload=function(a){b(a.target.result)},c.readAsDataURL(a),c}return!1},typeof define!='undefined'&&define.amd?define('load-image',[],function(){return b}):a.loadImage=b}(this),function(a){var b=a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype,c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder,d=c&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(a){var b,d,e,f,g,h;a.split(',')[0].indexOf('base64')>=0?b=atob(a.split(',')[1]):b=decodeURIComponent(a.split(',')[1]),d=new ArrayBuffer(b.length),e=new Uint8Array(d);for(f=0;f<b.length;f+=1)e[f]=b.charCodeAt(f);return g=new c,g.append(d),h=a.split(',')[0].split(':')[1].split(';')[0],g.getBlob(h)};a.HTMLCanvasElement&&!b.toBlob&&(b.mozGetAsFile?b.toBlob=function(a,b){a(this.mozGetAsFile('blob',b))}:b.toDataURL&&d&&(b.toBlob=function(a,b){a(d(this.toDataURL(b)))})),typeof define!='undefined'&&define.amd?define('canvas-to-blob',[],function(){return d}):a.dataURLtoBlob=d}(this),function(a){var b=function(a,c){var d=/[^\w\-\.:]/.test(a)?new Function(b.arg+',tmpl','var _e=tmpl.encode'+b.helper+',_s=\''+a.replace(b.regexp,b.func)+'\';return _s;'):b.cache[a]=b.cache[a]||b(b.load(a));return c?d(c,b):function(a){return d(a,b)}};b.cache={},b.load=function(a){return document.getElementById(a).innerHTML},b.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,b.func=function(a,b,c,d,e,f){if(b)return{'\n':'\\n','\r':'\\r','	':'\\t',' ':' '}[a]||'\\'+a;if(c)return c==='='?'\'+_e('+d+')+\'':'\'+('+d+'||\'\')+\'';if(e)return'\';';if(f)return'_s+=\''},b.encReg=/[<>&"'\x00]/g,b.encMap={'<':'&lt;','>':'&gt;','&':'&amp;','"':'&quot;','\'':'&#39;'},b.encode=function(a){return String(a||'').replace(b.encReg,function(a){return b.encMap[a]||''})},b.arg='o',b.helper=',print=function(s,e){_s+=e&&(s||\'\')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}',typeof define=='function'&&define.amd?define('tmpl',[],function(){return b}):a.tmpl=b}(this),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,d;(d=b[c])!=null;c++)try{a(d).triggerHandler('remove')}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split('.')[0];b=b.split('.')[1],e=j+'-'+b,d||(d=c,c=a.Widget),a.expr[':'][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){if(!a.isFunction(d)){i[b]=d;return}i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,f;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}()}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+'.'+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){var e=d.call(arguments,1),f=0,g=e.length,h,i;for(;f<g;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(a.isPlainObject(i)?c[h]=a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):c[h]=i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h=typeof g=='string',i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);if(!e)return a.error('cannot call methods on '+c+' prior to initialization; '+'attempted to call method \''+g+'\'');if(!a.isFunction(e[g])||g.charAt(0)==='_')return a.error('no such method \''+g+'\' for '+c+' widget instance');d=e[g].apply(e,i);if(d!==e&&d!==b)return j=d&&d.jquery?j.pushStack(d.get()):d,!1}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:'widget',widgetEventPrefix:'',defaultElement:'<div>',options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace='.'+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger('create',null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr('aria-disabled').removeClass(this.widgetFullName+'-disabled '+'ui-state-disabled'),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass('ui-state-hover'),this.focusable.removeClass('ui-state-focus')},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e=c,f,g,h;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof c=='string'){e={},f=c.split('.'),c=f.shift();if(f.length){g=e[c]=a.widget.extend({},this.options[c]);for(h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];c=f.pop();if(d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,a==='disabled'&&(this.widget().toggleClass(this.widgetFullName+'-disabled ui-state-disabled',!!b).attr('aria-disabled',b),this.hoverable.removeClass('ui-state-hover'),this.focusable.removeClass('ui-state-focus')),this},enable:function(){return this._setOption('disabled',!1)},disable:function(){return this._setOption('disabled',!0)},_on:function(b,c,d){var e,f=this;typeof b!='boolean'&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(!b&&(f.options.disabled===!0||a(this).hasClass('ui-state-disabled')))return;return(typeof g=='string'?f[g]:g).apply(f,arguments)}typeof g!='string'&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||'').split(' ').join(this.eventNamespace+' ')+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return(typeof a=='string'?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass('ui-state-hover')},mouseleave:function(b){a(b.currentTarget).removeClass('ui-state-hover')}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass('ui-state-focus')},focusout:function(b){a(b.currentTarget).removeClass('ui-state-focus')}})},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:'fadeIn',hide:'fadeOut'},function(b,c){a.Widget.prototype['_'+b]=function(d,e,f){typeof e=='string'&&(e={effect:e});var g,h=e?e===!0||typeof e=='number'?c:e.effect||c:b;e=e||{},typeof e=='number'&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),define('jquery.ui.widget',function(){}),function(a){'whatever',typeof define=='function'&&define.amd?define('jquery.fileupload',['jquery','jquery.ui.widget'],a):a(window.jQuery)}(function(a){a.support.xhrFileUpload=!!window.XMLHttpRequestUpload&&!!window.FileReader,a.support.xhrFormDataFileUpload=!!window.FormData,a.widget('blueimp.fileupload',{options:{namespace:undefined,dropZone:a(document),fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(a){return a.serializeArray()},add:function(a,b){b.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:['namespace','dropZone','fileInput','multipart','forceIframeTransport'],_BitrateTimer:function(){this.timestamp=+(new Date),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;if(!this.bitrate||!c||d>c)this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return typeof b.formData=='function'?b.formData(b.form):a.isArray(b.formData)?b.formData:b.formData?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_onProgress:function(a,b){if(a.lengthComputable){var c=+(new Date),d,e;if(b._time&&b.progressInterval&&c-b._time<b.progressInterval&&a.loaded!==a.total)return;b._time=c,d=b.total||this._getTotal(b.files),e=parseInt(a.loaded/a.total*(b.chunkSize||d),10)+(b.uploadedBytes||0),this._loaded+=e-(b.loaded||b.uploadedBytes||0),b.lengthComputable=!0,b.loaded=e,b.total=d,b.bitrate=b._bitrateTimer.getBitrate(c,e,b.bitrateInterval),this._trigger('progress',a,b),this._trigger('progressall',a,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(c,this._loaded,b.bitrateInterval)})}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind('progress',function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_initXHRData:function(b){var c,d=b.files[0],e=b.multipart||!a.support.xhrFileUpload,f=b.paramName[0];if(!e||b.blob)b.headers=a.extend(b.headers,{'X-File-Name':d.name,'X-File-Type':d.type,'X-File-Size':d.size}),b.blob?e||(b.contentType='application/octet-stream',b.data=b.blob):(b.contentType=d.type,b.data=d);e&&a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:f,value:b.blob}):a.each(b.files,function(a,d){c.push({name:b.paramName[a]||f,value:d})})):(b.formData instanceof FormData?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(f,b.blob,d.name):a.each(b.files,function(a,d){d instanceof Blob&&c.append(b.paramName[a]||f,d,d.name)})),b.data=c),b.blob=null},_initIframeSettings:function(b){b.dataType='iframe '+(b.dataType||''),b.formData=this._getFormData(b),b.redirect&&a('<a></a>').prop('href',b.url).prop('host')!==location.host&&b.formData.push({name:b.redirectParamName||'redirect',value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType='postmessage '+(a.dataType||''))):this._initIframeSettings(a,'iframe')},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){var b=a(this),c=b.prop('name')||'files[]',e=(b.prop('files')||[1]).length;while(e)d.push(c),e-=1}),d.length||(d=[c.prop('name')||'files[]'])),d},_initFormSettings:function(b){if(!b.form||!b.form.length)b.form=a(b.fileInput.prop('form'));b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop('action')||location.href),b.type=(b.type||b.form.prop('method')||'').toUpperCase(),b.type!=='POST'&&b.type!=='PUT'&&(b.type='POST')},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_chunkedUpload:function(b,c){var d=this,e=b.files[0],f=e.size,g=b.uploadedBytes=b.uploadedBytes||0,h=b.maxChunkSize||f,i=e.webkitSlice||e.mozSlice||e.slice,j,k,l,m;return!(this._isXHRUpload(b)&&i&&(g||h<f))||b.data?!1:c?!0:g>=f?(e.error='uploadedBytes',this._getXHRPromise(!1,b.context,[null,'error',e.error])):(k=Math.ceil((f-g)/h),j=function(c){return c?j(c-=1).pipe(function(){var f=a.extend({},b);return f.blob=i.call(e,g+c*h,g+(c+1)*h),f.chunkSize=f.blob.size,d._initXHRData(f),d._initProgressListener(f),l=(a.ajax(f)||d._getXHRPromise(!1,f.context)).done(function(){f.loaded||d._onProgress(a.Event('progress',{lengthComputable:!0,loaded:f.chunkSize,total:f.chunkSize}),f),b.uploadedBytes=f.uploadedBytes+=f.chunkSize}),l}):d._getXHRPromise(!0,b.context)},m=j(k),m.abort=function(){return l.abort()},this._enhancePromise(m))},_beforeSend:function(a,b){this._active===0&&(this._trigger('start'),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=b.uploadedBytes||0,this._total+=this._getTotal(b.files)},_onDone:function(b,c,d,e){this._isXHRUpload(e)||this._onProgress(a.Event('progress',{lengthComputable:!0,loaded:1,total:1}),e),e.result=b,e.textStatus=c,e.jqXHR=d,this._trigger('done',null,e)},_onFail:function(a,b,c,d){d.jqXHR=a,d.textStatus=b,d.errorThrown=c,this._trigger('fail',null,d),d.recalculateProgress&&(this._loaded-=d.loaded||d.uploadedBytes||0,this._total-=d.total||this._getTotal(d.files))},_onAlways:function(a,b,c,d){this._active-=1,d.textStatus=b,c&&c.always?(d.jqXHR=c,d.result=a):(d.jqXHR=a,d.errorThrown=c),this._trigger('always',null,d),this._active===0&&(this._trigger('stop'),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(b,c){var d=this,e,f,g,h=d._getAJAXSettings(c),i=function(c,f){return d._sending+=1,h._bitrateTimer=new d._BitrateTimer,e=e||(c!==!1&&d._trigger('send',b,h)!==!1&&(d._chunkedUpload(h)||a.ajax(h))||d._getXHRPromise(!1,h.context,f)).done(function(a,b,c){d._onDone(a,b,c,h)}).fail(function(a,b,c){d._onFail(a,b,c,h)}).always(function(a,b,c){d._sending-=1,d._onAlways(a,b,c,h);if(h.limitConcurrentUploads&&h.limitConcurrentUploads>d._sending){var e=d._slots.shift();while(e){if(!e.isRejected()){e.resolve();break}e=d._slots.shift()}}}),e};return this._beforeSend(b,h),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(i)):g=this._sequence=this._sequence.pipe(i,i),g.abort=function(){var a=[undefined,'abort','abort'];return e?e.abort():(f&&f.rejectWith(a),i(!1,a))},this._enhancePromise(g)):i()},_onAdd:function(b,c){var d=this,e=!0,f=a.extend({},this.options,c),g=f.limitMultiFileUploads,h=this._getParamName(f),i,j,k,l;if(!f.singleFileUploads&&!g||!this._isXHRUpload(f))k=[c.files],i=[h];else if(!f.singleFileUploads&&g){k=[],i=[];for(l=0;l<c.files.length;l+=g)k.push(c.files.slice(l,l+g)),j=h.slice(l,l+g),j.length||(j=h),i.push(j)}else i=h;return c.originalFiles=c.files,a.each(k||c.files,function(f,g){var h=a.extend({},c);return h.files=k?g:[g],h.paramName=i[f],h.submit=function(){return h.jqXHR=this.jqXHR=d._trigger('submit',b,this)!==!1&&d._onSend(b,this),this.jqXHR},e=d._trigger('add',b,h)}),e},_normalizeFile:function(a,b){b.name===undefined&&b.size===undefined&&(b.name=b.fileName,b.size=b.fileSize)},_replaceFileInput:function(b){var c=b.clone(!0);a('<form></form>').append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind('remove')),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_onChange:function(b){var c=b.data.fileupload,d={files:a.each(a.makeArray(b.target.files),c._normalizeFile),fileInput:a(b.target),form:a(b.target.form)};d.files.length||(d.files=[{name:b.target.value.replace(/^.*\\/,'')}]),c.options.replaceFileInput&&c._replaceFileInput(d.fileInput);if(c._trigger('change',b,d)===!1||c._onAdd(b,d)===!1)return!1},_onPaste:function(b){var c=b.data.fileupload,d=b.originalEvent.clipboardData,e=d&&d.items||[],f={files:[]};a.each(e,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&f.files.push(c)});if(c._trigger('paste',b,f)===!1||c._onAdd(b,f)===!1)return!1},_onDrop:function(b){var c=b.data.fileupload,d=b.dataTransfer=b.originalEvent.dataTransfer,e={files:a.each(a.makeArray(d&&d.files),c._normalizeFile)};if(c._trigger('drop',b,e)===!1||c._onAdd(b,e)===!1)return!1;b.preventDefault()},_onDragOver:function(a){var b=a.data.fileupload,c=a.dataTransfer=a.originalEvent.dataTransfer;if(b._trigger('dragover',a)===!1)return!1;c&&(c.dropEffect=c.effectAllowed='copy'),a.preventDefault()},_initEventHandlers:function(){var a=this.options.namespace;this._isXHRUpload(this.options)&&this.options.dropZone.bind('dragover.'+a,{fileupload:this},this._onDragOver).bind('drop.'+a,{fileupload:this},this._onDrop).bind('paste.'+a,{fileupload:this},this._onPaste),this.options.fileInput.bind('change.'+a,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.unbind('dragover.'+a,this._onDragOver).unbind('drop.'+a,this._onDrop).unbind('paste.'+a,this._onPaste),this.options.fileInput.unbind('change.'+a,this._onChange)},_setOption:function(b,c){var d=a.inArray(b,this._refreshOptionsList)!==-1;d&&this._destroyEventHandlers(),a.Widget.prototype._setOption.call(this,b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;b.fileInput===undefined?b.fileInput=this.element.is('input:file')?this.element:this.element.find('input:file'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone))},_create:function(){var b=this.options;a.extend(b,a(this.element[0].cloneNode(!1)).data()),b.namespace=b.namespace||this.widgetName,this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),a.Widget.prototype.destroy.call(this)},enable:function(){a.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),a.Widget.prototype.disable.call(this)},add:function(b){if(!b||this.options.disabled)return;b.files=a.each(a.makeArray(b.files),this._normalizeFile),this._onAdd(null,b)},send:function(b){if(b&&!this.options.disabled){b.files=a.each(a.makeArray(b.files),this._normalizeFile);if(b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){typeof define=='function'&&define.amd?define('jquery.fileupload-fp',['jquery','load-image','canvas-to-blob','./jquery.fileupload'],a):a(window.jQuery,window.loadImage)}(function(a,b){a.widget('blueimpFP.fileupload',a.blueimp.fileupload,{options:{process:[],add:function(b,c){a(this).fileupload('process',c).done(function(){c.submit()})}},processActions:{load:function(c,d){var e=this,f=c.files[c.index],g=a.Deferred();return window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&(a.type(d.maxFileSize)!=='number'||f.size<d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(f.type))?b(f,function(a){c.canvas=a,g.resolveWith(e,[c])},{canvas:!0}):g.rejectWith(e,[c]),g.promise()},resize:function(a,c){if(a.canvas){var d=b.scale(a.canvas,c);if(d.width!==a.canvas.width||d.height!==a.canvas.height)a.canvas=d,a.processed=!0}return a},save:function(b,c){if(!b.canvas||!b.processed)return b;var d=this,e=b.files[b.index],f=e.name,g=a.Deferred(),h=function(a){a.name||(e.type===a.type?a.name=e.name:e.name&&(a.name=e.name.replace(/\..+$/,'.'+a.type.substr(6)))),b.files[b.index]=a,g.resolveWith(d,[b])};return b.canvas.mozGetAsFile?h(b.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(e.type)&&f||(f&&f.replace(/\..+$/,'')||'blob')+'.png',e.type)):b.canvas.toBlob(h,e.type),g.promise()}},_processFile:function(b,c,d){var e=this,f=a.Deferred().resolveWith(e,[{files:b,index:c}]),g=f.promise();return e._processing+=1,a.each(d.process,function(a,b){g=g.pipe(function(a){return e.processActions[b.action].call(this,a,b)})}),g.always(function(){e._processing-=1,e._processing===0&&e.element.removeClass('fileupload-processing')}),e._processing===1&&e.element.addClass('fileupload-processing'),g},process:function(b){var c=this,d=a.extend({},this.options,b);return d.process&&d.process.length&&this._isXHRUpload(d)&&a.each(b.files,function(e,f){c._processingQueue=c._processingQueue.pipe(function(){var f=a.Deferred();return c._processFile(b.files,e,d).always(function(){f.resolveWith(c)}),f.promise()})}),this._processingQueue},_create:function(){a.blueimp.fileupload.prototype._create.call(this),this._processing=0,this._processingQueue=a.Deferred().resolveWith(this).promise()}})}),function(a){typeof define=='function'&&define.amd?define('jquery.fileupload-ui',['jquery','tmpl','load-image','./jquery.fileupload-fp'],a):a(window.jQuery,window.tmpl,window.loadImage)}(function(a,b,c){var d=(a.blueimpFP||a.blueimp).fileupload;a.widget('blueimpUI.fileupload',d,{options:{autoUpload:!1,maxNumberOfFiles:undefined,maxFileSize:undefined,minFileSize:undefined,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5e6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,uploadTemplateId:'template-upload',downloadTemplateId:'template-download',filesContainer:undefined,prependFiles:!1,dataType:'json',add:function(b,c){var d=a(this).data('blueimpUIFileupload'),e=d.options,f=c.files;a(this).fileupload('process',c).done(function(){d._adjustMaxNumberOfFiles(-f.length),c.isAdjusted=!0,c.files.valid=c.isValidated=d._validate(f),c.context=d._renderUpload(f).data('data',c),e.filesContainer[e.prependFiles?'prepend':'append'](c.context),d._renderPreviews(f,c.context),d._forceReflow(c.context),d._transition(c.context).done(function(){d._trigger('added',b,c)!==!1&&(e.autoUpload||c.autoUpload)&&c.autoUpload!==!1&&c.isValidated&&c.submit()})})},send:function(b,c){var d=a(this).data('blueimpUIFileupload');if(!c.isValidated){c.isAdjusted||d._adjustMaxNumberOfFiles(-c.files.length);if(!d._validate(c.files))return!1}return c.context&&c.dataType&&c.dataType.substr(0,6)==='iframe'&&c.context.find('.progress').addClass(!a.support.transition&&'progress-animated').attr('aria-valuenow',100).find('.bar').css('width','100%'),d._trigger('sent',b,c)},done:function(b,c){var d=a(this).data('blueimpUIFileupload'),e;c.context?c.context.each(function(f){var g=a.isArray(c.result)&&c.result[f]||{error:'emptyResult'};g.error&&d._adjustMaxNumberOfFiles(1),d._transition(a(this)).done(function(){var f=a(this);e=d._renderDownload([g]).css('height',f.height()).replaceAll(f),d._forceReflow(e),d._transition(e).done(function(){c.context=a(this),d._trigger('completed',b,c)})})}):(e=d._renderDownload(c.result).appendTo(d.options.filesContainer),d._forceReflow(e),d._transition(e).done(function(){c.context=a(this),d._trigger('completed',b,c)}))},fail:function(b,c){var d=a(this).data('blueimpUIFileupload'),e;d._adjustMaxNumberOfFiles(c.files.length),c.context?c.context.each(function(f){if(c.errorThrown!=='abort'){var g=c.files[f];g.error=g.error||c.errorThrown||!0,d._transition(a(this)).done(function(){var f=a(this);e=d._renderDownload([g]).replaceAll(f),d._forceReflow(e),d._transition(e).done(function(){c.context=a(this),d._trigger('failed',b,c)})})}else d._transition(a(this)).done(function(){a(this).remove(),d._trigger('failed',b,c)})}):c.errorThrown!=='abort'?(d._adjustMaxNumberOfFiles(-c.files.length),c.context=d._renderUpload(c.files).appendTo(d.options.filesContainer).data('data',c),d._forceReflow(c.context),d._transition(c.context).done(function(){c.context=a(this),d._trigger('failed',b,c)})):d._trigger('failed',b,c)},progress:function(a,b){if(b.context){var c=parseInt(b.loaded/b.total*100,10);b.context.find('.progress').attr('aria-valuenow',c).find('.bar').css('width',c+'%')}},progressall:function(b,c){var d=a(this),e=parseInt(c.loaded/c.total*100,10),f=d.find('.fileupload-progress'),g=f.find('.progress-extended');g.length&&g.html(d.data('fileupload')._renderExtendedProgress(c)),f.find('.progress').attr('aria-valuenow',e).find('.bar').css('width',e+'%')},start:function(b){var c=a(this).data('blueimpUIFileupload');c._transition(a(this).find('.fileupload-progress')).done(function(){c._trigger('started',b)})},stop:function(b){var c=a(this).data('blueimpUIFileupload');c._transition(a(this).find('.fileupload-progress')).done(function(){a(this).find('.progress').attr('aria-valuenow','0').find('.bar').css('width','0%'),a(this).find('.progress-extended').html('&nbsp;'),c._trigger('stopped',b)})},destroy:function(b,c){var d=a(this).data('blueimpUIFileupload');c.url&&(a.ajax(c),d._adjustMaxNumberOfFiles(1)),d._transition(c.context).done(function(){a(this).remove(),d._trigger('destroyed',b,c)})}},_enableDragToDesktop:function(){var b=a(this),c=b.prop('href'),d=b.prop('download'),e='application/octet-stream';b.bind('dragstart',function(a){try{a.originalEvent.dataTransfer.setData('DownloadURL',[e,d,c].join(':'))}catch(b){}})},_adjustMaxNumberOfFiles:function(a){typeof this.options.maxNumberOfFiles=='number'&&(this.options.maxNumberOfFiles+=a,this.options.maxNumberOfFiles<1?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(a){return typeof a!='number'?'':a>=1e9?(a/1e9).toFixed(2)+' GB':a>=1e6?(a/1e6).toFixed(2)+' MB':(a/1e3).toFixed(2)+' KB'},_formatBitrate:function(a){return typeof a!='number'?'':a>=1e9?(a/1e9).toFixed(2)+' Gbit/s':a>=1e6?(a/1e6).toFixed(2)+' Mbit/s':a>=1e3?(a/1e3).toFixed(2)+' kbit/s':a+' bit/s'},_formatTime:function(a){var b=new Date(a*1e3),c=parseInt(a/86400,10);return c=c?c+'d ':'',c+('0'+b.getUTCHours()).slice(-2)+':'+('0'+b.getUTCMinutes()).slice(-2)+':'+('0'+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(a*100).toFixed(2)+' %'},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+' | '+this._formatTime((a.total-a.loaded)*8/a.bitrate)+' | '+this._formatPercentage(a.loaded/a.total)+' | '+this._formatFileSize(a.loaded)+' / '+this._formatFileSize(a.total)},_hasError:function(a){return a.error?a.error:this.options.maxNumberOfFiles<0?'maxNumberOfFiles':!this.options.acceptFileTypes.test(a.type)&&!this.options.acceptFileTypes.test(a.name)?'acceptFileTypes':this.options.maxFileSize&&a.size>this.options.maxFileSize?'maxFileSize':typeof a.size=='number'&&a.size<this.options.minFileSize?'minFileSize':null},_validate:function(b){var c=this,d=!!b.length;return a.each(b,function(a,b){b.error=c._hasError(b),b.error&&(d=!1)}),d},_renderTemplate:function(b,c){if(!b)return a();var d=b({files:c,formatFileSize:this._formatFileSize,options:this.options});return d instanceof a?d:a(this.options.templatesContainer).html(d).children()},_renderPreview:function(b,d){var e=this,f=this.options,g=a.Deferred();return(c&&c(b,function(b){d.append(b),e._forceReflow(d),e._transition(d).done(function(){g.resolveWith(d)}),a.contains(document.body,d[0])||g.resolveWith(d)},{maxWidth:f.previewMaxWidth,maxHeight:f.previewMaxHeight,canvas:f.previewAsCanvas})||g.resolveWith(d))&&g},_renderPreviews:function(b,c){var d=this,e=this.options;return c.find('.preview span').each(function(c,f){var g=b[c];e.previewSourceFileTypes.test(g.type)&&(a.type(e.previewSourceMaxFileSize)!=='number'||g.size<e.previewSourceMaxFileSize)&&(d._processingQueue=d._processingQueue.pipe(function(){var b=a.Deferred();return d._renderPreview(g,a(f)).done(function(){b.resolveWith(d)}),b.promise()}))}),this._processingQueue},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find('a[download]').each(this._enableDragToDesktop).end()},_startHandler:function(b){b.preventDefault();var c=a(this),d=c.closest('.template-upload'),e=d.data('data');e&&e.submit&&!e.jqXHR&&e.submit()&&c.prop('disabled',!0)},_cancelHandler:function(b){b.preventDefault();var c=a(this).closest('.template-upload'),d=c.data('data')||{};d.jqXHR?d.jqXHR.abort():(d.errorThrown='abort',b.data.fileupload._trigger('fail',b,d))},_deleteHandler:function(b){b.preventDefault();var c=a(this);b.data.fileupload._trigger('destroy',b,{context:c.closest('.template-download'),url:c.attr('data-url'),type:c.attr('data-type')||'DELETE',dataType:b.data.fileupload.options.dataType})},_forceReflow:function(b){return a.support.transition&&b.length&&b[0].offsetWidth},_transition:function(b){var c=a.Deferred();return a.support.transition&&b.hasClass('fade')?b.bind(a.support.transition.end,function(d){d.target===b[0]&&(b.unbind(a.support.transition.end),c.resolveWith(b))}).toggleClass('in'):(b.toggleClass('in'),c.resolveWith(b)),c},_initButtonBarEventHandlers:function(){var b=this.element.find('.fileupload-buttonbar'),c=this.options.filesContainer,d=this.options.namespace;b.find('.start').bind('click.'+d,function(a){a.preventDefault(),c.find('.start button').click()}),b.find('.cancel').bind('click.'+d,function(a){a.preventDefault(),c.find('.cancel button').click()}),b.find('.delete').bind('click.'+d,function(a){a.preventDefault(),c.find('.delete input:checked').siblings('button').click(),b.find('.toggle').prop('checked',!1)}),b.find('.toggle').bind('change.'+d,function(b){c.find('.delete input').prop('checked',a(this).is(':checked'))})},_destroyButtonBarEventHandlers:function(){this.element.find('.fileupload-buttonbar button').unbind('click.'+this.options.namespace),this.element.find('.fileupload-buttonbar .toggle').unbind('change.'+this.options.namespace)},_initEventHandlers:function(){d.prototype._initEventHandlers.call(this);var a={fileupload:this};this.options.filesContainer.delegate('.start button','click.'+this.options.namespace,a,this._startHandler).delegate('.cancel button','click.'+this.options.namespace,a,this._cancelHandler).delegate('.delete button','click.'+this.options.namespace,a,this._deleteHandler).delegate('.cancel .delete_item','click.'+this.options.namespace,a,this._cancelHandler).delegate('.delete .delete_item','click.'+this.options.namespace,a,this._deleteHandler),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){var a=this.options;this._destroyButtonBarEventHandlers(),a.filesContainer.undelegate('.start button','click.'+a.namespace).undelegate('.cancel button','click.'+a.namespace).undelegate('.delete button','click.'+a.namespace),d.prototype._destroyEventHandlers.call(this)},_enableFileInputButton:function(){this.element.find('.fileinput-button input').prop('disabled',!1).parent().removeClass('disabled')},_disableFileInputButton:function(){this.element.find('.fileinput-button input').prop('disabled',!0).parent().addClass('disabled')},_initTemplates:function(){var a=this.options;a.templatesContainer=document.createElement(a.filesContainer.prop('nodeName')),b&&(a.uploadTemplateId&&(a.uploadTemplate=b(a.uploadTemplateId)),a.downloadTemplateId&&(a.downloadTemplate=b(a.downloadTemplateId)))},_initFilesContainer:function(){var b=this.options;b.filesContainer===undefined?b.filesContainer=this.element.find('.files'):b.filesContainer instanceof a||(b.filesContainer=a(b.filesContainer))},_initSpecialOptions:function(){d.prototype._initSpecialOptions.call(this),this._initFilesContainer(),this._initTemplates()},_create:function(){d.prototype._create.call(this),this._refreshOptionsList.push('filesContainer','uploadTemplateId','downloadTemplateId'),a.blueimpFP||(this._processingQueue=a.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue})},enable:function(){d.prototype.enable.call(this),this.element.find('input, button').prop('disabled',!1),this._enableFileInputButton()},disable:function(){this.element.find('input, button').prop('disabled',!0),this._disableFileInputButton(),d.prototype.disable.call(this)}})}),function(a){typeof define=='function'&&define.amd?define('jquery.iframe-transport',['jquery'],a):a(window.jQuery)}(function(a){var b=0;a.ajaxTransport('iframe',function(c){if(c.async&&(c.type==='POST'||c.type==='GET')){var d,e;return{send:function(f,g){d=a('<form style="display:none;"></form>'),e=a('<iframe src="javascript:false;" name="iframe-transport-'+(b+=1)+'"></iframe>').bind('load',function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind('load').bind('load',function(){var b;try{b=e.contents();if(!b.length||!b[0].firstChild)throw new Error}catch(c){b=undefined}g(200,'success',{iframe:b}),a('<iframe src="javascript:false;"></iframe>').appendTo(d),d.remove()}),d.prop('target',e.prop('name')).prop('action',c.url).prop('method',c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop('name',c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&c.type==='POST'&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop('name',f[b]||c.paramName)}),d.append(c.fileInput).prop('enctype','multipart/form-data').prop('encoding','multipart/form-data')),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop('name',e.prop('name')),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind('load').prop('src','javascript'.concat(':false;')),d&&d.remove()}}}}),a.ajaxSetup({converters:{'iframe text':function(b){return a(b[0].body).text()},'iframe json':function(b){return a.parseJSON(a(b[0].body).text())},'iframe html':function(b){return a(b[0].body).html()},'iframe script':function(b){return a.globalEval(a(b[0].body).text())}}})}),define('contest/submitEntry-fileupload',['jquery-wrapper','jquery.fileupload-fp','jquery.fileupload-ui','jquery.fileupload','jquery.ui.widget','jquery.iframe-transport'],function(a){function c(a){for(var c=b.length-1;c>=0;c--)b[c]===a&&b.splice(c,1)}function d(a){for(var c=b.length-1;c>=0;c--)if(b[c]===a)return!0;return!1}function e(){f()?a('#entry-submit').attr('disabled','disabled'):a('#entry-submit').removeAttr('disabled')}function f(){var b=a('#fileupload'),c=b.find('.progress').length>0||b.find('.template-upload .error').length>0;return c}function g(f){var g='/contest/jqupload.php?project_id='+a('#contestViewContainer').data('contest-id');a(f).fileupload({dataType:'json',dropZone:a(f),url:g,buttonText:uploadBtnText,acceptFileTypes:filetypes,maxFileSize:262144e3,singleFileUploads:!1,sequentialUploads:!0,autoUpload:!0,maxNumberOfFiles:maxEntryUpload,paramName:'upload[]',add:function(c,f){for(var g=0;g<f.files.length;g++){var h=f.files[g].name.replace(/ /gi,'+');if(d(h))return a('.fileUploadError').text(T_('You\'ve already uploaded <%= fileName %>',{fileName:h})).fadeIn().delay(2e3).fadeOut('slow'),e(),!1;b.push(h)}var i=a(this).data('blueimpUIFileupload'),j=i.options,k=f.files;a(this).fileupload('process',f).done(function(){i._adjustMaxNumberOfFiles(-k.length),f.isAdjusted=!0,f.files.valid=f.isValidated=i._validate(k),f.context=i._renderUpload(k).data('data',f),j.filesContainer[j.prependFiles?'prepend':'append'](f.context),i._renderPreviews(k,f.context),i._forceReflow(f.context),i._transition(f.context).done(function(){i._trigger('added',c,f)!==!1&&(j.autoUpload||f.autoUpload)&&f.autoUpload!==!1&&f.isValidated&&f.submit()})})},destroy:function(b,d){var f=a(this).data('blueimpUIFileupload');d.url&&a.ajax(d),f._adjustMaxNumberOfFiles(1),f._transition(d.context).done(function(){a(this).remove(),f._trigger('destroyed',b,d)});var g=a(d.context.context).closest('.delete').siblings('.name').find('p').text();a.each(a('#project_files').children(),function(){a(this).text()==g&&a(this).remove()}),e(),c(g)}}),a(f).bind('fileuploadadd',function(b,c){a('#entry-submit').attr('disabled','disabled'),c.url=g}).bind('fileuploadsend',function(a,b){b.url=g}).bind('fileuploaddone',function(b,c){a.each(c.result,function(b,c){a('#proj_upload_fileset').val(c.fileset),a('#project_files').append(a('<option/>',{value:c.server_name,text:c.name,selected:!0}))}),a('#entry-submit').removeAttr('disabled')}).bind('fileuploadfail',function(a,b){for(var d=0;d<b.files.length;d++){var e=b.files[d].name.replace(/ /gi,'+');c(e)}}).bind('fileuploadfailed',function(a,b){e()}),a(f).unbind('dragover').bind('dragover',function(b){var c=a(f).data('blueimpUIFileupload'),d=b.dataTransfer=b.originalEvent.dataTransfer;if(c._trigger('dragover',b)===!1)return!1;if(d){try{d.effectAllowed='copy'}catch(e){}d.dropEffect='copy'}b.preventDefault()})}window.locale={fileupload:{errors:{maxFileSize:T_('File is too big'),minFileSize:T_('File is too small'),acceptFileTypes:T_('Filetype not allowed'),maxNumberOfFiles:T_('Max number of files exceeded'),uploadedBytes:T_('Uploaded bytes exceed file size'),emptyResult:T_('Empty file upload result')},error:T_('Error'),start:T_('Start'),cancel:T_('Cancel'),destroy:T_('Delete')}};var b=new Array;return{initFileUpload:g}}),!function(a){'use strict';var b=function(a,b){this.init('tooltip_legacy',a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!='manual'&&(e=this.options.trigger=='hover'?'mouseenter':'focus',f=this.options.trigger=='hover'?'mouseleave':'blur',this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:'manual',selector:''}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=='number'&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type.replace('_legacy',''));!c.options.delay||!c.options.delay.show?c.show():(c.hoverState='in',setTimeout(function(){c.hoverState=='in'&&c.show()},c.options.delay.show))},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type.replace('_legacy',''));!c.options.delay||!c.options.delay.hide?c.hide():(c.hoverState='out',setTimeout(function(){c.hoverState=='out'&&c.hide()},c.options.delay.hide))},show:function(){var b,c,d,e,f,g,h;if(this.hasContent()&&this.enabled){b=this.tip(),this.setContent(),this.options.animation&&b.addClass('fade'),g=typeof this.options.placement=='function'?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,c=/in/.test(g),a('.gaf-container.tooltip-wraper').remove(),b.css({top:0,left:0,display:'block'});var i=jq('<div class="gaf-container tooltip-wraper"></div>');i.append(b).appendTo(c?this.$element:document.body),d=this.getPosition(c),e=b[0].offsetWidth,f=b[0].offsetHeight;switch(c?g.split(' ')[1]:g){case'bottom':h={top:d.top+d.height,left:d.left+d.width/2-e/2};break;case'top':h={top:d.top-f,left:d.left+d.width/2-e/2};break;case'left':h={top:d.top+d.height/2-f/2,left:d.left-e};break;case'right':h={top:d.top+d.height/2-f/2,left:d.left+d.width}}b.css(h).addClass(g).addClass('in')}},setContent:function(){var a=this.tip();a.find('.tooltip-inner').html(this.getTitle()),a.removeClass('fade in top bottom left right')},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass('in'),a.support.transition&&this.$tip.hasClass('fade')?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr('title')||typeof a.attr('data-original-title')!='string')&&a.attr('data-original-title',a.attr('title')||'').removeAttr('title')},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr('data-original-title')||(typeof c.title=='function'?c.title.call(b[0]):c.title),a=a.toString().replace(/(^\s*|\s*$)/,''),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass('in')?'hide':'show']()}},a.fn.tooltip_legacy=function(c){return this.each(function(){var d=a(this),e=d.data('tooltip'),f=typeof c=='object'&&c;e||d.data('tooltip',e=new b(this,f)),typeof c=='string'&&e[c]()})},a.fn.tooltip_legacy.Constructor=b,a.fn.tooltip_legacy.defaults={animation:!0,delay:0,selector:!1,placement:'top',trigger:'hover',title:'',template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),!function(a){var b=function(a,b){this.init('popover_legacy',a,b)};b.prototype=a.extend({},a.fn.tooltip_legacy.Constructor.prototype,{constructor:b,setContent:function(){var b=this.tip(),c=this.getTitle(),d=this.getContent();b.find('.popover-title')[a.type(c)=='object'?'append':'html'](c),a('.popover-content > *',b).not('img')[a.type(d)=='object'?'append':'html'](d),b.removeClass('fade top bottom left right in')},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr('data-content')||(typeof c.content=='function'?c.content.call(b[0]):c.content),a=a.toString().replace(/(^\s*|\s*$)/,''),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover_legacy=function(c){return this.each(function(){var d=a(this),e=d.data('popover'),f=typeof c=='object'&&c;e||d.data('popover',e=new b(this,f)),typeof c=='string'&&e[c]()})},a.fn.popover_legacy.Constructor=b,a.fn.popover_legacy.defaults=a.extend({},a.fn.tooltip_legacy.defaults,{placement:'right',content:'',template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),define('bootstrap-popover',function(){}),function(a){a.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0};d=a.extend(d,c?{over:b,out:c}:b);var e,f,g,h,i=function(a){e=a.pageX,f=a.pageY},j=function(b,c){c.hoverIntent_t=clearTimeout(c.hoverIntent_t);if(Math.abs(g-e)+Math.abs(h-f)<d.sensitivity)return a(c).unbind('mousemove',i),c.hoverIntent_s=1,d.over.apply(c,[b]);g=e,h=f,c.hoverIntent_t=setTimeout(function(){j(b,c)},d.interval)},k=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,d.out.apply(b,[a])},l=function(b){var c=jQuery.extend({},b),e=this;e.hoverIntent_t&&(e.hoverIntent_t=clearTimeout(e.hoverIntent_t)),b.type=='mouseenter'?(g=c.pageX,h=c.pageY,a(e).bind('mousemove',i),e.hoverIntent_s!=1&&(e.hoverIntent_t=setTimeout(function(){j(c,e)},d.interval))):(a(e).unbind('mousemove',i),e.hoverIntent_s==1&&(e.hoverIntent_t=setTimeout(function(){k(c,e)},d.timeout)))};return this.live('mouseenter mouseleave',l)}}(jQuery),define('contest/contestHoverIntent',function(){}),define('video-wrapper',[],function(){return videojs}),jQuery(function(){var a=function(a){var b={className:'autosizejs',append:'',callback:!1},c='hidden',d='border-box',e='lineHeight',f='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px;  right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',g=['fontFamily','fontSize','fontWeight','fontStyle','letterSpacing','textTransform','wordSpacing','textIndent'],h='oninput',i='onpropertychange',j=a(f)[0];j.setAttribute(h,'return'),a.isFunction(j[h])||i in j?(a(j).css(e,'99px'),a(j).css(e)==='99px'&&g.push(e),a.fn.autosize=function(e){return e=a.extend({},b,e||{}),this.each(function(){function t(){var a,d,f;n||(n=!0,k.value=b.value+e.append,k.style.overflowY=b.style.overflowY,f=parseInt(b.style.height,10),k.style.width=j.css('width'),k.scrollTop=0,k.scrollTop=9e4,a=k.scrollTop,d=c,a>m?(a=m,d='scroll'):a<l&&(a=l),a+=q,b.style.overflowY=d,f!==a&&(b.style.height=a+'px',s&&e.callback.call(b)),setTimeout(function(){n=!1},1))}var b=this,j=a(b),k,l=j.height(),m=parseInt(j.css('maxHeight'),10),n,o=g.length,p,q=0,r=b.value,s=a.isFunction(e.callback);if(j.css('box-sizing')===d||j.css('-moz-box-sizing')===d||j.css('-webkit-box-sizing')===d)q=j.outerHeight()-j.height();if(j.data('mirror')||j.data('ismirror'))return;k=a(f).data('ismirror',!0).addClass(e.className)[0],p=j.css('resize')==='none'?'none':'horizontal',j.data('mirror',a(k)).css({overflow:c,overflowY:c,wordWrap:'break-word',resize:p}),m=m&&m>0?m:9e4;while(o--)k.style[g[o]]=j.css(g[o]);a('body').append(k),i in b?h in b?b[h]=b.onkeyup=t:b[i]=t:(b[h]=t,b.value='',b.value=r),a(window).resize(t),j.bind('autosize',t),t()})}):a.fn.autosize=function(a){return this}};typeof define=='function'&&define.amd?define('jquery.autosize',['jquery-wrapper'],function(b){a(b)}):a(jQuery)}()),define('contest/contestSocial',['jquery-wrapper','underscore-wrapper'],function(a,b){function d(a){var b=function(){addthis.init(),a()};e(b)}function e(b){c={data_ga_property:'UA-223765-6',data_ga_social:!0,data_track_clickback:!0},window.addthis&&(window.addthis=null,window._adr=null,window._atc=null,window._atd=null,window._ate=null,window._atr=null,window._atw=null),a.getScript('https://secure.addthis.com/js/250/addthis_widget.js#async=1&pub=getafreelancer',b)}var c;return{renderSocialButtons:d}}),function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn('nothing selected, can\'t validate, returning nothing');return}var c=a.data(this[0],'validator');if(c)return c;this.attr('novalidate','novalidate'),c=new a.validator(b,this[0]),a.data(this[0],'validator',c);if(c.settings.onsubmit){var d=this.find('input, button');d.filter('.cancel').click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&d.filter(':submit').click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a('<input type=\'hidden\'/>').attr('name',c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})}return c},valid:function(){if(a(this[0]).is('form'))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,'validator').settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case'add':a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case'remove':if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}var i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required,i=a.extend({required:j},i)}return i}}),a.extend(a.expr[':'],{blank:function(b){return!a.trim(''+b.value)},filled:function(b){return!!a.trim(''+b.value)},unchecked:function(a){return!a.checked}});if(typeof a.validator=='function')return;a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return arguments.length==1?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp('\\{'+a+'\\}','g'),c)}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:'error',validClass:'valid',errorElement:'label',focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:':hidden',ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a,b){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){b.type==='radio'?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){b.type==='radio'?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:T_('This field is required.'),remote:T_('Please fix this field.'),email:T_('Please enter a valid email address.'),url:T_('Please enter a valid URL.'),date:T_('Please enter a valid date.'),dateISO:T_('Please enter a valid date (ISO).'),number:T_('Please enter a valid number.'),digits:T_('Please enter only digits.'),creditcard:T_('Please enter a valid credit card number.'),equalTo:T_('Please enter the same value again.'),accept:T_('Please enter a value with a valid extension.'),maxlength:a.validator.format(T_('Please enter no more than {0} characters.')),minlength:a.validator.format(T_('Please enter at least {0} characters.')),rangelength:a.validator.format(T_('Please enter a value between {0} and {1} characters long.')),range:a.validator.format(T_('Please enter a value between {0} and {1}.')),max:a.validator.format(T_('Please enter a value less than or equal to {0}.')),min:a.validator.format(T_('Please enter a value greater than or equal to {0}.'))},autoCreateRanges:!1,prototype:{init:function(){function d(b){var c=a.data(this[0].form,'validator'),d='on'+b.type.replace(/^validate/,'');c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var b=this.groups={};a.each(this.settings.groups,function(c,d){a.each(d.split(/\s/),function(a,d){b[d]=c})});var c=this.settings.rules;a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).validateDelegate('[type=\'text\'], [type=\'password\'], [type=\'file\'], select, textarea, [type=\'number\'], [type=\'search\'] ,[type=\'tel\'], [type=\'url\'], [type=\'email\'], [type=\'datetime\'], [type=\'date\'], [type=\'month\'], [type=\'week\'], [type=\'time\'], [type=\'datetime-local\'], [type=\'range\'], [type=\'color\'] ','focusin focusout keyup',d).validateDelegate('[type=\'radio\'], [type=\'checkbox\'], select, option','click',d),this.settings.invalidHandler&&a(this.currentForm).bind('invalid-form.validate',this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler('invalid-form',[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b)),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(':visible').focus().trigger('focusin')}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var b=this,c={};return a(this.currentForm).find('input, select, textarea').not(':submit, :reset, :image, [disabled]').not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error('%o has no name assigned',this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+'.'+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var c=a(b).rules(),d=!1;for(var e in c){var f={method:e,parameters:c[e]};try{var g=a.validator.methods[e].call(this,b.value.replace(/\r/g,''),b,f.parameters);if(g=='dependency-mismatch'){d=!0;continue}d=!1;if(g=='pending'){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!g)return this.formatAndAdd(b,f),!1}catch(h){throw this.settings.debug&&window.console&&console.log('exception occurred when checking element '+b.id+', check the \''+f.method+'\' method',h),h}}if(d)return;return this.objectLength(c)&&this.successList.push(b),!0},customMetaMessage:function(b,c){if(!a.metadata)return;var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a];return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],'<strong>Warning: No message defined for '+b.name+'</strong>')},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;typeof c=='function'?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,'{$1}'),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr('generated')&&d.html(c)):(d=a('<'+this.settings.errorElement+'/>').attr({'for':this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||''),this.settings.wrapper&&(d=d.hide().show().wrap('<'+this.settings.wrapper+'/>').parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(''),typeof this.settings.success=='string'?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr('for')==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case'select':return a('option:selected',c).length;case'input':if(this.checkable(c))return this.findByName(c.name).filter(':checked').length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{'boolean':function(a,b){return a},string:function(b,c){return!!a(b,c.form).length},'function':function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&'dependency-mismatch'},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&this.pendingRequest==0&&this.formSubmitted&&(a(this.currentForm).triggerHandler('invalid-form',[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,'previousValue')||a.data(b,'previousValue',{old:null,valid:!0,message:this.defaultMessage(b,'remote')})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr('class');return d&&a.each(d.split(' '),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={},d=a(b);for(var e in a.validator.methods){var f;e==='required'&&typeof a.fn.prop=='function'?f=d.prop(e):f=d.attr(e),f?c[e]=f:d[0].getAttribute('type')===e&&(c[e]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,'validator').settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,'validator');return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1){delete b[d];return}if(e.param||e.depends){var f=!0;switch(typeof e.depends){case'string':f=!!a(e.depends,c.form).length;break;case'function':f=e.depends.call(c,c)}f?b[d]=e.param!==undefined?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(['minlength','maxlength','min','max'],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(['rangelength','range'],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if(typeof b=='string'){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=d!=undefined?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return'dependency-mismatch';switch(c.nodeName.toLowerCase()){case'select':var e=a(c).val();return e&&e.length>0;case'input':if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return'dependency-mismatch';var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d=typeof d=='string'&&{url:d}||d;if(this.pending[c.name])return'pending';if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:'abort',port:'validate'+c.name,dataType:'json',data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else{var i={},j=d||f.defaultMessage(c,'remote');i[c.name]=e.message=a.isFunction(j)?j(b):j,f.showErrors(i)}e.valid=g,f.stopRequest(c,g)}},d)),'pending'},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^([\w\-\+!#%\*\=\?\^\{\}\|~]+(?:\.[\w\-\+!#%\*\=\?\^\{\}\|~]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return'dependency-mismatch';if(/[^0-9 -]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,'');for(var f=a.length-1;f>=0;f--){var g=a.charAt(f),d=parseInt(g,10);e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return c%10==0},accept:function(a,b,c){return c=typeof c=='string'?c.replace(/,/g,'|'):'png|jpe?g|gif',this.optional(b)||a.match(new RegExp('.('+c+')$','i'))},equalTo:function(b,c,d){var e=a(d).unbind('.validate-equalTo').bind('blur.validate-equalTo',function(){a(c).valid()});return b==e.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){var e=a.port;a.mode=='abort'&&(b[e]&&b[e].abort(),b[e]=d)});else{var c=a.ajax;a.ajax=function(d){var e=('mode'in d?d:a.ajaxSettings).mode,f=('port'in d?d:a.ajaxSettings).port;return e=='abort'?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:'focusin',blur:'focusout'},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);if(e.is(b))return d.apply(e,arguments)})}})}(jQuery),define('jquery.validate',function(){}),function(){var a=['Msxml2.XMLHTTP','Microsoft.XMLHTTP','Msxml2.XMLHTTP.4.0'],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!='undefined'&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,''),f=d&&location.hostname,g=d&&(location.port||undefined),h=[];define('text',[],function(){var i,j;return i={version:'1.0.8',strip:function(a){if(a){a=a.replace(b,'');var d=a.match(c);d&&(a=d[1])}else a='';return a},jsEscape:function(a){return a.replace(/(['\\])/g,'\\$1').replace(/[\f]/g,'\\f').replace(/[\b]/g,'\\b').replace(/[\n]/g,'\\n').replace(/[\t]/g,'\\t').replace(/[\r]/g,'\\r')},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!='undefined')return new XMLHttpRequest;if(typeof ActiveXObject!='undefined')for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}return b},parseName:function(a){var b=!1,c=a.indexOf('.'),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf('!'),c!==-1&&(b=e.substring(c+1,e.length),b=b==='strip',e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=i.xdRegExp.exec(a),f,g,h;return e?(f=e[2],g=e[3],g=g.split(':'),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===d)):!0},finishLoad:function(a,b,c,d,e){c=b?i.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText){c();return}var j=i.parseName(a),k=j.moduleName+'.'+j.ext,l=b.toUrl(k),m=h&&h.text&&h.text.useXhr||i.useXhr;!d||m(l,e,f,g)?i.get(l,function(b){i.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){i.finishLoad(j.moduleName+'.'+j.ext,j.strip,a,c,h)})},write:function(a,b,c,d){if(h.hasOwnProperty(b)){var e=i.jsEscape(h[b]);c.asModule(a+'!'+b,'define(function () { return \''+e+'\';});\n')}},writeFile:function(a,b,c,d,e){var f=i.parseName(b),g=f.moduleName+'.'+f.ext,h=c.toUrl(f.moduleName+'.'+f.ext)+'.js';i.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},i.write(a,g,c,e)},e)}},i.createXhr()?i.get=function(a,b){var c=i.createXhr();c.open('GET',a,!0),c.onreadystatechange=function(a){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!='undefined'&&process.versions&&!!process.versions.node?(j=require.nodeRequire('fs'),i.get=function(a,b){var c=j.readFileSync(a,'utf8');c.indexOf('')===0&&(c=c.substring(1)),b(c)}):typeof Packages!='undefined'&&(i.get=function(a,b){var c='utf-8',d=new java.io.File(a),e=java.lang.System.getProperty('line.separator'),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(d),c)),g,h,i='';try{g=new java.lang.StringBuffer,h=f.readLine(),h&&h.length()&&h.charAt(0)===65279&&(h=h.substring(1)),g.append(h);while((h=f.readLine())!==null)g.append(e),g.append(h);i=String(g.toString())}finally{f.close()}b(i)}),i})}(),define('text!templates/contestView/publish_draft.htm',[],function(){return'<div class="alert alert-warning contest-banner">\n    <p class="small draft-description stat">\n        <strong>\n            <%-T_("Almost there!")%>\n            <% if (needs_deposit) { %>\n                <%-T_("A deposit is required to send your contest live.")%>\n            <% } else { %>\n                <%-T_("Payment confirmation is required to send your contest live.")%>\n            <% } %>\n        </strong>\n        <%- T_("Our talented freelancers are ready to start submitting entries to your contest.") %>\n        <% if (needs_deposit) { %>\n            <%-T_("Please deposit the required <[-amount]> to publish your contest.", {\'amount\':amount})%>\n            <%=T_("Your contest will be live immediately after your deposit is made, where it will be available to over <span class=\'totalFp\'><[-count]></span> freelancers!", {count:freelancerCount})%>\n        <% } else { %>\n            <%-T_("Please authorise payment of <[-amount]> to publish your contest.", {\'amount\':amount})%>\n            <%=T_("Your contest will be live immediately after confirmation is made, where it will be available to over <span class=\'totalFp\'><[-count]></span> freelancers!", {count:freelancerCount})%>\n        <% } %>\n    </p>\n    <a href="javascript:void(0);" class="btn btn-warning pull-right draft-contest-link">\n        <% if (needs_deposit) { %>\n            <%-T_("Deposit Funds Now")%>\n        <% } else { %>\n            <%-T_("Confirm Payment Now")%>\n        <% } %>\n    </a>\n    <div class="clear"></div>\n</div>\n'}),define('text!templates/contestView/contestEntryViolation.htm',[],function(){return'<div id="contest-entry-violation" class="modal hide contest-violation-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Report Contest Entry Violation") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to report this entry?")%>\n        </strong>\n      </p>\n      <p>\n        <%- T_("Please select which reason:") %>\n      </p>\n      <select id="entry-violation-reason">\n          <option value="1"><%= T_("Copy of another design") %></option>\n          <option value="2"><%= T_("Contains explicit or adult content") %></option>\n          <option value="3"><%= T_("Contains advertising material") %></option>\n          <option value="4"><%= T_("Using unlicensed stock imagery or clipart") %></option>\n          <option value="5"><%= T_("Spam") %></option>\n      </select>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%= T_("Cancel") %></button>\n      <button class="btn btn-primary contest-report-entry-violation" data-entry-id="<%- entryId %>"><%= T_("Report") %></button>\n\n    </div>\n</div>\n'}),define('text!templates/contestView/contestReportFreelancer.htm',[],function(){return'<div id="contest-report-designer" class="modal hide report-freelancer-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Report Freelancer") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to report this designer?")%>\n        </strong>\n      </p>\n      <p>\n        <%- T_("Please select which reason:") %>\n      </p>\n      <select id="designer-violation-reason">\n          <option value="5"><%-T_("Offensive Language")%></option>\n          <option value="6"><%-T_("Advertising")%></option>\n          <option value="7"><%-T_("Initiating Deals Offsite")%></option>\n          <option value="8"><%-T_("Spam")%></option>\n      </select>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <div>\n        <button class="btn btn-primary confirm-report-designer" data-user-id="<%- userId %>" data-contest-id="<%- contestId %>"><%- T_("Report") %></button>\n      </div>\n    </div>\n</div>\n'}),define('text!templates/contestView/contestRejectFreelancer.htm',[],function(){return'<div id="contest-reject-designer" class="modal hide reject-freelancer-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Reject Freelancer") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to reject this designer?")%>\n        </strong>\n      </p>\n      <p>\n        <%- T_("Rejecting this designer will remove all their submissions from your contests and will prevent them from submitting designs in the future.") %>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <div>\n        <button class="btn btn-primary confirm-reject-designer"><%- T_("Reject Freelancer") %></button>\n      </div>\n    </div>\n</div>\n'}),define('text!templates/contestView/contestEntryNavigation.htm',[],function(){return'<div>\n    <a class="btn btn-primary  entry-award-prize" title="<%- T_("Award Prize to Freelancer") %>">\n        <span class="icon-trophy"></span>\n    </a>\n    <a class="btn btn-primary  entry-give-feedback" title="<%- T_("Chat With Freelancer") %>" >\n        <span class="icon-envelope icon-white"></span>\n    </a>\n    <a class="btn btn-primary entry-highlight" title="<%- T_("Highlight") %>" data-toggle="modal">\n        <span class="icon-highlight"></span>\n    </a>\n    <a class="btn btn-primary  entry-reject" title="<%- T_("Reject Entry") %>" >\n        <span class="icon-remove icon-white"></span>\n    </a>\n    <a class="btn btn-primary  entry-handover" title="<%- T_("Hand Over") %>" >\n        <span class="icon-handover"></span>\n    </a>\n    <a class="btn btn-primary  entry-unwithdraw" title="<%- T_("Resubmit") %>" >\n        <span class="icon-arrow-up icon-white"></span>\n    </a>\n    <a class="btn btn-primary  entry-reconsider" title="<%- T_("Reconsider Entry") %>" >\n        <span class="icon-repeat icon-white"></span>\n    </a>\n    <a class="btn btn-primary entry-withdraw" title="<%- T_("Withdraw") %>" >\n        <span class="icon-repeat icon-white"></span>\n    </a>\n</div>\n'}),define('text!templates/contestView/contestEntryHighlight.htm',[],function(){return'<div id="contest-entry-highlight-modal" class="modal hide" tabindex="-1" role="dialog"\n  aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-header">\n    <h3><%- T_("Highlight Entry") %></h3>\n  </div>\n  <div class="modal-body">\n    <%- T_("Highlight your entry to make it visually stand out from the rest!") %> <strong>(<%- highlightPrice %>)</strong>\n    <div id="errors"></div>\n  </div>\n  <div class="modal-footer">\n    <span class="loading hide">\n      <img src="/img/dashboard-loading.gif" />\n    </span>\n    <button id="contest-entry-highlight-confirm" class="btn btn-primary" aria-hidden="true"><%- T_("Confirm") %></button>\n    <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n  </div>\n</div>\n'}),define('text!templates/contestView/contestInfoModal.htm',[],function(){return'<div id="contest-info-modal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-header">\n    <h3><%- T_("Contest Info") %></h3>\n  </div>\n  <div class="modal-body">\n    <div class="alert alert-info">\n      <p><%- infoMessage %></p>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Close") %></button>\n  </div>\n</div>\n'}),define('text!templates/contestView/contestGallery.htm',[],function(){return'<li class="span3 contest-entry\ncontest_entry contest_entry-format_<%=format%>\n\n<% if (currentUserId == userId) { %>manage-entry <% }%>\n<% if (is_winner) { %>contest-entry-winner <% }%>\n<% if (is_chosen) { %>contest-entry-chosen <% }%>\n<% if (is_active) { %>active-entry <% }%>\n<% if (is_unhoverable) { %>entry-unhoverable <% }%>\n\n<% if (showSealedMark) { %>\n    contest-entry-sealed entry-unhoverable\n<% } %>\n\n<% if (showHighlightedMark) { %>\n    contest-entry-highlight\n<% }%>\n\n<% if (showHighlightOption) { %>\n    contest-entry-highlight-option\n<% }%>\n\n<% if (is_withdrawn) { %>\n    contest-entry-withdrawn\n\n<% } else { %>\n        <% if (isSealed) { %>\n        contest-entry-sealed-upgrade\n    <% }%>\n    <% if (isHighlighted) { %>\n        contest-entry-highlight-upgrade\n    <% }%>\n<% }%>\n\n<% if (is_eliminated) { %>\n    contest-entry-rejected\n<% }%>"\n\n<% if (showImages) { %>\n    data-path="<%- path %>"\n    data-s3path="<%- s3path %>"\n    data-image-url="<%- thumb %>"\n<% }%>\n\ndata-user-id="<%- userId %>"\ndata-title="<%- title %>"\ndata-videoformat="<%- videoformat %>"\ndata-description="<%- description %>"\ndata-logo-url="<%- logo_url %>"\ndata-logo-large-url="<%- logo_large_url %>"\n\ndata-entry-id="<%- id %>"\ndata-freelancer-rating="<%- seller_rating %>"\ndata-date-entry="<%- timestamp_entry %>"\ndata-is-commented="<%- comment %>"\ndata-num-likes="<%- num_likes %>"\ndata-default-sort="<%- default_sort %>"\ndata-entry-number="<%- number %>"\ndata-is-withdrawn="<%- is_withdrawn %>"\ndata-is-sealed="<%- isSealed %>"\ndata-is-highlighted="<%- isHighlighted %>">\n\n    <% if (is_winner) { %>\n        <h5 class="corner-ribbon">\n            <span class="corner-ribbon-content"><%- T_("Winner") %></span>\n        </h5>\n    <% }%>\n    <% if (is_chosen) { %>\n        <h5 class="corner-ribbon">\n            <span class="corner-ribbon-content"><%- T_("Chosen") %></span>\n        </h5>\n    <% }%>\n    <% if (is_gold) { %>\n        <h5 class="corner-ribbon">\n            <span class="corner-ribbon-content"><%- T_("Winner") %></span>\n        </h5>\n    <% }%>\n    <% if (is_silver) { %>\n        <h5 class="corner-ribbon contest-second-winner">\n            <span class="corner-ribbon-content"><%- T_("2nd Winner") %></span>\n        </h5>\n    <% }%>\n    <% if (is_bronze) { %>\n        <h5 class="corner-ribbon contest-third-winner">\n            <span class="corner-ribbon-content"><%- T_("3rd Winner") %></span>\n        </h5>\n    <% }%>\n    <% if (is_runnerUp) { %>\n        <h5 class="corner-ribbon contest-runner-up">\n            <span class="corner-ribbon-content"><%- T_("Runner up") %></span>\n        </h5>\n    <% }%>\n\n    <% if (showReportEntry) { %>\n        <h6 class="entry-number report-entry" id="report-entry">\n            <a href="javascript:void(0)"><%- T_("Report") %></a>\n        </h6>\n    <% }%>\n\n    <h6 class="entry-number">\n        <span class="access">entry number </span><%- number %>\n    </h6>\n\n    <div class="contest_entry-image\n        <% if(showWithdrawn) { %>\n            hide\n        <% }%>\n        contest-text-wrap">\n\n\n        <% if (!showSealedMark) { %>\n            <a class="entry-quick-view" data-toggle="modal"  href="<%-logo_large_url%>">\n        <% } %>\n            <div class="main-thumb-container">\n                <img class=\'main-thumb\n                    <% if (showSealedMark) { %>\n                        sealed-logo\n                    <% } %>\'\n                    <% if (showWithdrawn) { %>\n                        src="<%=cdn_url(\'/img/contest/withdrawn.png\', \'https://\')%>"\n\n                    <% } else { %>\n                        alt=\'<%- altText %>\'\n                        <% if (showSealedMark) { %>\n                            src="<%=cdn_url(\'/static/css/images/pages/contest/sealed.png\', \'https://\')%>"\n\n                        <% } else { %>\n\n                            src="<%- thumb %>"\n                        <% } %>\n                    <% } %>\n                > <!--end of img tag-->\n            </div>\n        <% if (!showSealedMark) { %>\n            </a>\n        <% } %>\n\n        <% if (showImages) { %>\n            <div class="thumb-minis">\n                <% _.each(files, function(element,index) { %>\n                    <% if (index > 0) { %>\n                        <div class="thumb-mini-container">\n                            <img src="<%-element.thumb80%>"/>\n                        </div>\n                    <% } %>\n                    <div class="thumb_url hide" data-thumb-url="<%-element.thumb%>"></div>\n                <% }); %>\n            </div>\n        <% } %>\n    </div>\n\n    <div class="entry-hover-bg"></div>\n\n    <div class="entry-details">\n        <div class="username">\n            <a href="<%- logo_url %>"\n                class="entry_user_link\n                    <% if(showWithdrawn) { %>\n                        hide\n                    <% }%>"\n                data-user-id="<%- userId %>"\n                data-username="<%- userName %>">\n                <%- userName %>\n            </a>\n        </div>\n\n        <% if (showEntryHiremeBtn) { %>\n            <div class="contest-hireme-btn-container BOOM hide" >\n                <a class="btn btn-primary branded sml directory-hireme hideme_btn"\n                    onclick="javascript:_ttref.push([\'_setCookie\',\'HireMe_ContestButton\']"\n                    href="/u/<%- userName %>.html?hireme=true" >\n                    <span></span><%- T_("Hire Me") %>\n                </a>\n            </div>\n        <% } %>\n\n        <div class="contest-rating-container <% if (!showContestRating) { %> hide <% }%>">\n            <div class=\'radio_option\' id="entry_rating_<%- id %>"\n                data-entry-id="<%- id %>"\n                data-rating="<%- rating %>">\n                <input type="radio" name="entry_rating" value="1" title = "<%- T_("Rate 1 stars") %>" class="star"  />\n                <input type="radio" name="entry_rating" value="2" title = "<%- T_("Rate 2 stars") %>" class="star" />\n                <input type="radio" name="entry_rating" value="3" title = "<%- T_("Rate 3 stars") %>" class="star" />\n                <input type="radio" name="entry_rating" value="4" title = "<%- T_("Rate 4 stars") %>" class="star" />\n                <input type="radio" name="entry_rating" value="5" title = "<%- T_("Rate 5 stars") %>" class="star"  />\n            </div>\n        </div>\n\n        <div class="entry-status">\n            <% if(showWithdrawn) { %>\n                <span><%- T_("Withdrawn") %></span>\n\n            <% } else { %>\n                <% if(showRejected) { %>\n                    <span><%- T_("Rejected") %></span>\n                <% }%>\n            <% } %>\n        </div>\n    </div>\n\n    <% if (showIcons) { %>\n        <div class="contest-upgrade-icon">\n            <span class="contest-icon-highlight" title="<%- T_("Highlighted") %>"><%- T_("Highlighted") %></span>\n            <span class="contest-icon-sealed" title="<%- T_("Sealed") %>"><%- T_("Sealed") %></span>\n        </div>\n    <% } %>\n\n    <% if (showImages) { %>\n        <a href="javascript:void(0);"\n            class="contest-entry-like entry-like-grid-view\n            <% if (currentUserLiked === true)  { %>\n                contest_entry-liked\n            <% } else {%>\n                contest_entry-not-liked\n            <% }%>"\n            data-contest-id="<%- contestId %>"\n            data-entry-id="<%- id %>"\n            data-num-likes="<%- num_likes %>">\n            <%= num_likes %> <% if (num_likes == 1)  { %><%- T_("Like") %><% } else {%><%- T_("Likes") %><% }%>\n        </a>\n    <% } %>\n\n    <div class="entry-hover-wrap btn-group contest-button-panel"></div>\n</li>\n'}),define('text!templates/contestView/contestErrorModal.htm',[],function(){return'<div id="contest-error-modal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <h3><%- T_("Error") %></h3>\n    </div>\n    <div class="modal-body">\n      <div class="alert alert-error">\n                <p><%- errorMessage %></p>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Close") %></button>\n    </div>\n</div>\n'}),define('text!templates/contestView/contestImageEntryZoom.htm',[],function(){return'<img style="width: <%- width %> px; height: <%- height %>px; margin-left: <%- left %>px; margin-top: <%- top %>px;" src="<%- bigSrc %>">\n<div class="zoom-title-desc">\n    <h4><%- title %></h4>\n    <p class="zoom-desc"><%- description %></p>\n</div>\n'}),define('text!templates/contestView/contestVideoEntryZoom.htm',[],function(){return'<% if(videoformat == "flv") { %>\n  <div id="player" class="zoom-flv-video"><img src="<%= path %>start_thumb420.jpg" width="320" height="240"  alt="<%- T_("Poster Image") %>" title="<%- T_("No video playback capabilities.") %>" /></div>\n<% }  else { %>\n  <video id="player" class="video-js vjs-default-skin" autoplay controls\n  preload="auto" width="320" height="240" poster="<%= path %>start_thumb420.jpg"\n  data-setup="{}">\n    <source src="<%= path %>video.mp4" type=\'video/mp4\'>\n    <source src="<%= path %>video.webm" type=\'video/webm\'>\n  </video>\n  <% } %>\n  <div class="zoom-title-desc">\n    <h4><%- title %></h4>\n    <p class="zoom-desc"><%- description %></p>\n  </div>\n<% if(votable) { %>\n  <div class="zoom-fb-votable">\n      <fb:like href="<%= largeLogo %>"  style="top: -3px" send="false" layout="button_count" width="90" show_faces="true" font="" class="facebook-share"></fb:like>\n      <iframe width="100px" height="20px" allowtransparency="true" frameborder="0" scrolling="no"  src="//platform.twitter.com/widgets/tweet_button.html?url=<%= largeLogo %>&text=Check out this entry in the Expose the @freelancer Logo to Win $25,000 Competition"  class="twitter-share-button">Tweet</a>\n  </div>\n<% } %>\n'}),define('text!templates/contestView/contestSuccessModal.htm',[],function(){return'<div id="contest-success-modal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-header">\n    <h3><%- T_("Success") %></h3>\n  </div>\n  <div class="modal-body">\n    <div class="alert alert-success">\n      <p><%- successMessage %></p>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Close") %></button>\n  </div>\n</div>\n'}),define('text!templates/contestView/contestGalleryItemPicked.htm',[],function(){return'<div id="contest-gallery-item-picked" class="modal hide contest-item-picked-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Award Prize for this Entry") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n    <%= T_("Are you sure you wish to award the prize to <a title=\'<[- username ]>\' href=\'/u/<[- username ]>.html\'><[- username ]></a> for entry #<[- number ]>?", {username: username, number: number}) %>\n      </p>\n      <div class="contest-item-picked">\n        <img alt="<%- T_("Award as winner?")%>" src="<%- thumb %>">\n      </div>\n      <p>\n    <%- T_("You will then be taken to the Entry Handover process to transfer ownership and receive files") %>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <div class="contest-action">\n        <button class="btn btn-primary contest-award-prize-entry" data-entry-id="<%- entryId %>"><%- T_("Confirm") %></button>\n      </div>\n    </div>\n</div>\n\n<div id="contest-gallery-item-choose" class="modal hide contest-item-picked-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Choose This Design") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n    <%- T_("You will then be taken to the Entry Handover process to transfer ownership and receive files") %>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <div class="contest-action">\n        <button class="btn btn-primary contest-award-prize-entry" data-entry-id="<%- entryId %>"><%- T_("Choose") %></button>\n      </div>\n    </div>\n</div>\n\n\n<div id="contest-gallery-item-picked-additional" class="modal hide contest-item-picked-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Award Prize for this Entry") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n    <%= T_("Are you sure you wish to award an additional prize of <[- prize ]> to <a title=\'<[- username ]>\' href=\'/u/<[- username ]>.html\'><[- username ]></a> for entry #<[- number ]>?", {username: username, number: number, prize: prize}) %>\n      </p>\n      <div class="contest-item-picked">\n        <img alt="<%- T_("Award as winner?")%>" src="<%- thumb %>">\n      </div>\n      <p>\n    <%- T_("You will then be taken to the Entry Handover process to transfer ownership and receive files") %>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <div class="contest-action">\n        <button class="btn btn-primary contest-award-prize-entry" data-entry-id="<%- entryId %>"><%- T_("Confirm") %></button>\n      </div>\n    </div>\n</div>\n\n<div id="contest-gallery-item-picked-deposit" class="modal hide contest-item-picked-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Award Prize for this Entry") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n    <%= T_("Are you sure you want pay the remaining prize amount of <[- required_deposit ]> and award your prize to <a title=\'<[- username ]>\' href=\'/u/<[- username ]>.html\'><[- username ]></a> for entry #<[- number ]>?", {username: username, number: number, required_deposit: required_deposit}) %>\n      </p>\n      <div class="contest-item-picked">\n      <img alt="<%- T_("Award as winner?")%>" src="<%- thumb %>">\n      </div>\n      <p>\n    <%- T_("You will then be taken to the Entry Handover process to transfer ownership and receive files") %>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <div class="contest-action">\n        <button class="btn btn-primary contest-award-prize-entry" data-entry-id="<%- entryId %>"><%- T_("Confirm") %></button>\n      </div>\n    </div>\n</div>\n'}),define('text!templates/contestView/award-winner.htm',[],function(){return'<div class="modal hide confirm-award">\n    <div class="modal-header">\n        <a class="close" data-dismiss="modal">&times;</a>\n        <h3>\n            <% if (hasEntryWinner) { %>\n                <%- T_("Authorise Payment") %>\n            <% } else { %>\n                <%- T_("Award Prize for this Entry") %>\n            <% } %>\n        </h3>\n    </div>\n    <div class="modal-body">\n        <p>\n        <%= T_("Are you sure you wish to award the prize to <a title=\'<[- username ]>\' href=\'/u/<[- username ]>.html\'><[- username ]></a> for entry #<[- number ]>?", {username: username, number: number}) %>\n        </p>\n        <div class="contest-item-picked">\n            <img alt="<%- T_("Award as winner?")%>" src="<%- thumb %>">\n        </div>\n        <% if (hasEntryWinner) { %>\n            <p>\n                <strong><%- T_("Amount to be paid:") %></strong> <%= prizeFormatted %>\n            </p>\n            <div class="award-payment-options"></div>\n        <% } else { %>\n            <p>\n                <%= T_("You will then be taken to the Entry Handover process to transfer ownership and receive files") %>\n            </p>\n        <% } %>\n    </div>\n    <div class="modal-footer">\n        <button type="button" class="btn btn-primary btn-large award-confirm-btn" data-loading-text="<%- T_("Awarding...") %>"><%- T_("Award Now") %></button>\n        <button type="button" class="btn award-cancel-btn" data-dismiss="modal"><%- T_("Cancel") %></button>\n    </div>\n</div>\n'}),define('text!templates/payments/fixed-amount-payment-modal.htm',[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">&times;</a>\n    <h3><%- customizedModal.title %></h3>\n</div>\n<div class="modal-body">\n\n    <% if (customizedModal.description != \'\') { %>\n        <p class="margin-b20">\n            <%= customizedModal.description %>\n        </p>\n    <% } %>\n\n    <% if (!customizedModal.showDescriptionOnly) { %>\n        <p class="margin-b20">\n            <strong><%- T_("Amount to be paid:") %></strong> <%- templateData.currencyDetails.sign %><%- templateData.amount.toFixed(2) %> <%- templateData.currencyDetails.code %>\n            <span class=\'muted\'> <%- customizedModal.chargeDetail %> </span>\n        </p>\n        <div class="payment-sources-container">\n        </div>\n    <% } %>\n\n    <div class="alert alert-error modal-milestone-generic-error regular" style="display:none"></div>\n\n</div>\n<div class="modal-footer">\n    <% if (customizedConfirm.show) { %>\n        <button type="button" class="btn btn-primary modal-btn-confirm-payment"><%- customizedConfirm.buttonText %></button>\n    <% } %>\n    <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" class="loading-img margin-r20" style="display:none"/>\n    <% if (customizedCancel.show) { %>\n        <button type="button" class="btn modal-btn-cancel-payment"><%- customizedCancel.buttonText %></button>\n    <% } %>\n</div>\n'}),define('text!templates/payments/payments-source.htm',[],function(){return'<p class="payment-from">\n    <div class="need-deposit payment-from-option" style="display:none">\n        <%- T_("You will be directed to the deposit page to make this payment.") %>\n    </div>\n    <div class="may-need-deposit payment-from-option" style="display:none">\n        <%- T_("This will be debited from your available account balances, then if required, you will be directed to the deposit page to make this payment:") %>\n    </div>\n    <div class=\'only-balance payment-from-option\' style="display:none">\n        <%- T_("This will be debited from your available account balances:") %>\n    </div>\n    <% if (templateData.firstAvailablePaymentMethod) { %>\n        <div class="only-vpm payment-from-option" style="display:none">\n            <% if (templateData.verifiedPaymentSourceCount == 1) { %>\n                <%- T_("This will be debited from your verified payment method:") %>\n            <% } else { %>\n                <%- T_("This will be debited from your verified payment methods:") %>\n            <% } %>\n        </div>\n        <div class="mixed-balance-vpm payment-from-option" style="display:none">\n            <% if (templateData.verifiedPaymentSourceCount == 1) { %>\n                <%- T_("This will be debited from your available balances, then if required we will attempt to process this payment from your verified payment method:") %>\n            <% } else { %>\n                <%- T_("This will be debited from your available balances, then if required we will attempt to process this payment from your verified payment methods:") %>\n            <% } %>\n        </div>\n    <% } %>\n    <p class="account-balances margin-t10" style="display:none">\n        <strong><%- T_("Account Balance:") %></strong>\n        <% if (templateData.balances) { %>\n            <% for (var i = 0; i < templateData.balances.length; i++) { %>\n                <%- templateData.balances[i].currency.sign %><%- templateData.balances[i].balance.toFixed(2) %> <%- templateData.balances[i].currency.code %><%- (i == templateData.balances.length - 1) ? \'\' : \',\' %>\n            <% } %>\n        <% } %>\n    </p>\n</p>\n<% if (templateData.firstAvailablePaymentMethod) { %>\n    <div class="payment-logos-container" style="display:none">\n        <h6>\n            <%- T_("Verified payment method:") %>\n        </h6>\n        <div class="payment-method-info margin-0 inline-block pull-right">\n            <% if (templateData.verifiedPaymentSourceCount > 1) { %>\n                <a href="#" onclick="return false" class="right margin-l10 open-change-preferred-method">\n                    <%- T_("Edit preference") %>\n                </a>\n                <a href="#" onclick="return false" class="right margin-l10 close-change-preferred-method" style="display:none">\n                    <%- T_("Cancel") %>\n                </a>\n                <span class="is-preferred-separator right" <% if (templateData.preferredPaymentMethod != templateData.firstAvailablePaymentMethod) { %> style="display:none" <% } %>> | </span>\n            <% } %>\n            <span class="text-green is-preferred margin-r10 right" <% if (templateData.preferredPaymentMethod != templateData.firstAvailablePaymentMethod) { %> style="display:none" <% } %>><%- T_("Preferred") %></span>\n            <span class="showing-method-account-details gatewayPP" <% if (templateData.firstAvailablePaymentMethod != \'gatewayPP\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.ppEmail) { %>\n                    <%- templateData.paymentMethods.ppEmail %>\n                <% }%>\n            </span>\n            <span class="showing-method-account-details gatewayGC" <% if (templateData.firstAvailablePaymentMethod != \'gatewayGC\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.gcRecurring.length == 1) { %>\n                    <span class="margin-l20"><%- templateData.paymentMethods.gcRecurring[0][\'cc_number\'] %></span>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayGC margin-l20"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.gcRecurring.length}) %></span>\n                <% } %>\n            </span>\n            <span class="showing-method-account-details gatewayWP" <% if (templateData.firstAvailablePaymentMethod != \'gatewayWP\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.wpRecurring.length == 1) { %>\n                    <span class="margin-l20"><%- templateData.paymentMethods.wpRecurring[0][\'cc_number\'] %></span>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayWP margin-l20"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.wpRecurring.length}) %></span>\n                <% } %>\n            </span>\n            <span class="showing-method-account-details gatewayMB" <% if (templateData.firstAvailablePaymentMethod != \'gatewayMB\') { %> style="display:none" <% } %>>\n                <% if (templateData.paymentMethods.skrillPaymentVerified.length == 1) { %>\n                    <%- T_("Order ID ") %> <%- skrillPaymentVerified[0].onetap_invoice_id %>\n                <% } else { %>\n                    <span class="payment-source-tooltip gatewayMB"><%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.skrillPaymentVerified.length}) %></span>\n                <% } %>\n            </span>\n            <div class="clear"></div>\n            <select class="default-select change-preferred-method" style="display:none">\n                <option value="" selected="selected"><%- T_("Select your preferred payment method") %></option>\n                <% if (templateData.paymentMethods.ppEmail) { %>\n                    <option value="gatewayPP"><%- T_("Paypal:") %> (<%- templateData.paymentMethods.ppEmail %>)</option>\n                <% } %>\n                <% if (templateData.paymentMethods.gcRecurring) { %>\n                    <option value="gatewayGC"><%- T_("Credit Card:") %>\n                        <% if (templateData.paymentMethods.gcRecurring.length == 1) { %>\n                            (<%- templateData.paymentMethods.gcRecurring[0][\'cc_number\'] %>)\n                        <% } else { %>\n                            (<%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.gcRecurring.length}) %>)\n                        <% } %>\n                    </option>\n                <% } %>\n                <% if (templateData.paymentMethods.wpRecurring) { %>\n                    <option value="gatewayWP"><%- T_("Credit Card:") %>\n                    <% if (templateData.paymentMethods.wpRecurring.length == 1) { %>\n                        (<%- templateData.paymentMethods.wpRecurring[0][\'cc_number\'] %>)\n                    <% } else { %>\n                        (<%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.wpRecurring.length}) %>)\n                    <% } %>\n                    </option>\n                <% } %>\n                <% if (templateData.paymentMethods.skrillPaymentVerified) { %>\n                    <option value="gatewayMB"><%- T_("Skrill:") %>\n                    <% if (templateData.paymentMethods.skrillPaymentVerified.length == 1) { %>\n                        (<%- T_("Order ID:") %> <%- skrillPaymentVerified[0].onetap_invoice_id %>)\n                    <% } else { %>\n                        (<%= T_("<[-numberOfAccounts]> accounts available", {\'numberOfAccounts\': templateData.paymentMethods.skrillPaymentVerified.length}) %>)\n                    <% } %>\n                    </option>\n                <% } %>\n            </select>\n        </div>\n        <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" class="loading-img-change-preferred-method margin-r20" style="display:none" />\n        <div class="payment-logo-container paypal gatewayPP" <% if (templateData.firstAvailablePaymentMethod != \'gatewayPP\') { %> style="display:none" <% } %>>\n            <div class="payment-logo payment-logo-paypal inline-block" >&nbsp;</div>\n            <div class="clear"></div>\n        </div>\n        <div class="payment-logo-container cc gatewayGC gatewayWP" <% if (templateData.firstAvailablePaymentMethod != \'gatewayGC\' && templateData.firstAvailablePaymentMethod != \'gatewayWP\') { %> style="display:none" <% } %>>\n            <div class="payment-logo payment-logo-cc2 inline-block">&nbsp;</div>\n            <div class="clear"></div>\n        </div>\n        <div class="payment-logo-container skrill gatewayMB" <% if (templateData.firstAvailablePaymentMethod != \'gatewayMB\') { %> style="display:none" <% } %>>\n            <div class="payment-logo payment-logo-skrill inline-block">&nbsp;</div>\n        </div>\n        <div class="payments-source-generic-error margin-t10 alert alert-error" style="display:none"></div>\n    </div>\n<% } %>\n'});var loadModule=function(a,b){function e(b,e){if(typeof b!='object')return;c=b;if(typeof e=='undefined')return;d=e;if(!f())return;d.html('<img src="'+cdn_url('/img/ajax-loader.gif?v=62d3d0c60d4c33ef23dcefb9bc63e3a2&amp;m=2')+'" class="loading-payment-source-module margin-center block" />'),a.ajax({type:'post',data:{currency:c.currencyDetails.id},url:'/ajax/payment/getUserPaymentMethodInfo.php',dataType:'json',success:function(a){if(a.status=='success'){c.balances=a.balances,c.paymentMethods=a.paymentMethods,c.firstAvailablePaymentMethod=a.firstAvailablePaymentMethod,c.preferredPaymentMethod=a.preferredPaymentMethod;for(var b=0;b<c.balances.length;b++)if(parseFloat(c.balances[b].balance)>0){c.totalBalanceIsEmpty=!1;break}j(),k(),g(),i(),h(c.amount)}},complete:function(){d.find('.loading-payment-source-module').remove()}})}function f(){return typeof c.amount=='undefined'||isNaN(c.amount)||!c.amount||typeof c.currencyDetails=='undefined'?!1:(c.amount=parseFloat(c.amount),c.primaryBalanceForPayment=!1,c.totalBalanceIsEmpty=!0,c.verifiedPaymentSourceCount=0,!0)}function g(){d.html(_.template(b,{templateData:c}))}function h(a){d.find('.payment-from-option, .account-balances, .payment-logos-container').hide();if(isNaN(a)||!a)return;a=parseFloat(a),c.totalBalanceIsEmpty?c.firstAvailablePaymentMethod?d.find('.only-vpm, .payment-logos-container').show():d.find('.need-deposit').show():c.primaryBalanceForPayment&&a<=c.primaryBalanceForPayment.balance?d.find('.only-balance, .account-balances').show():c.firstAvailablePaymentMethod?d.find('.mixed-balance-vpm, .account-balances, .payment-logos-container').show():c.balances.length==1&&c.balances[0].currency.id==c.currencyDetails.id?d.find('.need-deposit').show():d.find('.may-need-deposit, .account-balances').show()}function i(){a(document).ready(function(){d.off('change','.change-preferred-method').on('change','.change-preferred-method',function(){var b=a(this),e=b.val();if(!e)return;var f=d.find('.payment-logo-container:visible, .showing-method-account-details:visible');a.ajax({url:'/ajax/user/setUserPreferedPayment.php',dataType:'json',type:'post',data:{method:e},beforeSend:function(){b.hide(),d.find('.payment-logo-container, .close-change-preferred-method, .showing-method-account-details').hide(),d.find('.loading-img-change-preferred-method, .open-change-preferred-method').show(),d.find('.payments-source-generic-error').html('').hide(),d.closest('.modal').find('.btn').attr('disabled',!0)},success:function(a){a.result=='success'?(d.find('.is-preferred, .is-preferred-separator, .payment-logo-container.'+e+', .showing-method-account-details.'+e).show(),c.preferredPaymentMethod=e):(d.find('.payments-source-generic-error').html(T_('Failed to save your preferred payment method. Please try again.')).show(),f.show())},error:function(){d.find('.payments-source-generic-error').html(T_('Server Error')).show(),f.show()},complete:function(){d.find('.loading-img-change-preferred-method').hide(),setTimeout(function(){d.closest('.modal').find('.btn').removeAttr('disabled')},1200)}})}),d.off('click','.open-change-preferred-method').on('click','.open-change-preferred-method',function(){a(this).hide(),d.find('.is-preferred').hide(),d.find('.change-preferred-method, .close-change-preferred-method').show()}),d.off('click','.close-change-preferred-method').on('click','.close-change-preferred-method',function(){a(this).hide(),d.find('.change-preferred-method').hide(),c.preferredPaymentMethod&&d.find('.is-preferred').show(),d.find('.open-change-preferred-method').show()}),d.find('.payment-source-tooltip.gatewayGC').popover_legacy({content:function(){var a=[];if(c.paymentMethods.gcRecurring)for(var b=0;b<c.paymentMethods.gcRecurring.length;b++)a.push(c.paymentMethods.gcRecurring[b].cc_number);return a.join('<br>')},title:'Credit cards',placement:'top',html:!0,trigger:'hover'}),d.find('.payment-source-tooltip.gatewayWP').popover_legacy({content:function(){var a=[];if(c.paymentMethods.wpRecurring)for(var b=0;b<c.paymentMethods.wpRecurring.length;b++)a.push(c.paymentMethods.wpRecurring[b].cc_number);return a.join('<br>')},title:T_('Credit cards'),placement:'top',html:!0,trigger:'hover'}),d.find('.payment-source-tooltip.gatewayMB').popover_legacy({content:function(){var a=[];if(c.paymentMethods.skrillPaymentVerified)for(var b=0;b<c.paymentMethods.skrillPaymentVerified.length;b++)a.push(c.paymentMethods.skrillPaymentVerified[b].onetap_invoice_id);return a.join('<br>')},placement:'top',html:!0,trigger:'hover'})})}function j(){for(var a=0;a<c.balances.length;)c.balances[a].balance=parseFloat(c.balances[a].balance),c.balances[a].balance==0?c.balances.splice(a,1):c.balances[a].currency.id==c.currencyDetails.id?(c.primaryBalanceForPayment=c.balances[a],c.balances.splice(a,1)):a++;c.primaryBalanceForPayment&&c.balances.unshift(c.primaryBalanceForPayment)}function k(){c.firstAvailablePaymentMethod&&(c.paymentMethods.ppEmail&&c.verifiedPaymentSourceCount++,c.paymentMethods.gcRecurring&&c.verifiedPaymentSourceCount++,c.paymentMethods.wpRecurring&&c.verifiedPaymentSourceCount++,c.paymentMethods.skrillPaymentVerified&&c.verifiedPaymentSourceCount++)}var c=!1,d=!1;return{init:e,checkPaymentSource:h}};if(typeof define=='function'&&define.amd)define('payments/module-payments-source',['jquery-wrapper','text!templates/payments/payments-source.htm'],loadModule);else var initPaymentsSourceModuleOnNonBSPage=loadModule(jq).initForm;define('contest/award-confirmation',['jquery-wrapper','underscore-wrapper','payments/module-payments-source','text!templates/contestView/award-winner.htm'],function(a,b,c,d){function f(a){if(!a)return;var b=g(a);b.modal('show')}function g(f){e=f;var g={amount:e.prize,currencyDetails:{id:e.currency.id,sign:e.currency.sign,code:e.currency.code}},i=a(b.template(d,e));return i.appendTo(a('.gaf-container')),c.init(g,a(i.find('.award-payment-options'))),a('.gaf-container').on('click','.award-confirm-btn',h),i}function h(){var b=a(this);b.button('loading'),typeof e.entryId!='undefined'&&e.confirmPickFn(e.entryId)}var e;return{showModal:f,renderModal:g}}),define('contest/contest_common',['jquery-wrapper','underscore-wrapper','contest/contest-pagination','utils/trunk8','contest/award-confirmation','text!templates/contestView/contestGallery.htm','text!templates/contestView/contestErrorModal.htm','text!templates/contestView/contestImageEntryZoom.htm','text!templates/contestView/contestVideoEntryZoom.htm','text!templates/contestView/contestSuccessModal.htm','text!templates/contestView/contestGalleryItemPicked.htm'],function(a,b,c,d,e,f,g,h,i,j,k){function H(a){G=a}function I(a){currentPageNum=a}function J(b){var c=a(b);c.removeClass('active-entry'),c.removeClass('contest-entry-highlight'),c.addClass('contest-entry-rejected'),c.find('.entry-details .contest-rating-container').hide(),c.find('.entry-status').html('<span>'+T_('Rejected')+'</span>'),c.children('.entry-hover-wrap').empty(),jb(c)}function K(b,c,d,e,f){var g={entry_id:b,action:c};a.ajax({type:'GET',url:'/contest/projectAction/eliminate.php',cache:!1,data:g,dataType:'json',success:d,error:e,complete:f})}function L(a,b,c,d){K(a,'do',b,c,d)}function M(a,b,c,d){K(a,'undo',b,c,d)}function N(b){var c=a(b);c.removeClass('contest-entry-rejected'),c.removeClass('contest-entry-withdrawn'),c.removeClass('contest-entry-winner'),c.addClass('active-entry'),c.data('is-highlighted')&&(c.addClass('contest-entry-highlight'),c.addClass('contest-entry-highlight-upgrade')),c.data('is-sealed')&&c.addClass('contest-entry-sealed-upgrade'),c.find('.entry-status').html(''),c.find('.entry-details .contest-rating-container').show(),c.find('div.ribbons').remove(),c.children('.entry-hover-wrap').empty(),c.find('.entry-details .entry_user_link').is(':hidden')&&c.find('.entry-details .entry_user_link').show(),jb(c)}function O(b){var c=a('li[data-entry-id="'+b+'"]');a(c).removeClass('active-entry'),a(c).addClass('contest-entry-winner'),a(c).append('<h5 class="corner-ribbon"><span class="corner-ribbon-content">'+T_('Winner')+'</span><h5>'),a(c).find('.report-entry').hide()}function P(b){var c=a('li[data-entry-id="'+b+'"]');a(c).removeClass('active-entry'),a(c).addClass('contest-entry-chosen'),a(c).prepend('<h5 class="corner-ribbon"><span class="corner-ribbon-content">'+T_('Chosen')+'</span><h5>'),a(c).find('.report-entry').hide()}function Q(b){var c=a(b);c.removeClass('active-entry'),c.removeClass('contest-entry-highlight'),c.removeClass('contest-entry-highlight-upgrade'),c.removeClass('contest-entry-sealed-upgrade'),c.addClass('contest-entry-withdrawn'),c.find('.entry-status a').hide(),c.find('.entry-details .contest-rating-container').hide(),c.find('.entry-status').html('<span>'+T_('Withdrawn')+'</span>'),c.children('.entry-hover-wrap').empty()}function R(){var b=a('#view-create-polls').find('span');a('#upgradeContestContainer').hide(),V(),a('#contest_view-polls').is(':hidden')?W('togglePolls'):X(b),a('#contest_view-polls').slideToggle()}function S(){a('#contest_view-polls').hide(),a('#upgradeContestContainer').hide(),a('#contest-entry-submit-form').hide(),a('#brief').is(':hidden')?a('#brief-toggle').html(T_('Hide Brief')+' <span class="icon-black icon-chevron-up"></span>'):a('#brief-toggle').html(T_('View Brief')+' <span class="icon-black icon-chevron-down"></span>'),W('toggleBrief'),a('#brief').slideToggle()}function T(){a('#entry-file-input').show();var b=a('#submit-btn').find('span');V(),a('#contest-entry-submit-form').is(':hidden')?(a('#brief').is(':hidden')||S(),W('toggleSubmit')):X(b),U(),a('#contest-entry-submit-form').slideToggle()}function U(){a('.button-text').html(uploadBtnText)}function V(){a('#brief:visible').hide(),a('#brief-toggle').html(T_('View Brief')+' <span class="icon-black icon-chevron-down"></span>')}function W(b){var c=a('#view-create-polls').find('span'),d=a('#contestViewContainer .upgrade-contest').find('span'),e=a('#submit-btn').find('span'),f=a('#join-btn').find('span');switch(b){case'toggleBrief':X(c),X(d),X(e),X(f);break;case'toggleUpgradeButton':X(c),Y(d);break;case'togglePolls':Y(c),X(d);break;case'toggleSubmit':Y(e),Y(f)}}function X(a){a.hasClass('icon-chevron-up')&&a.addClass('icon-chevron-down').removeClass('icon-chevron-up')}function Y(a){a.hasClass('icon-chevron-down')&&a.addClass('icon-chevron-up').removeClass('icon-chevron-down')}function Z(b){return v=w[b],a(v).find('.radio_option').data('rating')}function $(a){return v=w[a],5-Z(a)}function _(b){return v=w[b],a(v).data('date-entry')}function ab(b){return v=w[b],10-a(v).data('freelancer-rating')}function bb(b){return v=w[b],a(v).data('default-sort')}function cb(b){return v=w[b],a(v).data('numLikes')}function db(b){return rating=Z(b),v=w[b],rating>=4&&a(v).hasClass('active-entry')?!0:!1}function eb(b){return v=w[b],a(v).hasClass('active-entry')||a(v).hasClass('contest-entry-winner')?!0:!1}function fb(b){return v=w[b],a(v).find('.radio_option').data('rating')>0?!1:a(v).data('is-commented')=='1'?!1:eb(b)}function gb(b){return v=w[b],a(v).hasClass('contest-entry-withdrawn')?!0:!1}function hb(b){return v=w[b],a(v).hasClass('contest-entry-rejected')?!0:!1}function ib(b){w[b.id]||(b.votable=votable,w[b.id]=a(template(b)),jb(w[b.id]),x.push(parseInt(b.id)))}function jb(b){var c=b.find('.main-thumb');c.load(function(){var b=a(this);b.height()>b.width()?b.css('max-width',t):b.css('max-height',u),b.parents('.contest-entry-rejected').length==0?b.fadeTo(400,1):b.fadeTo(400,.1)}).each(function(){this.complete&&a(this).load()})}function kb(c){y=c;var d=a('.contest-entry-wrapper').children();d.detach(),c.length>0?(b.each(c,function(b){a('.contest-entry-wrapper').append(w[b])}),a('.contest-entry-wrapper li').removeClass('last'),a('.contest-entry-wrapper li:nth-child(4n+4)').addClass('last'),votable&&typeof FB!='undefined'&&FB.XFBML.parse(),a('.contest_entry_pagination').removeClass('hide')):a('.contest_entry_pagination').addClass('hide')}function lb(){A=a('#sort').val();if(!rc())pb(B,A,0),ub(0);else{switch(A){case'sort_rating':kb(b.sortBy(y,$));break;case'sort_submitted':kb(b.sortBy(y,_));break;case'sort_freelancerrating':kb(b.sortBy(y,ab));break;case'sort_entrylike':kb(b.sortBy(y,cb).reverse());break;default:kb(b.sortBy(y,bb))}Cb()}a('#contest_entry-zoom').hide()}function mb(){B=a('#filter').val();if(!rc())pb(B,A,0),ub(0);else{var c,d=currentPageNum*C;switch(B){case'filter_45star':c=b.select(x,db);break;case'filter_open':c=b.select(x,eb);break;case'filter_nofeedback':c=b.select(x,fb);break;case'filter_rejected':c=b.select(x,hb);break;case'filter_withdrawn':c=b.select(x,gb);break;default:c=x}bc(c.length),c=c.slice(d,d+C),kb(c),Cb()}nb(),a('#contest_entry-zoom').hide()}function nb(){var b={project_id:G};typeof a('#contestViewContainer').data('user-id')!='undefined'&&(b.user_id=a('#contestViewContainer').data('user-id')),a.ajax({type:'POST',url:'/contest/projectAction/getEntryFilterCounts.php',cache:!1,data:b,dataType:'json',success:function(b){a('.entry-filters li').each(function(){var c=a(this).data('value');a(this).find('span.badge').html(b[c])}),ob(parseInt(b.filter_all)===x.length)},error:function(){var a=T_('Server Error. Unable to refresh filter counts.');oc(a)},complete:function(){}})}function ob(b){var c=b?1:0;a('.contest-entry-wrapper').data('complete',c)}function pb(c,d,e){a('#contest-entries, .contest-entry-wrapper').addClass('contest-entries-fade');var f={project_id:G,filter:c,sortCol:d,start:e};typeof a('#contestViewContainer').data('user-id')!='undefined'&&(f.user_id=a('#contestViewContainer').data('user-id')),c=='filter_myEntries'&&isUserHasEntries==1&&(f.filter='filter_all',f.user_id=thisUserId),a.ajax({type:'POST',url:'/contest/projectAction/getEntries.php',cache:!1,data:f,dataType:'json',beforeSend:function(){},success:function(c){results=[],b.each(c.entries,function(a){ib(a),results.push(a.id)}),e===0&&(D=c.count,a('.contest_entry_pagination').pagination(D,{callback:tb,items_per_page:C})),kb(results),lc(),qb(c.noFeedbackEntriesCount),a('.total-entry-text').html(c.totalEntriesCount),parseInt(c.totalEntriesCount)==parseInt(x.length)&&a('.contest-entry-wrapper').data('complete',1),c.count>4&&V(),a('#contest-entries, .contest-entry-wrapper').fadeTo(100,1,function(){a(this).css({opacity:''})}).removeClass('contest-entries-fade')},error:function(){var a=T_('Server Error. Unable to requery entries.');oc(a)},complete:function(){}})}function qb(b){var c='';b>1?c=T_('Entries'):c=T_('Entry');var d=T_('You still have <span class="no-feedback-filter"> <%-num%> <%-entryText%></span> to rate. Rate now.',{num:b,entryText:c});a('#engagement .no-feedback').html(d),a('#engagement').attr('data-original-title',d)}function rb(b){var c='',d='';b>r?c=T_('Your Engagement: <span class="medium"> Medium </span>'):b>s?c=T_('Your Engagement: <span class="high"> High </span>'):c=T_('Your Engagement: <span class="low"> Low </span>'),a('#engagement h5').html(c),a('#engagement .bar').width(b+'%'),a('#engagement #ratePercentage').html('<strong>'+b+'%</strong>')}function sb(){start=0,pb(B,A,start)}function tb(a,b){return typeof a!='undefined'&&(start=a*C,typeof isUsingDS!='undefined'&&isUsingDS===!1&&ub(a),rc()?(currentPageNum=a,mb()):pb(B,A,start)),!1}function ub(a){var b=seoURL.replace('.html','');seoURL&&window.history&&typeof window.history.pushState=='function'&&window.history.pushState(null,'',b+'--'+(a+1)+'.html')}function vb(a){return a.length>30?a.substr(0,20)+'...'+a.substr(a.length-10,a.length):a}function Ab(b){if(wb&&a(b).data('entry-id')==a(wb).data('entry-id'))return xb=!0,!0;xb=!1,Bb();var c=l,d=m,e=a(b).width(),f=n,g=o,h=q;if(a(b).hasClass('contest_entry-format_video'))data={title:a(b).attr('data-title'),description:a(b).attr('data-description'),path:a(b).attr('data-path'),s3path:a(b).attr('data-s3path'),largeLogo:a(b).attr('data-logo-large-url'),videoformat:a(b).attr('data-videoformat')},a('#contest_entry-zoom').html(zoomVideoTemplate(data)),data.videoformat=='flv'&&(p=flowplayer('player',{src:flowplayerswf,wmode:'opaque'},{clip:{url:data.s3path+'video.'+data.videoformat,autoPlay:!0,autoBuffering:!0}}),p.onLoad(function(){this.getScreen().animate()}),p.load()),typeof FB!='undefined'&&FB.XFBML.parse(document.getElementById('contest_entry-zoom')),c=320,d=300;else{var i=new Image;i.src=a(b).attr('data-image-url');var j=i.src.replace(/_thumb.jpg$/i,'_thumb420.jpg');a(i).load(function(){Kb(b,i,j,c,d,e,f)}),Kb(b,i,j,c,Kb,e,f);var k=a(b).find('.thumb_url').length;k>1&&(yb=setInterval(function(){zb=zb>=k-1?0:zb+1;var g=new Image;g.src=a(b).find('.thumb_url').eq(zb).attr('data-thumb-url'),j=g.src.replace(/_thumb.jpg$/i,'_thumb420.jpg'),a(g).load(function(){a('#contest_entry-zoom img').remove(),Kb(b,g,j,c,d,e,f)})},2500))}a(b).attr('data-title')!==''&&(a(b).hasClass('contest_entry-format_video')?h=10:h=65),a('#contest_entry-zoom').height(d+h).width(c),a('#contest_entry-zoom').css('top',a(b).offset().top),a(document).width()>a(b).offset().left+g+e+c?(a('#contest_entry-zoom').css('left',a(b).offset().left+g+e),a('#contest_entry-zoom').fadeIn()):a(b).offset().left-c+g>0&&(a('#contest_entry-zoom').css('left',a(b).offset().left-c-g),a('#contest_entry-zoom').fadeIn()),a('.zoom-desc').trunk8({lines:2}),xb=!0,wb=b}function Bb(){xb||(a('#contest_entry-zoom').hide(),a('#contest_entry-zoom img').remove(),a('#contest_entry-zoom video').remove(),wb=!1,yb!==!1&&(clearInterval(yb),yb=!1,zb=0))}function Cb(){a('.contest_entry_pagination').pagination(D,{callback:tb,items_per_page:C,current_page:currentPageNum})}function Db(b,c,d){a.ajax({type:'GET',url:'/contest/projectAction/report.php',cache:!1,data:'action=do&entry_id='+b+'&reason_id='+c+'&description='+d,dataType:'json',beforeSend:function(){},success:function(b){if(b.result!='success'){var c=T_('Failed to report entry, please try again');oc(c)}else{var d=T_('Successfully reported entry violation.'),e={successMessage:d};a('#contest-response-container').html(templateSuccess(e)),a('#contest-success-modal').modal('show')}},error:function(){var a=T_('Server Error. Failed to report entry.');oc(a)},complete:function(){}}),a('#contest-entry-violation').modal('hide')}function Eb(b,c,d){var e=b;a.ajax({type:'POST',url:'/contest/projectAction/moderateMessage.php',cache:!1,data:'action=report&msg_id='+e+'&reason_id='+c+'&description='+d,dataType:'json',beforeSend:function(){},success:function(b){if(!b||b.success!==!0){var c=T_('Failed to report message. ');b.errors?a.each(b.errors,function(a,b){c+='\n'+b+'. '}):c+='\n'+T_('If this problem persists please contact support for assistance.'),oc(c)}else a('li[data-msg-id='+e+'] .view-message ul.msg-hover a.report-message').text(T_('Reported'))},error:function(){var a=T_('Server Error. Failed to report message.');oc(a)},complete:function(){}}),a('#contest-message-violation').modal('hide')}function Fb(b){var c=a('#contestViewContainer'),d=a('li[data-msg-id='+b+']'),e={project_id:c.data('contest-id'),action:'delete',msg_id:b};a.ajax({url:'/contest/projectAction/moderateMessage.php',type:'POST',data:e,dataType:'json',success:function(b){if(b)if(b.success!==!0){var c=T_('Unable to delete message. ');b.errors?a.each(b.errors,function(a,b){c+='\n'+b+'. '}):c+='\n'+T_('Please contact support for assistance.'),oc(c)}else d.hide();else{var e=T_('Server Error. Unable to delete message.');oc(e)}},error:function(){var a=T_('Server Error. Unable to delete message.');oc(a)}}),a('#contest-message-delete').modal('hide'),a('#contest-message-delete-thread').modal('hide')}function Gb(b,c,d,e){a.ajax({type:'GET',url:'/contest/projectAction/reportDesigner.php',cache:!1,data:'action=do&user_id='+b+'&project_id='+c+'&reason_id='+d+'&description='+e,dataType:'json',beforeSend:function(){},success:function(a){if(a.result!='success'){var b=T_('Failed to report entry, please try again');oc(b)}},error:function(){var a=T_('Server Error. Failed to report entry.');oc(a)},complete:function(){}}),a('#contest-report-designer').modal('hide')}function Hb(b){O(b),a.ajax({type:'GET',url:'/contest/projectAction/pick.php',cache:!1,data:'entry_id='+b,dataType:'json',beforeSend:function(){},success:function(c){if(c.result=='redirect')window.location.href=c.redirect;else if(c.result!='success'){var d=a('li[data-entry-id="'+b+'"]'),e=T_('Failed to pick entry as a winner, please try again');N(d),oc(e)}else window.location.href='handover.php?entry_id='+b},error:function(){var a=T_('Server Error. Failed to pick entry as a winner.');oc(a)},complete:function(){}}),a('#contest_popup-container').hide()}function Ib(b){P(b),a.ajax({type:'GET',url:'/contest/projectAction/choose.php',cache:!1,data:'entry_id='+b,dataType:'json',beforeSend:function(){},success:function(c){if(c.result!='success'){var d=a('li[data-entry-id="'+b+'"]'),e=T_('Failed to pick entry as chosen, please try again');N(d),oc(e)}else a('#handover_btn').fadeIn(),a('#handover_alert').fadeIn(),a('html, body').animate({scrollTop:a('#handover_alert').offset().top-50})},error:function(){var a=T_('Server Error. Failed to pick entry as chosen.');oc(a)},complete:function(){}}),a('#contest-gallery-item-choose').modal('hide'),a('#contest-entry-quickview').modal('hide')}function Jb(){window.location.href=z,a('#contest-report-designer').modal('hide')}function Kb(b,c,d,e,f,g,h){var i=0,j=0;c.width*h<e&&(i=(e-c.width*h)/2),c.height*h<f&&(j=(f-c.height*h)/2),data={width:c.width*h,height:c.height*h,left:i,top:j,smallSrc:c.src,largeTop:c.height*-1*h,bigSrc:d,title:a(b).attr('data-title'),description:a(b).attr('data-description')},a('#contest_entry-zoom').html(zoomImageTemplate(data)),a('.zoom-desc').trunk8({lines:2})}function Lb(b){var c=a('#contestViewContainer').data('contest-id');a(b).fileupload({url:'/contest/jqupload.php?project_id='+c,dropZone:a(b),buttonText:uploadBtnText,acceptFileTypes:filetypes,maxFileSize:524288e3,success:function(b){if(b.status!='success'){var c=T_('Unable to upload entry. ');a.each(b.error,function(a,b){c+='\n'+b+'. '}),oc(c)}else setTimeout(function(){a('#files-bucket [value="'+b.name+'"]').val(b.server_name)},100)},error:function(){var a=T_('Server Error. Unable to upload entry.');oc(a)}})}function Mb(){var b=!0,c=a('#addEntryForm'),d=a('#contestViewContainer').data('contest-id'),e='',f='',g=!1,h=!1,i=c.find('#original').is(':checked'),j=c.find('#proj_upload_fileset').val(),k=[],l=0,m=0,n;c.find('#entry_title').length===0?g=!0:e=c.find('#entry_title').val(),c.find('#entry_description').length===0?h=!0:f=c.find('#entry_description').val(),typeof c.find('#non_video_contest').val()!='undefined'&&(e.length===0&&f.length>0&&(g=!1),e.length>0&&f.length===0&&(h=!1),e.length===0&&f.length===0&&(g=!0,h=!0)),c.find('#entry_isSealed').is(':checked')&&(l=1),c.find('#entry_isHighlighted').is(':checked')&&(m=1),k=a('[name="project_files[]"]').val(),!g&&e===''?(a('#entry_title').closest('.control-group').hasClass('error')||(a('#entry_title').closest('.control-group').addClass('error'),a('<p class="smaller">'+T_('Provide a title for your entry.')+'</p>').appendTo(a('#entry_title').siblings('.help-inline'))),b=!1):(a('#entry_title').closest('.control-group').removeClass('error'),a('#entry_title').siblings('.help-inline').html('')),!h&&f===''?(a('#entry_description').closest('.control-group').hasClass('error')||(a('#entry_description').closest('.control-group').addClass('error'),a('<p class="smaller">'+T_('Provide a description for your entry.')+'</p>').appendTo(a('#entry_description').siblings('.help-inline'))),b=!1):(a('#entry_description').closest('.control-group').removeClass('error'),a('#entry_description').siblings('.help-inline').html('')),i?(a('#original').closest('.control-group').removeClass('error'),a('#original').siblings('.help-inline').html('')):(a('#original').closest('.control-group').hasClass('error')||(a('#original').closest('.control-group').addClass('error'),a('<p class="smaller">'+T_('You must agree to this condition in order to submit an entry')+'</p>').appendTo(a('#original').siblings('.help-inline'))),b=!1),k===null||k===''?(a('.fileUploadError').show(),a('.fileUploadError').html(T_('You must submit an entry.')),b=!1):(a('.fileUploadError').hide(),a('.fileUploadError').html(''));var o='false';return i&&(i='true'),b?(n={project_id:d,fileset:j,files:k,original:i,isSealed:l,isHighlighted:m},h||(n.title=e,n.description=f)):n=!1,n}function Nb(){var b=0;a('#entry_isSealed').is(':checked')&&(b+=parseFloat(a('#entry_isSealed').data('price'))),a('#entry_isHighlighted').is(':checked')&&(b+=parseFloat(a('#entry_isHighlighted').data('price'))),a('#total-entry-price').html(b.toFixed(2))}function Ob(){var b=a('#upgradeContestContainer .upgrade-check-box:checked').length,c=parseInt(a('#old-prize').val()),d=parseInt(a('#prize-amount').val());a('#contest_view-polls').hide(),V(),b>0||d>c||initialData.isDraft===!0?a('#upgradeContestButton').removeAttr('disabled'):a('#upgradeContestButton').attr('disabled',!0),W('toggleUpgradeButton')}function Pb(b){b.guaranteed=='on'&&a('.ribbons .guaranteed').fadeIn(),b.featured=='on'&&a('.ribbons .featured').fadeIn(),b.private=='on'&&a('.ribbons .private').fadeIn(),b.sealed=='on'&&a('.ribbons .sealed').fadeIn(),b.extended=='on'&&a('.ribbons .guaranteed').fadeIn()}function Qb(a){v=a}function Rb(a){xb=a}function Sb(a){a=a}function Tb(a,b){w[a]=b}function Ub(){return w}function Vb(a){x=a}function Wb(a){x.push(a)}function Xb(){return x}function Yb(a){y=a}function Zb(a){y.push(a)}function $b(){return y}function _b(b,c){c==1?a(b).html(T_('1 Like')):a(b).html(T_('<%-count%> Likes',{count:c})),a(b).data('numLikes',c)}function ac(a){C=a}function bc(a){D=a}function cc(b){var c=a(b).width(),d=a(b).data('numLikes');a(b).hasClass('contest_entry-liked')?a(b).html(T_('Unlike?')):a(b).hasClass('contest_entry-not-liked')&&a(b).html(T_('Like?')),a(b).width(c)}function dc(a){z=a}function ec(a){F=a}function fc(b){var c=a(b).data('numLikes');return c-=1,a(b).removeClass('contest_entry-liked').addClass('contest_entry-not-liked'),_b(b,c),c}function gc(b){var c=a(b).data('numLikes');return c+=1,a(b).removeClass('contest_entry-not-liked').addClass('contest_entry-liked'),_b(b,c),c}function hc(a,b){b=='0'?gc(a):fc(a)}function ic(b){if(logged_in===!1)window.location=login_url;else{var c={contestId:a(b).data('contestId'),entryId:a(b).data('entryId'),currentUrl:window.location.href.toString().split(window.location.hostname)[1]},d=b;a(d).hasClass('contest_entry-liked')?(c.isLiked='0',c.numLikes=fc(d)):a(d).hasClass('contest_entry-not-liked')&&(c.isLiked='1',c.numLikes=gc(d));var e=function(a){typeof a=='undefined'||a.status=='failed'?hc(d,c.isLiked):a.status=='logged-out'&&(window.location=a.url)},f=function(a){hc(d,c.isLiked)};jc(c,e,f)}}function jc(b,c,d,e){a.ajax({url:'/contest/projectAction/toggleEntryLike.php',type:'POST',data:b,dataType:'json',success:c,error:d,completeCallback:e})}function kc(){E=[]}function lc(){a('.container').find('.contest-entry').each(function(){var b=a(this).find('.radio_option'),c=b.data('entry-id'),d=b.data('rating'),e=a(this).find('.star');d||(d=0);if(E[c]===!0){isUserContest||e.rating('readOnly',!0);return}E[c]=!0,e.rating(),e.rating('select',d.toString()),(!isUserContest||showHelp)&&e.rating('readOnly',!0)})}function mc(b,c,d){var e={entry_id:b,rating:c};a.ajax({type:'GET',url:'/contest/projectAction/rate.php',cache:!1,data:e,dataType:'json',beforeSend:function(){},success:function(a){if(a.result!='success'){var b=T_('Failed to rate entry, please try again');oc(b)}else d.data('rating',c),qb(a.noFeedbackEntriesCount),rb(a.userEngagementAve)},error:function(){var a=T_('Server Error. Unable to rate entry.');oc(a)},complete:function(){}})}function nc(){var a='<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>';return a}function oc(b){var c={errorMessage:b};return a('#contest-response-container').html(templateError(c)),a('#contest-error-modal').modal('show')}function pc(a){var b=a.children('.entry-hover-wrap');return b.removeClass('button-panel1 button-panel2 button-panel3 button-panel4')}function qc(a){var b=_ttref.getFunnel(a);b&&_ttref.push(['_trackEvent',a,'View']),_ttref.push(['_clearEntrypoint',a])}function rc(){return a('.contest-entry-wrapper').data('complete')===1}function sc(a){a.confirmPickFn=Hb,e.showModal(a)}function tc(b){var c=templateChooseEntry(b);return a('#contest_popup-container').html(c),a('#contest-gallery-item-choose')}function uc(a){if(!a)return;var b=tc(a);b.modal('show')}var l=420,m=280,n=2,o=10,q=0,r=35,s=70,t=218,u=164,v,w={},x=[],y=[],z='',A='',B='filter_all',C,D,E=[],F,G;zoomImageTemplate=b.template(h),typeof isUsingDS!='undefined'&&isUsingDS===!1&&(zoomVideoTemplate=b.template(i)),template=b.template(f),templateError=b.template(g),templateSuccess=b.template(j),templateChooseEntry=b.template(k);var wb=!1,xb=!1,yb=!1,zb=0;return{loadFirstPage:sb,toggleBrief:S,hideBrief:V,togglePolls:R,toggleUpgradeButton:Ob,changeToArrowDown:X,changeToArrowUp:Y,renderRibbons:Pb,toggleSubmit:T,initFileUploader:Lb,validateEntry:Mb,displayEntryPrice:Nb,reportContestEntryViolation:Db,setEntry:Qb,showZoom:Ab,hideZoom:Bb,setZoomOn:Rb,setWithdrawn:Q,setActive:N,setRejected:J,submitEntryReject:L,submitEntryReconsider:M,setEntries:Sb,getEntries:Ub,addToEntries:Tb,setAllEntries:Vb,getAllEntries:Xb,addToAllEntries:Wb,setFilteredEntries:Yb,getFilteredEntries:$b,addToFilteredEntries:Zb,setContestId:H,setPageNum:I,setItemPage:ac,setNumEntries:bc,setRejectLink:dc,setCurrentUserId:ec,confirmPick:Hb,showAwardModal:sc,renderChooseModal:tc,showChooseModal:uc,setLikeHoverText:cc,setLikeText:_b,handleLikeClick:ic,submitEntryLike:jc,resort:lb,resetEntriesWStarsArray:kc,initRating:lc,submitEntryRating:mc,refilter:mb,initPagination:Cb,deleteMessage:Fb,reportContestMessageViolation:Eb,reportDesignerViolation:Gb,confirmReject:Jb,popoverNoTitle:nc,confirmChoose:Ib,errorMessagePopup:oc,cleanButtonPannel:pc,initTtref:qc,updateNoFeedbackEntriesText:qb,updateUserEngagementBar:rb,fixEntryThumbnail:jb,setUploadButtonText:U}});var loadFixedAmountPaymentModal=function(a,b,c){function o(){a(document).ready(function(){e.off('click','.modal-btn-confirm-payment').on('click','.modal-btn-confirm-payment',function(){return e.modal('hide'),typeof f=='function'&&f(g),_t.push(['user_action',{section:'PaymentConfirmationModal',label:'ConfirmPayment',action:'click',amount:d.amount,currency:d.currencyDetails.id}]),!1}),e.off('click','.modal-btn-cancel-payment').on('click','.modal-btn-cancel-payment',function(){return e.modal('hide'),typeof h=='function'&&h(i),_t.push(['user_action',{section:'PaymentConfirmationModal',label:'CancelPayment',action:'click',amount:d.amount,currency:d.currencyDetails.id}]),!1}),e.on('click','.modal-header .close',function(){return _t.push(['user_action',{section:'PaymentConfirmationModal',label:'CloseModal',action:'click',amount:d.amount,currency:d.currencyDetails.id}]),!1})})}function p(b,c,e,o,p,s,t,u){typeof c=='function'&&(f=c),typeof e=='object'&&(g=e),typeof o=='function'&&(h=o),typeof p=='object'&&(i=p),typeof s=='object'&&(l=s,typeof l.buttonText=='undefined'&&(l.buttonText=j.buttonText),typeof l.show=='undefined'&&(l.show=j.show)),typeof t=='object'&&(m=t,typeof m.buttonText=='undefined'&&(m.buttonText=k.buttonText),typeof m.show=='undefined'&&(m.show=k.show)),typeof u=='object'&&(n=a.extend(n,u));if(typeof b!='object')return;d=b,q()&&(d.amount>0?r():typeof f=='function'&&f(g))}function q(){return typeof d.amount=='undefined'||typeof d.currencyDetails=='undefined'||n.showDescriptionOnly&&n.description==''?!1:(d.amount=parseFloat(d.amount),isNaN(d.amount)||d.amount<0?!1:!0)}function r(){if(a('.gaf-container').length>0)var f='.gaf-container:first';else var f='.pinky-template:first';e=a('.fixed-amount-payment-modal'),e.modal('hide').remove(),e=a('<div class="fixed-amount-payment-modal modal hide"></div>').appendTo(f),typeof c=='undefined'&&(c=a('#fixed-amount-payment-modal-template').html()),e.html(_.template(c,{templateData:d,customizedConfirm:l,customizedCancel:m,customizedModal:n})),b.init(d,e.find('.payment-sources-container')),o(),e.modal({backdrop:'static',keyboard:!0})}var d={},e=!1,f=!1,g=!1,h=!1,i=!1,j={buttonText:T_('Confirm Payment'),show:!0},k={buttonText:T_('Cancel'),show:!0},l=j,m=k,n={title:T_('Authorise Payment'),description:'',chargeDetail:'',showDescriptionOnly:!1};return{initModal:p}};if(typeof define=='function'&&define.amd)define('payments/module-fixed-amount-payment-modal',['jquery-wrapper','payments/module-payments-source','text!templates/payments/fixed-amount-payment-modal.htm'],loadFixedAmountPaymentModal);else var initFixedAmountPaymentModalOnNonBSPage=loadFixedAmountPaymentModal(jq).initModal;define('text!templates/contestView/contestMessage.htm',[],function(){return'<li class="message_row" data-msg-id="<%- msg_id %>"\n    <% if (parentId != null) { %>\n        data-parent-id="<%- parentId %>"\n    <% } %>\n    data-target="message-row">\n    <div class="view-message <% if(is_holder_message) { %>contest-holder<% }%>">\n        <img src="<%- profile_logo_url %>" class="thumbnail" alt="<%- username %>">\n        <span class=" <% if(is_holder_message) { %>custom-icon contest-holder-tag<% }%>"></span>\n        <div class="message-wrapper contest-text-wrap <% if (isUsingDS) { %>wider<% } %>">\n            <% if (isLocked) { %>\n                <%- username %>\n            <% } else { %>\n                <a href="<%- user_url %>" class="username"><%- username %></a>\n            <% } %>\n            <div class="dropdown">\n                <% if (logged_in) { %>\n                    <a href="#" class="msg-close close" data-toggle="dropdown"></a>\n                <% }%>\n              <ul class="dropdown-menu msg-hover">\n                 <% if (userId == thisUserId) { %>\n                    <li>\n                        <a class=\'delete-message\' data-target=\'delete-message\' href="javascript:void(0)">\n                            <%- T_("Delete") %></a>\n                    </li>\n                <% }%>\n                <% if (userId != thisUserId) { %>\n                    <li>\n                        <a class=\'report-message\' data-target=\'report-message\' href="javascript:void(0)">\n                            <%- T_("Report as abuse") %></a>\n                    </li>\n                <% }%>\n              </ul>\n            </div>\n\n            <p><%= formattedComment %></p>\n            <time class="timestamp" datetime="">\n                <%- formattedDate %></time>\n            <% if (logged_in && !parentId) { %>\n                <a href="javascript:void(0)" class="message-reply" data-target="message-reply"><%- T_("Reply") %></a>\n            <% } %>\n        </div>\n    </div>\n    <div class="clear"></div>\n    <% if (!parentId) { %>\n        <%  var numHidden = threadSize - threadDisplaySize;\n        if (numHidden > 0) { %>\n            <div class="view-more-comment" data-parent-id="<%- msg_id %>" data-target="view-more-comments">\n                <a href="javascript:void(0)" class="small">\n                    <% if(numHidden != 1){%>\n                        <%= T_("View <[- numHidden ]> more messages", {numHidden: numHidden}) %>\n                    <% } else { %>\n                        <%= T_("View <[- numHidden ]> more message", {numHidden: numHidden}) %>\n                    <% } %>\n                </a>\n                <img src="<%= cdn_url(\'/img/ajax-loader.gif\', \'https://\') %>"\n                    class="view-more-comment-loader hide"\n                    data-target="view-more-loader"\n                    alt="<%= T_("Processing...") %>"/>\n            </div>\n        <%  } %>\n        <div class=\'child-thread-container\'>\n            <ol class="child-thread unstyled contest-replies" data-target="child-thread"></ol>\n            <% if (logged_in) { %>\n                <div class="pcb-new-message add-message\n                    <% if (threadSize < 1) { %>\n                        hide\n                    <% } %>"\n                    id="add-message-<%- msg_id %>">\n                    <div class="left">\n                        <img class="thumbnail" src="<%- thisUserImg %>">\n                    </div>\n                    <form class="pcb-form">\n                        <textarea rows="3" class="new-comment <% if (isUsingDS) { %>wider<% } %>" placeholder="<%= T_("Write a reply...") %>"></textarea>\n                        <div class="pcb-hashtag-container"></div>\n                        <input type="hidden" name="project_id" value="<%- projectId %>"/>\n\n                        <% if (!is_private_message) { %>\n                            <input type="hidden" name="msg_type" value="public"/>\n                        <% } else { %>\n                            <input type="hidden" name="msg_type" value="private"/>\n                            <input type="hidden" name="to_user_id"\n                                value="<%- userId %>"\n                            />\n                        <% } %>\n\n                        <input type="hidden" name="parent_id" value="<%- msg_id %>"/>\n\n                        <span class="pcb-loader hide">\n                            <img src="<%= cdn_url(\'/img/throbber_horizontal.gif\', \'https://\') %>"/>\n                        </span>\n                    </form>\n                    <div class="clear"></div>\n                </div>\n            <% } %>\n        </div>\n    <% } %>\n</li>\n'}),define('text!templates/contestView/contestMessageModal.htm',[],function(){return'<div id="contest-message-violation" class="modal hide contest-message-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Report Message Violation") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to report this message?")%>\n        </strong>\n      </p>\n      <p>\n        <%- T_("Please select which reason:") %>\n      </p>\n      <select id="message-violation-reason">\n          <option value="1"><%- T_("Spam") %></option>\n          <option value="2"><%- T_("Contains contact details") %></option>\n          <option value="3"><%- T_("Inappropriate or abusive language") %></option>\n      </select>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-loading hide" >\n        <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n      </div>\n      <div class="error-msg"></div>\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <button class="btn btn-primary contest-report-message-violation"\n        data-target="message-report"\n        data-msg-id="<%- msgId %>"\n        data-hash="<%- hash %>"\n      >\n        <%- T_("Report") %>\n      </button>\n    </div>\n</div>\n\n<div id="contest-message-delete" class="modal hide contest-message-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Delete Message") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to delete this message?")%>\n        </strong>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-loading hide" >\n        <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n      </div>\n      <div class="error-msg"></div>\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <button class="btn btn-primary confirm-message-delete"\n        data-target="confirm-delete"\n        data-msg-id="<%- msgId %>"\n        data-hash="<%- hash %>"\n      >\n        <%- T_("Delete") %>\n      </button>\n    </div>\n</div>\n\n<div id="contest-message-delete-thread" class="modal hide contest-message-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n      <h3><%- T_("Delete Message Thread") %></h3>\n    </div>\n    <div class="modal-body">\n      <p>\n        <strong>\n          <%- T_("Are you sure you want to delete this message as well as all replies to this message?")%>\n        </strong>\n      </p>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-loading hide" >\n        <img src="<%= cdn_url(\'/img/dashboard-pending.gif\') %>">\n      </div>\n      <div class="error-msg"></div>\n      <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("Cancel") %></button>\n      <button class="btn btn-primary confirm-message-thread-delete"\n        data-target="confirm-delete"\n        data-msg-id="<%- msgId %>"\n        data-hash="<%- hash %>"\n      >\n        <%- T_("Delete") %>\n      </button>\n    </div>\n</div>\n'}),define('text!templates/contestView/hashtag-triggers.htm',[],function(){return'<%= T_("<strong>New!</strong> Request contest holders to increase prize and upgrade contest by posting <[= tags ]>.", {\'tags\': tags}) %>\n'}),define('contest/message-hashtags',['jquery-wrapper','underscore-wrapper','text!templates/contestView/hashtag-triggers.htm'],function(a,b,c){var d={enabled:!0,callbacks:{},container:a('<div>'),hashtags:{extended:{type:'upgrade',value:'extend',label:'Extended'},guaranteed:{type:'upgrade',value:'guaranteed',label:'Guaranteed'},sealed:{type:'upgrade',value:'sealed',label:'Sealed'},increaseprize:{type:'prize',label:'IncreasePrize'}},disabledTags:{},options:{triggersEnabled:!0,tagsEnabled:!0,hashtagCountLimit:1}};return d.init=function(b){a.extend(d.options,b||{}),typeof b.enabled!='undefined'&&(d.enabled=b.enabled);if(!d.enabled)return;if(typeof b.disabledTags!='undefined'&&!a.isEmptyObject(b.disabledTags))for(var c in b.disabledTags)d.disableTag(c)},d.transformTags=function(a,c){if(!d.enabled)return a;var e=/#([a-z]+)/g,f={};return a.replace(e,function(a,e){if(e in d.hashtags){if(!d.options.tagsEnabled||e in d.disabledTags)return'<strong>'+a+'</strong>';typeof f[e]=='undefined'&&(f[e]=0);if(f[e]<d.options.hashtagCountLimit)return f[e]++,typeof c=='function'&&c(d.hashtags[e]),b.template('<a href="#" class="pcb-hashtag" data-tag="<%- tag %>" data-tag-type="<%- type %>" <% if (value !== null) { %>data-value="<%- value %>"<% } %>>#<%- tag %></a>',{type:d.hashtags[e].type,tag:e,value:'value'in d.hashtags[e]?d.hashtags[e].value:null})}return a})},d.addTriggers=function(a){if(!d.enabled||!d.options.triggersEnabled)return;var e=[];b.each(d.hashtags,function(a,c){c in d.disabledTags||e.push(b.template('<a href="#" class="pcb-hashtag-trigger" data-tag="<%- tagName %>">#<%- tagName %></a>',{tagName:c}))}),e.length&&(a.html(b.template(c,{tags:e.join(', ')})),d.attachTriggerEventHandlers(a))},d.attachTagEventHandlers=function(b){b.on('click','.pcb-hashtag',function(b){b.preventDefault();var c=a(b.target),e=c.data('tag'),f=d.getTag(e);f!==null&&(f.el=c,d.trigger('hashtagClicked',f))})},d.attachTriggerEventHandlers=function(b){b.on('click','.pcb-hashtag-trigger',function(b){b.preventDefault();var c=a(b.target),e=c.data('tag'),f=d.getTag(e);f!==null&&(f.el=c,d.trigger('triggerClicked',f))})},d.disableTag=function(a){a in d.hashtags&&(d.disabledTags[a]=!0)},d.getTag=function(a){return a in d.hashtags?{tag:a,type:d.hashtags[a].type,value:'value'in d.hashtags[a]?d.hashtags[a].value:null}:null},d.on=function(a,b){typeof d.callbacks[a]=='undefined'&&(d.callbacks[a]=[]),d.callbacks[a].push(b)},d.trigger=function(a,b){if(typeof d.callbacks[a]!='undefined'&&d.callbacks[a].length)for(var c=d.callbacks[a].length-1;c>=0;c--)d.callbacks[a][c](b)},{init:d.init,transformTags:d.transformTags,addTriggers:d.addTriggers,disableTag:d.disableTag,attachTagEventHandlers:d.attachTagEventHandlers,attachTriggerEventHandlers:d.attachTriggerEventHandlers,on:d.on,bind:d.on}}),define('contest/contestPCB',['jquery-wrapper','underscore-wrapper','contest/contest_common','contest/message-hashtags','text!templates/contestView/contestMessage.htm','text!templates/contestView/contestMessageModal.htm'],function(a,b,c,d,e,f){function j(b,e){a.extend(i.options,b),i.contest=e||{},i.options.hashtagsEnabled&&(typeof i.contest.id=='undefined'||e.id%7!=1)&&(i.options.hashtagsEnabled=!1),d.init({enabled:i.options.hashtagsEnabled,triggersEnabled:!isUserContest,tagsEnabled:logged_in});if(i.options.hashtagsEnabled){if(typeof i.contest.upgrades!='undefined')for(var f in i.contest.upgrades)i.contest.upgrades[f]&&d.disableTag(f);typeof i.contest.prizeInUSD!='undefined'&&i.contest.prizeInUSD>=i.options.hashtagPrizeMin&&d.disableTag('increaseprize')}l(),a('.pcbPopover').popover_legacy({placement:'right'}),a('#contest_messages .contest-entry-comment a').hoverIntent({over:function(){var b=a(this).closest('.contest-entry-comment');!b.hasClass('contest-entry-withdrawn')&&!b.hasClass('contest_unhoverable')&&(a(this).stop(),c.showZoom(b))},out:function(){c.setZoomOn(!1),setTimeout(function(){c.hideZoom()},hoverTimeout)}}),a('#contest_messages').on('keydown','.new-comment',function(a){a.keyCode==13&&(a.shiftKey||s(a.target))}),a('#contest_messages').on('click','ul.msg-hover a.delete-message',function(){var b=a(this).parent().parents('li[data-msg-id]').eq(0),c=b.data('msg-id'),d={msgId:c,hash:''};a('#contest_popup-container').html(templateMsgViolation(d)),b.find('ol.contest-replies li[data-parent-id]').size()>0?a('#contest-message-delete-thread').modal('show'):a('#contest-message-delete').modal('show')}),a('#contest_messages').on('click','ul.msg-hover a.report-message',function(){var b=a(this).parent().parents('li[data-msg-id]').eq(0);msg_id=b.data('msg-id');var c={msgId:msg_id,hash:''};a('#contest_popup-container').html(templateMsgViolation(c)),a('#contest-message-violation').modal('show')}),a('.messages-container').on('click','.message-reply',function(b){var c=a(b.target),d=c.parents('.message_row'),e=d.find('.pcb-new-message');e.fadeIn('fast'),e.find('.new-comment').focus()}),a('.messages-container').on('click','li div.view-more-comment',function(){function f(c){if(c&&c.messages){var e=a('.messages-container');a.each(c.messages,function(b,c){var f=a('li[data-msg-id='+c.msg_id+']');if(f.length===0){var g=e.find('li[data-msg-id='+c.parentId+'] ol.contest-replies'),h=a(templateMessage(v(c)));g.prepend(h),d.addTriggers(g.find('.pcb-hashtag-container')),d.attachTagEventHandlers(h),h.fadeIn('slow')}}),b.hide()}}var b=a(this),c=a('#contestViewContainer');b.find('.view-more-comment-loader').show(),b.find('a').hide(),b.css('cursor','auto');var e={project_id:c.data('contest-id'),parent_id:b.data('parent-id')};typeof c.data('entry-id')!='undefined'&&(e.entry_id=c.data('entry-id')),typeof c.data('user-id')!='undefined'&&(e.user_id=c.data('user-id')),k(e,f)}),a('#messages_show_more').click(function(){a(this).hide(),l()}),a('a[href=\'#add-message\']').click(function(){var b=a('#add_message_location');return a('html, body').animate({scrollTop:b.offset().top-100},'fast'),b.find('textarea').focus(),!1}),a('#contest_popup-container').on('click','.contest-report-message-violation',function(){var b=a(this).parents('#contest-message-violation').find('#message-violation-reason').val(),d=a(this).parents('#contest-message-violation').find('#message-violation-reason option:selected').text();c.reportContestMessageViolation(a(this).data('msg-id'),b,d)}),a('#contest_popup-container').on('click','.confirm-message-delete, .confirm-message-thread-delete',function(){c.deleteMessage(a(this).data('msg-id'))}),d.addTriggers(a('.pcb-hashtag-container')),d.on('triggerClicked',function(a){var b=a.el.closest('.pcb-form').find('textarea.new-comment');b.length&&b.val(b.val()+' #'+a.tag)}),d.on('hashtagClicked',function(a){x('hashtagClicked',{type:a.type,value:a.value||null})})}function k(b,d){a.ajax({type:'GET',url:'/contest/projectAction/getMessages.php',cache:!1,data:b,dataType:'json',success:d,error:function(a){if(a.readyState==4){var b=T_('Server Error. Unable to get messages.');c.errorMessagePopup(b)}}})}function l(){function l(b,c){h+=b.num_messages,b.total_messages==0?c.after('<p id="no_msgs">'+T_('No messages yet.')+'</p>'):a('#go-to-add-message').show(),b.total_messages>h?a('#messages_show_more:hidden').show():a('#messages_show_more:visible').hide()}function n(b){if(!b.errors)a('#messages_loading').hide(),m(b,defaults,target,templateMessage,v,l),d.addTriggers(target.find('.pcb-hashtag-container')),d.attachTagEventHandlers(target);else{var e=T_('Unable to get message. ');a.each(b.errors,function(a,b){e+='\n'+b+'. '}),c.errorMessagePopup(e)}}var b=a('#contestViewContainer'),e=b.data('user-id'),f=b.data('owner-id'),g=[e,f];if(e&&g.indexOf(thisUserId)===-1)return;a('#messages_loading').show(),a('#no_msgs').remove();var i=b.data('entry-id'),j={project_id:b.data('contest-id'),start:h,pageFrom:'bootstap_page'};typeof i!='undefined'?j.entry_id=i:typeof e!='undefined'&&(j.user_id=e),defaults={thisUserImg:thisUserImg,thisUserId:thisUserId},target=a('.messages-container'),k(j,n)}function m(c,d,e,f,g,h){c.errors||(c&&c.messages&&b.each(c.messages,function(c){var h=a.extend({},d,c);typeof g=='function'&&(h=g(h));var i=a(f(h));e.append(i),i.fadeIn('slow'),b.each(c.threadMsgs,function(b){typeof g=='function'&&(b=g(b));var d=a(f(b));e.find('li[data-msg-id='+c.msg_id+'] ol.contest-replies').append(d),d.fadeIn('slow')})}),h&&h(c,e))}function n(){a('[data-target=\'messages-container\']').html(''),a('#no_msgs').remove(),a('#go-to-add-message').hide()}function o(){a('#no_msgs').hide()}function p(a){a.find('.pcb_error').remove()}function q(a){a.find('.pcb-loader').show()}function r(a){a.find('.pcb-loader').hide()}function s(b){var e=a(b),f=e.parents('.pcb-form'),g=a('#contestViewContainer');e.prop('disabled',!0),p(f),q(f);var h=f.find('input[name=msg_type]').val(),i=f.find('input[name=project_id]').val(),j=f.find('.new-comment').val(),k=f.find('input[name=parent_id]').val(),l=g.data('user-id'),m=g.data('entry-id'),n=g.data('entry-user-id'),s=g.data('entry-number'),u={privacy:h,project_id:i,comment:j};k&&(u.parent_id=k),l?u.user_id=l:h=='private'&&(u.user_id=currentUserId),m?(u.to_user_id=n,u.entry_id=entryID,u.entry_number=s):u.pageFrom='bootstap_page';var w=function(b){if(b.success===!0){f.find('.new-comment').val('');var c=a(templateMessage(v(b.message,function(a){x('hashtagPosted',a)})));k?c.hide().appendTo(a('.messages-container li[data-msg-id='+k+'] ol.contest-replies')):c.hide().prependTo(a('ol.messages-container')),d.attachTagEventHandlers(c),d.addTriggers(c.find('.pcb-hashtag-container')),o(),c.fadeIn('fast'),a('#go-to-add-message').show()}else{var e='';typeof b.errors!='undefined'&&a.each(b.errors,function(a,b){e+='Invalid '+a+': '+b+'<br/>'}),e===''&&(e=T_('Unable to Submit your message at this time. If this issue persists please contact our support.')),f.find('.new-comment').after('<div class="pcb_error alert alert-error">'+e+'</div>')}},y=function(){var a=T_('Server Error. Unable to Submit your message at this time.');c.errorMessagePopup(a)},z=function(){e.prop('disabled',!1),r(f)};t(u,w,y,z)}function t(b,c,d,e){a.ajax({url:'/contest/projectAction/postMessage.php',type:'POST',data:b,dataType:'json',success:c,error:d,complete:e})}function u(){h=0}var g={},h=0;templateMessage=b.template(e),templateMsgViolation=b.template(f);var i={options:{hashtagsEnabled:!0,hashtagPrizeMin:200},contest:{}},v=function(a,b){return a&&typeof a.is_holder_message!='undefined'&&!a.is_holder_message&&(a.formattedComment=d.transformTags(a.formattedComment,b)),a},w=function(a,b){typeof g[a]=='undefined'&&(g[a]=[]),g[a].push(b)},x=function(a,b){if(typeof g[a]!='undefined'&&g[a].length)for(var c=g[a].length-1;c>=0;c--)g[a][c](b)};return{init:j,resetMessageStart:u,postMessage:s,submitMessage:t,removeMessages:n,addToMessages:m,getMessages:l,getMessagesCustom:k,hideErrors:p,hideLoading:r,showLoading:q,on:w,bind:w}}),define('text!templates/contestView/contestJoinStatus.htm',[],function(){return'<div id="join-contest-modal" class="modal hide in" aria-hidden="true">\n  <div class="modal-header">\n    <h3>\n      <% if (joins.length == 1) { %>\n        <%- T_("<[- number ]> user plans to submit an entry!", {number: joins.length}) %>\n      <% } else { %>\n        <%- T_("<[- number ]> users plan to submit entries!", {number: joins.length}) %>\n      <% } %>\n    </h3>\n  </div>\n  <div class="modal-body">\n      <% if (joins.length == 1) { %>\n        <%- T_("This user is participating and may enter before your contest ends:") %>\n      <% } else { %>\n        <%- T_("These users are participating and may enter before your contest ends:") %>\n      <% } %>\n      <% for (var i=0; i < joins.length; i++) { %>\n        <div class=\'join-status-freelancer\'>\n          <a href="/u/<%- joins[i].username %>.html" ><%- joins[i].username %></a>\n        </div>\n      <% } %>\n  </div>\n  <div class="modal-footer">\n    <button class="btn" data-dismiss="modal" aria-hidden="true"><%- T_("OK") %></button>\n  </div>\n</div>\n'}),define('contest/joinContest',['jquery-wrapper','underscore-wrapper','bootstrap-popover','contest/contest_common','text!templates/contestView/contestJoinStatus.htm'],function(a,b,c,d,e){function f(){submitDrop.on('click',function(a){d.toggleSubmit()}),joinDrop.on('click',function(a){h()}),a('.participate-hover').popover_legacy({template:d.popoverNoTitle(),placement:'right',trigger:'hover',html:!0}),submitJoinButton.on('click',function(a){j()}),a('input[name=join-contest]').on('click',function(b){var c=a('input[name=join-contest]:radio:checked').val();c=='submit'?(submitJoinButton.hide(),d.setUploadButtonText(),entryForm.show()):g()}),statusButtons.on('click',function(a){statusAjax||k(a)}),window.location.hash=='#toggle-join-info'&&k()}function g(){a('input[name=join-contest][value=join]').prop('checked',!0),entryForm.hide(),submitJoinButton.show()}function h(){var b=joinDrop.find('span');d.hideBrief(),fullForm.is(':hidden')?(a('#brief').is(':hidden')||toggleBrief(),g(),joinForm.show(),entryForm.hide(),d.changeToArrowUp(b)):d.changeToArrowDown(b),fullForm.slideToggle()}function i(){joinForm.hide(),submitDrop.show(),joinDrop.hide(),entryForm.show(),entryForm.find('h2').show()}function j(){a('#join-contest-error').html(''),submitJoinButton.prop('disabled',!0);var b=a('input[name=join-contest]:radio:checked').val();if(b=='submit')joinForm.slideUp(),entryForm.slideDown();else{var c={project_id:container.data('contest-id')};a.ajax({type:'GET',url:'/contest/projectAction/joinContest.php',cache:!1,data:c,dataType:'json',success:function(b){b.status&&b.status=='success'?(fullForm.slideToggle(),i()):(a('#join-contest-error').html(b.error),submitJoinButton.prop('disabled',!1))},error:function(b){a('#join-contest-error').html(T_('Unable to join contest.')),submitJoinButton.prop('disabled',!1)}})}}function k(b){var c=a('.contest-join-status');statusAjax=!0;var d={project_id:container.data('contest-id')};a.ajax({type:'GET',url:'/contest/projectAction/getContestJoins.php',cache:!1,data:d,dataType:'json',success:function(b){if(b.status&&b.status=='success'){var c=a('#contest_popup-container');c.html(templateJoinStatus(b.data));var d=a('#join-contest-modal');d.modal('show'),d.on('show',function(){a('body').addClass('modal-open')}).on('hidden',function(){a('body').removeClass('modal-open')})}else a('#join-contest-error').html(b.error)},error:function(b){a('#join-contest-error').html(T_('Unable to get join status.'))},complete:function(a){statusAjax=!1}})}return templateJoinStatus=b.template(e),container=a('#contestViewContainer'),joinDrop=a('#join-btn'),submitDrop=a('#submit-btn'),submitJoinButton=a('#join-submit'),fullForm=a('#contest-entry-submit-form'),entryForm=a('#addEntryForm'),joinForm=a('#join-contest-form'),statusButtons=a('.contest-join-status'),statusAjax=!1,{init:f,hideJoinButton:i}}),define('text!templates/contestView/entry-quick-view.htm',[],function(){return'<!-- quickview modal begins-->\n<div class="quickview-details-wrapper">\n    <a class="close" data-dismiss="modal">&times;</a>\n    <div class="quickview-details"\n        data-entry-id=<%- entry.id %>\n        data-project-id=<%- contest.id %>\n        data-user-id=<%- this_user.id %>\n        data-to-user-id=<%- entry.userId %>\n        data-entry-number=<%- entry.number %>\n        >\n        <div class="entry-user-info">\n            <div class="user-image">\n                <img src="<%- entry.user.img.profile_logo_url %>">\n            </div>\n            <div class="user-info">\n                <p class="username"><a href="<%- entry.user.seoUrl %>"><%- entry.username %></a></p>\n                <p><a href="<%- meta.url %>"><%- T_("Entry #<[- number ]>", {number: entry.number}) %></a></p>\n            </div>\n        </div>\n        <p>\n            <strong><%- entry.title %></strong><br>\n            <%- entry.shortDesc %><span class="long-desc pcb-text hide"><%- entry.longDesc %></span>\n            <% if (entry.longDesc != \'\') { %>\n                <span class="show-hide-desc">\n                    <span class="view-more-desc">... <a href="javascript:void(0);" class="more-desc"><%- T_("See More") %></a></span>\n                    <a href="javascript:void(0);" class="less-desc hide"><%- T_("Less") %></a>\n                </span>\n            <% } %>\n        </p>\n        <a class="btn-like btn-quickview\n            <% if (currentUserIsFan) { %>\n                contest_entry-liked\n            <% } else { %>\n                contest_entry-not-liked\n            <% } %>"\n            data-entry-id="<%- entry.id %>"\n            data-contest-id="<%- contest.id %>"\n            data-num-likes="<%- entry.numLikes %>"\n            data-target="entry-like" >\n            <% if (entry.numLikes != 1) { %>\n                <%- T_("<[- number ]> Likes", {number: entry.numLikes}) %>\n            <% } else { %>\n                <%- T_("<[- number ]> Like", {number: entry.numLikes}) %>\n            <% } %>\n        </a>\n        <a class="btn-share btn-quickview hide" id="share-toggle">\n            <%- T_("Share") %>\n        </a>\n        <div class="share-menu hide" id="share-menu">\n            <span class="arrow"></span>\n            <a class="addthis_button_facebook social-media-item"\n                addthis:url="<%= absBaseUrl %><%= meta.url %>"\n                addthis:title="<%= fb_meta_title %>"\n                addthis:description="<%= meta.description %>"></a>\n            <a class="addthis_button_twitter social-media-item"\n                addthis:url="<%= absBaseUrl %><%= meta.url %>"></a>\n            <a class="addthis_button_gmail social-media-item"\n                g:plusone:size="small"\n                addthis:url="<%= absBaseUrl %><%= meta.url %>"></a>\n            <a class="addthis_button_reddit social-media-item"\n                addthis:url="<%= absBaseUrl %><%= meta.url %>"></a>\n            <a class="addthis_button_pinterest_share social-media-item"\n                addthis:url="<%= absBaseUrl %><%= meta.url %>"></a>\n            <a class="addthis_button_compact social-media-item"\n                addthis:url="<%= absBaseUrl %><%= meta.url %>"\n                ></a>\n            <a class="addthis_counter addthis_bubble_style social-media-item"\n                addthis:url="<%= absBaseUrl %><%= meta.url %>"\n                ></a>\n        </div>\n    </div>\n    <div class="quickview-pcb">\n    </div>\n</div>\n\n<div class="quickview-theatre-wrapper">\n    <div class="quickview-entry-number">\n        <%- T_("#<[- number ]> of <[- total ]>", {number: entry.number, total: entry_count}) %>\n    </div>\n    <a target="_blank" href="<%- meta.url %>" class="btn-quickview btn-full-view">\n        <%- T_("Full View") %>\n    </a>\n\n    <button class="btn-entry-nav btn-next" title="<%- T_("Next Entry") %>"></button>\n    <button class="btn-entry-nav btn-prev" title="<%- T_("Prev Entry") %>"></button>\n\n    <div class="quickview-display hide" data-next="" data-prev="">\n        <% if (contest.is_video) { %>\n            <div class="video-container">\n                <video id="player" class="video-js vjs-default-skin"\n                    controls data-setup=\'{"controls": true}\' width="560" height="315"\n                    poster="<%- entry.thumb420 %>">\n                    <source src="<%- entry.path %>video.mp4" type=\'video/mp4\'>\n                    <source src="<%- entry.path %>video.webm" type=\'video/webm\'>\n                </video>\n            </div>\n        <% } else { %>\n            <img src="<%- entry.thumb900 %>" alt="<% entry.title %>" />\n        <% } %>\n    </div>\n\n    <div class="quickview-action-bar">\n        <div class="quickview-thumbnails\n            <% if (contest.is_video) { %>\n                hide\n            <% } %>">\n            <% if (entry.files) { %>\n                <% if (entry.files.length > max_thumb_length) { %>\n                    <a class="btn-quickview btn-prev-thumbnails btn-thumbnail-nav" title="<%- T_("Previous Thumbnails") %>" >\n                    </a>\n                <% } %>\n                <div class="thumbnails-container">\n                    <ul class="multiple-thumbnails">\n                        <% _.each(entry.files, function(file) { %>\n                            <li data-src="<%- file.thumb900 %>"\n                                class="<% if (file.thumb900 == entry.thumb900) { %>\n                                    is-selected\n                                <% } %>">\n                                <img src="<%- file.thumb900 %>"\n                                    alt="<%- T_("Entry Number <[- number ]>", {number: entry.number}) %>" />\n                            </li>\n                        <% }); %>\n                    </ul>\n                </div>\n                <% if (entry.files.length > max_thumb_length) { %>\n                    <a class="btn-quickview btn-next-thumbnails btn-thumbnail-nav" title="<%- T_("Next Thumbnails") %>" >\n                    </a>\n                <% } %>\n            <% } %>\n        </div>\n        <% if (contest.is_users_contest) { %>\n            <div class="quickview-big-action quickview-award\n                <% if (entry.is_eliminated || entry.is_winner || entry.is_chosen) { %>\n                    hide\n                <% } %>">\n                <a class="btn btn-success quickview-award-entry" >\n                    <% if (contest.isDesignStudio) { %>\n                        <strong><%- T_("Choose Entry") %></strong>\n                    <% } else { %>\n                        <strong><%- T_("Award Prize") %></strong>\n                    <% } %>\n                </a>\n            </div>\n            <div class="quickview-big-action quickview-reconsider\n                <% if (!entry.is_eliminated) { %>\n                    hide\n                <% } %>">\n                <strong>\n                    <a class="btn btn-success quickview-reconsider-entry" >\n                        <%- T_("Reconsider") %>\n                    </a>\n                </strong>\n            </div>\n        <% } else { %>\n            <% if (!contest.isDesignStudio && !isUserHasEntries) { %>\n                <div class="quickview-big-action quickview-repost">\n                    <strong>\n                        <a class="btn btn-success quickview-repost-contest" >\n                            <%- T_("Get Entries Like This!") %>\n                        </a>\n                    </strong>\n                </div>\n            <% } %>\n        <% } %>\n        <div class="quickview-winner-text\n            <% if (!(entry.is_winner || entry.is_chosen)) { %>\n                hide\n            <% } %>">\n            <strong>\n                <% if (contest.isDesignStudio) { %>\n                    <%- T_("Chosen") %>\n                <% } else { %>\n                    <%- T_("Winner") %>\n                <% } %>\n            </strong>\n        </div>\n        <div class="quickview-ratings\n            <% if (entry.is_eliminated) { %>\n                hide\n            <% } %>">\n            <div class=\'radio-option\' data-target="radio_option"\n                id="<%- entry.id %>"\n                data-entry-id="<%- entry.id %>"\n                data-rating="<%- entry.rating %>"\n            >\n                <input type="radio" name="entry_rating" value="1" title = "<%- T_("Rate 1 stars") %>" class="star"  />\n                <input type="radio" name="entry_rating" value="2" title = "<%- T_("Rate 2 stars") %>" class="star" />\n                <input type="radio" name="entry_rating" value="3" title = "<%- T_("Rate 3 stars") %>" class="star" />\n                <input type="radio" name="entry_rating" value="4" title = "<%- T_("Rate 4 stars") %>" class="star" />\n                <input type="radio" name="entry_rating" value="5" title = "<%- T_("Rate 5 stars") %>" class="star"  />\n            </div>\n        </div>\n        <div class="quickview-actions">\n            <ul>\n                <% if (logged_in) { %>\n                    <% if (contest.is_users_contest && !entry.is_winner && !entry.is_chosen) { %>\n                        <li class="quickview-action\n                            <% if (entry.is_eliminated) { %>\n                                hide\n                            <% } %>">\n                            <strong>\n                                <a class="quickview-reject-entry">\n                                    <%- T_("Reject") %>\n                                </a>\n                            </strong>\n                        </li>\n                    <% } %>\n                    <li class="quickview-status status-eliminated\n                        <% if (!entry.is_eliminated) { %>\n                            hide\n                        <% } %>">\n                        <strong>\n                            <%- T_("Rejected") %>\n                        </strong>\n                    </li>\n                    <% if (entry.userId != this_user.id) { %>\n                        <li class="quickview-action\n                            <% if (entry.is_eliminated) { %>\n                                hide\n                            <% } %>">\n                            <strong>\n                                <a class="quickview-report-entry">\n                                    <%- T_("Report") %>\n                                </a>\n                            </strong>\n                        </li>\n                    <% } %>\n                <% } %>\n            </ul>\n        </div>\n    </div>\n</div>\n<!-- quickview modal ends-->\n'}),define('text!templates/contestView/entry-quick-view-pcb.htm',[],function(){return'<div class="quickview-comments-container">\n    <strong><%= T_("Comments") %></strong>\n    <ol class="quickview-comment-thread">\n    </ol>\n</div>\n<% if (logged_in) { %>\n    <div id="quickview-main-post-comment" class="quickview-post-comment hide">\n        <div class="profile-pic">\n            <img src="<%- this_user.profile_logo_url %>" alt="<%- this_user.username %>" />\n        </div>\n        <form class="pcb-form">\n            <textarea placeholder="<%= T_("Write a comment...") %>"\n                data-msg-type=\'public\'\n                class="new-comment" rows="1"></textarea>\n            <span class="pcb-loader hide">\n                <img src="<%= cdn_url(\'/img/throbber_horizontal.gif\', \'https://\') %>"\n                    alt="<%= T_("Loading...") %>"/>\n            </span>\n        </form>\n    </div>\n<% } %>\n'}),define('text!templates/contestView/entry-quick-view-pcb-comment.htm',[],function(){return'<li class="message_row" data-msg-id="<%- msg_id %>"\n    <% if (parentId != null) { %>\n        data-parent-id="<%- parentId %>"\n    <% } %>\n    >\n    <div class="profile-pic">\n        <img src="<%- profile_logo_url %>" alt="<%- username %>" />\n    </div>\n    <div class="quickview-comment">\n        <div>\n            <strong><a href="<%- user_url %>"><%- username %></a></strong>\n            <span class="pcb-text"><%= formattedComment %></span>\n        </div>\n        <time class="timestamp" datetime="<%- timestamp %>"><%- formattedDate %></time>\n        <% if (logged_in && !parentId) { %>\n            <a href="javascript:void(0)" class="message-reply" data-target="message-reply"><%- T_("Reply") %></a>\n        <% } %>\n    </div>\n    <div class="clear"></div>\n    <% if (!parentId) { %>\n        <% var numHidden = threadSize - threadDisplaySize;\n        if (numHidden > 0) { %>\n            <div class="view-more-comment" data-parent-id="<%- msg_id %>" data-target="view-more-comments">\n                <a href="javascript:void(0)">\n                    <% if(numHidden != 1){%>\n                        <%= T_("View <[- numHidden ]> more messages", {numHidden: numHidden}) %>\n                    <% } else { %>\n                        <%= T_("View <[- numHidden ]> more message", {numHidden: numHidden}) %>\n                    <% } %>\n                </a>\n                <img src="<%= cdn_url(\'/img/throbber_horizontal.gif\', \'https://\') %>"\n                    class="view-more-comment-loader hide"\n                    data-target="view-more-loader"\n                    alt="<%= T_("Processing...") %>"/>\n            </div>\n        <%  } %>\n        <div class=\'child-thread-container\'>\n            <ol class="child-thread unstyled contest-replies" data-target="child-thread"></ol>\n            <% if (logged_in) { %>\n                <div class="quickview-post-comment\n                    <% if (threadSize < 1) { %>\n                        hide\n                    <% } %>">\n                    <div class="profile-pic">\n                        <img src="<%- this_user.profile_logo_url %>" alt="<%- this_user.username %>" />\n                    </div>\n                    <form class="pcb-form">\n                        <textarea placeholder="<%= T_("Write a reply...") %>"\n                            data-msg-type=\'public\'\n                            data-parent-id="<%- msg_id %>"\n                            class="new-comment" rows="1"></textarea>\n                        <span class="pcb-loader hide">\n                            <img src="<%= cdn_url(\'/img/throbber_horizontal.gif\', \'https://\') %>"\n                                alt="<%= T_("Loading...") %>"/>\n                        </span>\n                    </form>\n                </div>\n            <% } %>\n        </div>\n    <% } %>\n</li>\n'}),define('contest/entryQuickView',['jquery-wrapper','underscore-wrapper','video-wrapper','jquery.autosize','contest/contest_common','contest/contestPCB','contest/contestSocial','contest/award-confirmation','text!templates/contestView/entry-quick-view.htm','text!templates/contestView/entry-quick-view-pcb.htm','text!templates/contestView/entry-quick-view-pcb-comment.htm','text!templates/contestView/contestEntryViolation.htm','text!templates/contestView/contestErrorModal.htm'],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function q(){w(),a.fn.modal.Constructor.prototype.enforceFocus=function(){},a('.contest-entry-wrapper').on('click','.entry-quick-view',function(b){if(b.ctrlKey){var c=a(b.target).closest('.contest-entry').data('logo-large-url');window.open(c,'_blank')}else{var d=a(this).parents('.contest_entry');o=d.data('entry-id'),E(!1),x(d.data('entry-id'),'all'),N()}return a('body').scrollTop(p),!1}),a('body').on('keydown',function(b){a(this).hasClass('modal-open')&&[38,40].indexOf(b.keyCode)>-1&&b.preventDefault()}),p=0,quickViewContainer.on('show',function(){p=a('body').scrollTop(),a('body').addClass('modal-open')}).on('hidden',function(){a('body').removeClass('modal-open'),a('#player').length>0&&B(),quickViewDetail.html(''),quickViewDetail.hide(),O()}),quickViewDetail.on('click','.show-hide-desc',function(b){quickViewDetail.find('.long-desc').slideToggle('fast',function(){R(quickViewDetail.find('.quickview-pcb'))}),a(b.target).hasClass('more-desc')?(quickViewDetail.find('.view-more-desc').hide(),quickViewDetail.find('.less-desc').show()):(a(b.target).hide(),quickViewDetail.find('.view-more-desc').show())})}function r(b){b.on('show',function(){quickViewContainer.css('z-index','1020'),a('.modal-backdrop').css('opacity','0.46')}),b.on('hide',function(){quickViewContainer.css('z-index',''),a('.modal-backdrop').css('opacity','')}),b.modal('show')}function s(b){var c={errorMessage:b};a('#contest-response-container').html(templateError(c)),r(a('#contest-error-modal'))}function t(){a('body').hasClass('modal-open')||quickViewContainer.modal('show'),quickViewDetail.hide(),quickViewLoading.show(),E(!1)}function u(){quickViewDetail.show(),quickViewLoading.hide()}function v(b,c,d,e,f){t();var g={project_id:projectId,entry_id:b,direction:f};a.ajax({type:'GET',url:'/contest/projectAction/getEntryInfo.php',data:g,dataType:'json',success:c,error:d,complete:e})}function w(){var b={project_id:projectId};a.ajax({type:'GET',url:'/contest/projectAction/getEntryIds.php',data:b,dataType:'json',success:y,error:H})}function x(a,b){v(a,z,H,I,b)}function y(a){n=a.entry_ids}function z(b){var c=b.vars,d=c.entry.description,f=d.substr(0,ENTRY_DESCRIPTION_LENGTH),g='',i=c.contest.is_video;d.length>ENTRY_DESCRIPTION_LENGTH&&(g=d.substr(ENTRY_DESCRIPTION_LENGTH,d.length-ENTRY_DESCRIPTION_LENGTH)),c.max_thumb_length=MAX_THUMB_LENGTH,c.entry.shortDesc=f,c.entry.longDesc=g,quickViewDetail.html(templateQuickView(c)),K(quickViewDetail,c.contest.is_users_contest),u(),S(quickViewDetail.find('.quickview-pcb'),c);var j=c.preloads;for(var k=0;k<j.length;k++)quickViewImages.append('<img src="'+j[k]+'">');var l=quickViewDetail.find('.quickview-display');D(l,i);var m=quickViewDetail.find('.quickview-thumbnails');quickViewDetail.find('.btn-next').click(function(a){var b=m.find('.is-selected'),c=b.next();c.length>0?C(l,c,m,i):Q('next')}),quickViewDetail.find('.btn-prev').click(function(a){var b=m.find('.is-selected'),c=b.prev();c.length>0?C(l,c,m,i):Q('prev')}),m.find('li').click(function(b){var c=m.find('.is-selected'),d=a(this);C(l,d,m,i)}),m.find('.btn-next-thumbnails').click(function(b){var c=a('.multiple-thumbnails'),d=parseInt(c.css('margin-left').replace('px','')),e=-1*THUMBS_NAV_MOVEMENT*(c.find('li').length-4),f=d-THUMBS_NAV_MOVEMENT,g=c.find('li').length>4;g&&d>e&&c.css('margin-left',f+'px')}),m.find('.btn-prev-thumbnails').click(function(b){var c=a('.multiple-thumbnails'),d=parseInt(c.css('margin-left').replace('px','')),e=d+THUMBS_NAV_MOVEMENT;d<0&&c.css('margin-left',e+'px')}),quickViewDetail.find('.quickview-award-entry').click(function(a){var b={thumb:c.entry.thumb,username:c.entry.username,userid:c.entry.userId,number:c.entry.number,prize:prize,prizeFormatted:prizeFormatted,required_deposit:required_deposit,entryId:c.entry.id,currency:c.currency,confirmPickFn:e.confirmPick};c.contest.isDesignStudio?r(e.renderChooseModal(b)):r(h.renderModal(b))}),quickViewDetail.find('.quickview-report-entry').click(function(b){var d={entryId:c.entry.id},e=a('#contest_popup-container');e.html(templateReportEntry(d));var f=e.find('#contest-entry-violation');r(f)}),quickViewDetail.find('.quickview-reject-entry').click(function(a){G(quickViewDetail);var b=function(a){if(a.result!='success'){G(quickViewDetail);var b=T_('Failed to eliminate entry, please try again');s(b)}};e.submitEntryReject(c.entry.id,b)}),quickViewDetail.find('.quickview-reconsider-entry').click(function(a){G(quickViewDetail);var b=function(a){if(a.result!='success'){G(quickViewDetail);var b=T_('Failed to reconsider eliminated entry, please try again');s(b)}};e.submitEntryReconsider(c.entry.id,b)}),quickViewDetail.find('#share-toggle').click(function(b){quickViewDetail.find('.share-menu').toggle();var c=a(this);c.hasClass('active')?c.removeClass('active'):c.addClass('active'),R(quickViewDetail.find('.quickview-pcb'))}),quickViewDetail.find('.btn-like').click(function(b){e.handleLikeClick(a(b.target))}),quickViewDetail.find('.quickview-repost-contest').click(function(a){var b='/contest/repost-preview.php?id='+c.entry.projectId;window.open(b)})}function A(a){c('player',{},function(){var b=this;b.on('fullscreenchange',function(){document.onmsfullscreenchange===undefined&&quickViewContainer.toggleClass('modal')}),E(a)}),a.show()}function B(){var a=c('player');a.dispose()}function C(a,b,c,d){var e=c.find('.is-selected');e.removeClass('is-selected'),b.addClass('is-selected');var f=a.find('img');f.attr('src',b.data('src')),D(a,d)}function D(b,c){var d=a('.contest-entry-wrapper').find('.contest-entry[data-entry-id='+o+']');b.hide(),c?A(b):b.find('img').one('load',function(){E(b),b.show(),R(quickViewDetail.find('.quickview-pcb'))}).each(function(){this.complete&&a(this).load()})}function E(b){quickViewContainer.css('height',''),quickViewContainer.css('width','');var c=a(window).width(),d=a(window).height(),e=0,f=MODAL_TOP_OFFSET,g=quickViewContainer.height();if(b!=0){if(!a.browser.msie){var h=quickViewDetail.find('.quickview-theatre-wrapper'),i=quickViewDetail.find('.quickview-details-wrapper');h.css('width',b.width()+'px');var j=b.width()+i.outerWidth();quickViewContainer.css('width',j+'px')}var g=b.height();g<d?(quickViewContainer.css('height',g+'px'),b.css('line-height',g+'px')):g=F(b,d,g)}var e=(c-quickViewContainer.width())/2;quickViewContainer.css('left',e+'px');var f=MODAL_TOP_OFFSET+(d-g)/2;quickViewContainer.css('top',f+'px')}function F(a,b,c){var d=b-MODAL_TOP_OFFSET/4;return a.css('height',d+'px'),a.css('line-height',d+'px'),a.find('img').css('max-height',d+'px'),d}function G(a){a.find('.quickview-action').toggle(),a.find('.quickview-award').toggle(),a.find('.quickview-ratings').toggle(),a.find('.quickview-reconsider').toggle(),a.find('.status-eliminated').toggle()}function H(a){var b=T_('Entry failed to load. Please try again.');e.errorMessagePopup(b)}function I(a){g.renderSocialButtons(J)}function J(){quickViewDetail.find('.btn-share').show()}function K(b,c){var d=a(b).find('.quickview-ratings'),f=d.find('.radio-option'),g=f.data('entry-id'),h=f.data('rating'),i=d.find('.star');h==='undefined'&&(h=0),i.rating(),i.rating('select',h.toString()),c||i.rating('readOnly',!0),b.find('.star-rating:not(.star-rating-readonly)').click(function(b){if(c){var d=a(b.target).text(),f=a(b.target).closest('.radio-option'),h=f.data('entry-id');e.submitEntryRating(h,d,f),L(g,a(this).index())}})}function L(b,c){var d=a('.radio_option[data-entry-id='+b+']');d.find('.star-rating').eq(c).data('rating.input').rating('select',c)}function M(b){var c=a(b),d=c.parents('.pcb-form'),g=quickViewDetail.find('.quickview-details');c.prop('disabled',!0),f.hideErrors(d),f.showLoading(d),R(quickViewDetail.find('.quickview-pcb'));var h=c.data('msg-type'),i=c.data('parent-id'),j=c.val(),k=g.data('project-id'),l=g.data('entry-id'),m=g.data('user-id'),n=g.data('to-user-id'),o=g.data('entry-number'),p={privacy:h,parent_id:i,entry_id:l,project_id:k,comment:j,to_user_id:n,entry_number:o},q=function(b){if(b.success===!0){c.val('');var d=b.message;d.this_user={profile_logo_url:d.logo_url};var e=a(templateQuickViewPCBComment(d));d.parentId?e.hide().appendTo('.quickview-comment-thread li[data-msg-id='+d.parentId+'] ol.contest-replies'):e.hide().prependTo('.quickview-comment-thread'),e.fadeIn('fast')}else{var f='';typeof b.errors!='undefined'&&a.each(b.errors,function(a,b){f+=b+'<br/>'}),f===''&&(f=T_('Unable to Submit your message at this time. If this issue persists please contact our support.')),c.after('<div class="pcb_error alert alert-error">'+f+'</div>')}},r=function(){var a=T_('Server Error. Unable to Submit your message at this time.');e.errorMessagePopup(a)},s=function(){c.prop('disabled',!1),f.hideLoading(d),R(quickViewDetail.find('.quickview-pcb'))};f.submitMessage(p,q,r,s)}function N(){a(document).keyup(P)}function O(){a(document).unbind('keyup',P)}function P(a){a.which==37||a.keyCode==37?quickViewDetail.find('.btn-prev').click():(a.which==39||a.keyCode==39)&&quickViewDetail.find('.btn-next').click()}function Q(b){if(n.length>0){var c=n.indexOf(String(o)),d;b=='next'?(d=c+1,d>=n.length&&(d=0)):(d=c-1,d<0&&(d=n.length-1)),o=Number(n[d]),a('#player').length>0&&B(),x(o,b)}}function R(b){var c=b.find('.quickview-comments-container'),d=c.outerHeight()-c.height(),e=quickViewDetail.outerHeight(),f=quickViewDetail.find('.quickview-details').outerHeight(),g=a('#quickview-main-post-comment').outerHeight(),h=e-f-g-d;c.css('height',h)}function S(b,c){var d=a(templateQuickViewPCB(c));b.append(d);var g={project_id:c.contest.id,entry_id:c.entry.id,user_id:c.this_user.id,start:0,pageFrom:'bootstap_page'},h={this_user:c.this_user},i=function(c){if(!c.error){b.find('.quickview-post-comment').show();var d=b.find('.quickview-comment-thread');f.addToMessages(c,h,d,templateQuickViewPCBComment),R(b)}else{var g=T_('Unable to get message. ');a.each(c.error,function(a,b){g+='\n'+b+'. '}),e.errorMessagePopup(g)}};f.getMessagesCustom(g,i),d.on('keydown','.new-comment',function(b){b.keyCode==13&&(b.shiftKey||(a(b.target).css('height',''),M(b.target)))}),d.on('click','.message-reply',function(b){var c=a(b.target),d=c.parents('.message_row'),e=d.find('.quickview-post-comment');e.fadeIn('fast'),e.find('.new-comment').focus()}),d.on('click','.view-more-comment',function(){function g(c){if(c&&c.messages){var d=a('.quickview-comments-container');a.each(c.messages,function(b,c){var e=a('li[data-msg-id='+c.msg_id+']');if(e.length===0){var f=d.find('li[data-msg-id='+c.parentId+'] ol.contest-replies');f.prepend(a(templateQuickViewPCBComment(c)).fadeIn('slow'))}}),b.hide()}}var b=a(this),c=quickViewDetail.find('.quickview-details'),d=c.data('user-id');b.find('.view-more-comment-loader').show(),b.find('a').hide(),b.css('cursor','auto');var e={project_id:a('#contestViewContainer').data('contest-id'),parent_id:b.data('parent-id')};typeof c.data('entry-id')!='undefined'&&(e.entry_id=c.data('entry-id')),f.getMessagesCustom(e,g)}),d.on('focus','.new-comment',function(){O()}),d.on('focusout','.new-comment',function(){N()}),d.on('focus','textarea',function(){a(this).autosize({callback:function(){R(b)}})})}THUMBS_NAV_MOVEMENT=40,MAX_THUMB_LENGTH=4,ENTRY_DESCRIPTION_LENGTH=200,MODAL_TOP_OFFSET=250,templateQuickView=b.template(i),templateQuickViewPCB=b.template(j),templateQuickViewPCBComment=b.template(k),templateReportEntry=b.template(l),templateError=b.template(m),quickViewContainer=a('#contest-entry-quickview'),quickViewDetail=a('#contest-entry-quickview-detail'),quickViewLoading=a('#contest-entry-quickview-loading'),quickViewImages=a('#contest-entry-quickview-images');var n,o,p;return{init:q,showQuickView:x}}),define('text!templates/contestView/contestExtendUpgradeOptions.htm',[],function(){return'<li>\n    <input type="radio" name="extend-length" value="3" checked="checked" />\n    <%- T_("3 days") %> (+<%- currency.sign %><%- extendedFee.day3 %>)\n</li>\n<li>\n    <input type="radio" name="extend-length" value="5" />\n    <%- T_("5 days") %> (+<%- currency.sign %><%- extendedFee.day5 %>)\n</li>\n<li>\n    <input type="radio" name="extend-length" value="7" />\n    <%- T_("7 days") %> (+<%- currency.sign %><%- extendedFee.day7 %>)\n</li>\n'}),define('text!templates/postContest/contestBudgetDropdownOption.htm',[],function(){return'<option value="<%- min %>">\n    <%- desc %> (<%- sign %><%- min %> <%- code %>)\n</option>\n'}),define('contest/postcontest-util',['jquery-wrapper','underscore-wrapper','text!templates/postContest/contestBudgetDropdownOption.htm','jquery.validate'],function(a,b,c){function f(b){b=b==='NaN'?0:b;var c=o();a('.feedback').removeClass('feedback-ok').removeClass('feedback-good').removeClass('feedback-great').removeClass('feedback-excellent').removeClass('feedback-best'),a('.corner-ribbon').removeClass('corner-ribbon-green').removeClass('corner-ribbon-purple').removeClass('corner-ribbon-blue');var d=parseFloat(c.max),e=T_('Recommended'),f=T_('Expect around <span id="expect_entry_count"></span> entries'),g=function(d,e,f,g,h){a('.feedback').addClass(d),a('.feedback h3').html(e),a('strong.repost_feedback').html(e),a('.corner-ribbon-content').html(g),a('#expect_entry_container').html(h),a('#expect_entry_count').html('1 to '+f),a('.max-prize').html(w(b,c.max))},h='ok';parseFloat(b)>=c.max||parseFloat(b)>=c.budget.best.max?(g('feedback-best',c.budget.very_best.desc,expectedEntries.best+'+',T_('The sky is the limit!'),T_('Expect the unexpected!')),a('.corner-ribbon').css('display','inline-block').addClass('corner-ribbon-green')):parseFloat(b)<=c.budget.best.max&&parseFloat(b)>=c.budget.best.min?(g('feedback-best',c.budget.best.desc,expectedEntries.best,e,f),a('.corner-ribbon').css('display','inline-block').addClass('corner-ribbon-green')):parseFloat(b)<=c.budget.excellent.max&&parseFloat(b)>=c.budget.excellent.min?(g('feedback-excellent',c.budget.excellent.desc,expectedEntries.excellent_best,e,f),a('.corner-ribbon').css('display','inline-block').addClass('corner-ribbon-blue')):parseFloat(b)<=c.budget.great.max&&parseFloat(b)>=c.budget.great.min?(g('feedback-great',c.budget.great.desc,expectedEntries.great_excellent,e,f),a('.corner-ribbon').css('display','inline-block').addClass('corner-ribbon-purple')):parseFloat(b)<=c.budget.good.max&&parseFloat(b)>=c.budget.good.min?(g('feedback-good',c.budget.good.desc,expectedEntries.good_great,e,f),a('.corner-ribbon').css('display','none')):(g('feedback-ok',c.budget.ok.desc,expectedEntries.good,e,f),a('.corner-ribbon').css('display','none'))}function g(b){a('#prize-amount').val(b),a('#prize-amount').trigger('change'),a('#prize-amount-display').val(i(b)),f(b)}function h(a,b){var c=Math.round(a*b);return newVal=c<parseFloat(initContestPrize)?parseFloat(initContestPrize):c}function i(a){var b=a.toString().split('.');return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,','),b.join('.')}function j(){var a=parseFloat(currencyInfo.max);budgetSliderValues=Array(),budgetSliderValues.push(parseFloat(currencyInfo.min)),budgetSliderValues.push(r(parseFloat(BUDGET_INCREMENT/currencyInfo.exchangerate)));var b=r(parseFloat(BUDGET_INCREMENT*2/currencyInfo.exchangerate))-10;while(b<parseFloat(a))budgetSliderValues.push(b),b+=BUDGET_INCREMENT;budgetSliderValues.push(parseFloat(a))}function k(a,b,c){var d=null,e=null;for(var f=0;f<budgetSliderValues.length;f++)if(a&&budgetSliderValues[f]<=c||b&&budgetSliderValues[f]>=c){var g=Math.abs(c-budgetSliderValues[f]);if(e==null||g<e)d=budgetSliderValues[f],e=g}return d}function l(){var d='',e=o();return b.each(e.budget,function(f){var g={code:e.code,sign:e.sign,desc:f.desc,min:f.min,max:f.max},h=b.template(c,g);f.name==='great'&&(p(f.min),h=a(h).attr('selected',!0).prop('outerHTML')),d+=h}),d+='<option value="customize">'+T_('Customize budget')+'</option>',d}function m(){var b=l();a('#post-contest-budget').html(b)}function n(a){currencyInfo=e[a]}function o(){return currencyInfo}function p(a){d=a}function q(){return d}function r(a){return Math.round(a/BUDGET_INCREMENT)*BUDGET_INCREMENT}function s(b){a('.csign').html(b.sign),a('#sub-total-sign').html(b.sign),a('#sub-total-code').html(b.code)}function t(){a('#highlight-upgrade-price').html(currencyInfo.sign+i(parseFloat(feesInfo[5]).toFixed(2))),a('#featured-upgrade-price').html(currencyInfo.sign+i(parseFloat(feesInfo[4]).toFixed(2))),a('#sealed-upgrade-price').html(currencyInfo.sign+i(parseFloat(feesInfo[3]).toFixed(2))),a('#private-upgrade-price').html(currencyInfo.sign+i(parseFloat(feesInfo[2]).toFixed(2))),v()}function u(b,c){return total_price=0,a('#prize-amount').val()!=='NaN'&&(parseInt(a('#prize-amount').val())<parseInt(currencyInfo.min)&&a('#prize-amount').val(initialData.project.prize),total_price+=parseFloat(a('#prize-amount').val())),a('#tax-label').show(),a('#highlight-contest').length!=0&&a('#highlight-contest').is(':checked')&&(total_price+=parseFloat(feesInfo[5])),a('#featured-contest').length!=0&&a('#featured-contest').is(':checked')&&(initialData.isCouponFeature||(total_price+=parseFloat(feesInfo[4]))),a('#private-contest').length!=0&&a('#private-contest').is(':checked')&&(total_price+=parseFloat(feesInfo[2])),a('#sealed-contest').length!=0&&a('#sealed-contest').is(':checked')&&(total_price+=parseFloat(feesInfo[3])),a('#guaranteed-contest').length!=0&&!a('#guaranteed-contest').is(':checked')&&c===!0?(total_price+=parseFloat(feesInfo[1]),v()):b?a('#tax-label').html(T_('incl. GST')):a('#tax-label').html(''),a('.sub-total').html(i(total_price.toFixed(2))),total_price==0?a('.total').hide():a('.total').show(),total_price}function v(){if(initialData.takeListingFee===!0){var b={sign:currencyInfo.sign,amount:parseFloat(feesInfo[1]).toFixed(2),code:currencyInfo.code};initialData.isAusUser===!0?a('#tax-label').html(T_('incl. GST and listing fee <%-sign%><%-amount%> <%-code%>',b)):a('#tax-label').html(T_('incl. listing fee <%-sign%><%-amount%> <%-code%>',b))}else initialData.isAusUser===!0?a('#tax-label').html(T_('incl. GST')):a('#tax-label').html('')}function w(a,b){return parseFloat(a)<=b?i(b)+'+':i(a)}function x(a){e=a||{},y()}function y(){for(var a=1;a<=b.size(e);a++)for(var c in e[a].budget)switch(c){case'good':e[a].budget[c].desc=T_('Good Results');break;case'great':e[a].budget[c].desc=T_('Great Results');break;case'excellent':e[a].budget[c].desc=T_('Excellent Results');break;case'best':e[a].budget[c].desc=T_('Best Results');break;case'very_best':e[a].budget[c].desc=T_('Amazing Results');break;default:e[a].budget[c].desc=T_('Ok Results')}}function z(){return e}currencyInfo={};var d=0,e={};return{refreshLabel:f,adjustAmounts:g,convertValue:h,numberWithCommas:i,generateBudgetSliderValues:j,findNearest:k,buildBudgetOptions:l,loadBudgetDropdown:m,setCurrencyInfo:n,getCurrencyInfo:o,getDefaultBudgetOptionValue:q,roundToNearest:r,changeCurrencySigns:s,refreshUpgradeFees:t,changeTaxLabel:v,setBudgetBoundaries:x,getBudgetBoundaries:z,displayTotalPrice:u}}),define('contest/upgrade-contest-common',['jquery-wrapper','underscore-wrapper','contest/postcontest-util'],function(a,b,c){function d(){c.setBudgetBoundaries(initialData.budgetBoundaries),c.setCurrencyInfo(initCurrencyId),c.generateBudgetSliderValues(),c.changeCurrencySigns(c.getCurrencyInfo()),c.refreshUpgradeFees(),j(),a('#package-slider .ui-slider-handle').draggable(),n(),initialData.isUpgrade===!0&&(typeof initialData.isDraft=='undefined'||initialData.isDraft===!1)&&l(),a('#prize-amount-display').keyup(function(){var b=parseFloat(a(this).val().replace(/\,/g,''));a(this).val(b),a('#prize-amount').val(b),a('#prize-amount').trigger('change')}),f(),a('#promote-contest-container .upgrade-option').on('click',function(){a(this).find('.upgrade-check-box').trigger('click'),a(this).find('.upgrade-check-box').is(':checked')?a(this).closest('.upgrade-option').addClass('upgrade-selected'):a(this).closest('.upgrade-option').removeClass('upgrade-selected'),j()}),g(),a('#promote-contest-container .upgrade-check-box').on('click',p),a('.input-integers-only').keyup(function(){this.value=this.value.replace(/[^\d,]+/g,'')})}function e(a){var b=1;for(i=1;i<=currencyInfo.mapping.length;i++){if(a<currencyInfo.mapping[i-1])break;b=i}return b}function f(){a('#prize-amount').change(function(){var b='',d=a(this).val();a(this).valid()?(a(this).closest('.control-group').removeClass('error'),a('#prize_warning').hide(),currencyInfo.mapping?(a('#package-slider').slider('option','value',e(parseFloat(d))),d>=currencyInfo.max?a('.max-prize').html(c.numberWithCommas(d)):a('.max-prize').html(c.numberWithCommas(currencyInfo.max))):(a('#package-slider').slider('value',parseFloat(d)),a('#package-slider').slider('value')>=currencyInfo.max?(a('.max-prize').html(c.numberWithCommas(d)),a('#package-slider').slider('option','max',parseFloat(d))):(a('.max-prize').html(c.numberWithCommas(currencyInfo.max)),a('#package-slider').slider('option','max',parseFloat(currencyInfo.max))))):(initialData.isUpgrade===!0&&(typeof initialData.isDraft=='undefined'||initialData.isDraft===!1)&&parseFloat(a('#prize-amount').val())<parseFloat(initContestPrize)?b=T_('Minimum prize is <%= amount %>',{amount:currencyInfo.sign+initContestPrize}):b=T_('Minimum prize is <%= amount %>',{amount:currencyInfo.sign+currencyInfo.min}),a('#prize_warning').html(b),a('#prize_warning').show()),j(),c.refreshLabel(a(this).val())})}function g(){a('#promote-contest-container .extend-options li').off('click').on('click',function(b){b.stopPropagation(),a(this).find('input').trigger('click'),j()}),a('#promote-contest-container .extend-options').off('click').on('click',function(a){a.stopPropagation()}),a('#promote-contest-container .extend-options li input').off('click').on('click',function(b){b.stopPropagation();var c=a(this).val();a(this).closest('.upgrade-option').find('.upgradePrice .price').html(currencyInfo.sign+k(c)),a(this).closest('.upgrade-option').find('.upgradePrice .from').hide(),j()})}function h(){var b=initialData.isAusUser,d=initialData.takeListingFee,e=initialData.isUpgrade,f=0;if(typeof isSkillPage!='undefined'&&isSkillPage==1)var g=a('#skill-prize-amount');else var g=a('#prize-amount');!e||typeof initialData.isDraft!='undefined'&&initialData.isDraft!==!1?f+=parseFloat(g.val()):f+=parseFloat(g.val())-initContestPrize,a('#highlight-contest').length!=0&&a('#highlight-contest').is(':checked')&&(f+=parseFloat(feesInfo[5])),a('#featured-contest').length!=0&&a('#featured-contest').is(':checked')&&(f+=parseFloat(feesInfo[4])),a('#private-contest').length!=0&&a('#private-contest').is(':checked')&&(f+=parseFloat(feesInfo[2])),a('#sealed-contest').length!=0&&a('#sealed-contest').is(':checked')&&(f+=parseFloat(feesInfo[3]));if(e&&a('#extend-contest').is(':checked')){var h=a('input[name="extend-length"]:checked').val();f+=parseFloat(extendedFee[h])}return a('#guaranteed-contest').length!=0&&!a('#guaranteed-contest').is(':checked')&&d===!0&&(f+=parseFloat(feesInfo[1]),c.changeTaxLabel()),b?a('#tax-label').html(T_('incl. GST')):a('#tax-label').html(''),f}function j(){a('.sub-total').html(c.numberWithCommas(h().toFixed(2)))}function k(a){var b=parseFloat(extendedFee[a]);return b.toFixed(2)}function l(){var b=initContestPrize-currencyInfo.min,c=currencyInfo.max-currencyInfo.min,d=b>c?'100%':b*100/c+'%';a('#ui-slider-locked').css('width',d)}function m(b,d){var e=d.value;d.value>a('#package-slider').slider('option','max')&&(e=a('#package-slider').slider('option','max'));var f=b.keyCode!=a.ui.keyCode.RIGHT,g=b.keyCode!=a.ui.keyCode.LEFT,h=c.findNearest(f,g,d.value);return initialData.isUpgrade===!0&&(typeof initialData.isDraft=='undefined'||initialData.isDraft===!1)&&h<initContestPrize&&(h=initContestPrize),a('#package-slider').slider('option','value',h),c.adjustAmounts(h),j(),!1}function n(){a('#package-slider').length&&(a('#package-slider').slider({range:'min',max:1e3,slide:m,change:function(b,c){c.value>=a('#package-slider').slider('option','max')&&a('#prize-amount-display').focus()}}),a('.ui-slider-handle').html('<span/>'),a('.ui-slider-range').css('background','#b6dbeb'))}function o(){a('.min-prize').html(c.numberWithCommas(currencyInfo.min)),a('.max-prize').html(c.numberWithCommas(currencyInfo.max)),a('#prize-amount-display').val(c.numberWithCommas(initContestPrize)),a('#prize-amount').val(initContestPrize),a('#prize-amount').trigger('change'),a('#package-slider').slider('value',initContestPrize)}function p(b){b.stopPropagation(),a(this).attr('id')=='extend-contest'&&(a(this).closest('.upgrade-option').find('.extend-options').slideToggle(),a(this).not(':checked')&&(a(this).closest('.upgrade-option').find('.extend-options input:first').trigger('click'),a(this).closest('.upgrade-option').find('.upgradePrice .from').show())),j(),a(this).closest('.upgrade-option').toggleClass('upgrade-selected')}return{init:d,defaultSlide:m,getTotalPrice:h,sliderLock:l,getPresentBudget:o,addExtendListeners:g,displayTotalPrice:j}}),define('contest/inline-upgrade',['jquery-wrapper','underscore-wrapper','contest/upgrade-contest-common','contest/contest_common','payments/module-fixed-amount-payment-modal','text!templates/contestView/contestExtendUpgradeOptions.htm','jquery.validate'],function(a,b,c,d,e,f){function g(){a('#upgradeContestButton').click(function(){return h(),!1}),a('#upgradeform').validate({errorElement:'span',onsubmit:!1,ignore:'',errorPlacement:function(a,b){a.appendTo(b.siblings('.help-inline')),a.appendTo(b.closest('.controls').siblings('.help-inline'))},onfocusout:function(b){if(a(b).val()=='')return;a(b).valid()},rules:{prize:{validatePrize:!0,maxlength:9,required:!0,number:!0},prize_display:{number:!0}},highlight:function(b){a(b).closest('.control-group').addClass('error')},success:function(b){a(b).closest('.control-group').removeClass('error')}}),a.validator.addMethod('validatePrize',function(a,b){return a=parseInt(a),typeof initialData.isDraft=='undefined'||initialData.isDraft===!1?initContestPrize<=a:currencyInfo.min<=a}),c.init(),c.getPresentBudget(),a('#contestViewContainer .upgrade-contest').click(function(b){var c=a(this).find('span');b.preventDefault?b.preventDefault():b.returnValue=!1,d.toggleUpgradeButton(),a(this).attr('disabled')!=='disabled'&&(a('#upgradeContestContainer').is(':hidden')||d.changeToArrowDown(c),a('#upgradeContestContainer').slideToggle())}),a('#cancelUpgradeContest').click(function(){var b=a('#contestViewContainer .upgrade-contest').find('span');return a('#upgradeContestContainer').slideUp(),d.changeToArrowDown(b),!1}),a('#upgradeContestContainer').on('change','.upgrade-check-box , .extend-options li input, #prize-amount',function(a){d.toggleUpgradeButton()}),a('.contest-featured-upsell-banner').on('click',function(){n('featured')})}function h(){var b=!1;return a('#upgradeform').valid()||(b=!0),b?a('html, body').animate({scrollTop:0},'slow'):j(),!1}function i(){var b={},e=a('#contestViewContainer').data('contest-id'),f=a('#contest-budget #prize-amount').val(),g=a('#contest-budget #old-prize').val();b.project_id=e,b.prize=f,b.oldPrize=g,a('#promote-contest-container .upgrade-check-box:checked').each(function(){var c=a(this);switch(c.attr('id')){case'guaranteed-contest':b.guaranteed='on',b.contest_type=c.val();break;case'featured-contest':b.featured='on';break;case'highlight-contest':b.highlight='on';break;case'sealed-contest':b.sealed='on';break;case'private-contest':b.private='on';break;case'extend-contest':var d=c.parent().parent().find('.extend-options li input:checked').val();b.extendLength=d,b.extended='on';break;default:}}),a.ajax({type:'POST',url:'/ajax/contest/update.php',data:b,dataType:'json',beforeSend:function(){a('.upgrade-check-box').attr('disabled',!0),a('#upgradeContestButton').siblings('.loading').show(),a('#upgradeContestButton').hide(),a('#cancelUpgradeContest').hide()},complete:function(){a('.upgrade-check-box').removeAttr('disabled'),a('#upgradeContestButton').siblings('.loading').hide(),a('#upgradeContestButton').show(),a('#cancelUpgradeContest').show()},success:function(e){if(e.status=='success'){var f=a('.upgrade-check-box:checked').closest('.upgrade-option'),g=a('#contestViewContainer .upgrade-contest').find('span'),h=a('#prize-amount');f.fadeOut('slow',function(){f.not('#extend-upgrade').empty()}),b.extended=='on'&&(a('#guaranteed-upgrade').remove(),a('#upgradeContestButton').attr('disabled',!0)),b.featured=='on'&&a('.contest-featured-upsell-banner').hide(),l();var i=e.project.prize;i.toString().indexOf('.00')!==-1&&(i=parseInt(i,10)),a('#prize-amount-display').val(i),h.val(i),h.trigger('change'),a('.contest_stat_result .amount').html(i);if(e.project.time_remaining){var j=T_('<[- time ]> remaining',{time:e.project.time_remaining});a('#bid_time_left').text(j),a('.contest-banner-time-remaining').text(j)}e.project.status==activeContestStatus&&a('#project_status').text()==T_('Pending')&&a('#project_status').html(e.project.status_text),d.renderRibbons(b),initContestPrize=i,c.sliderLock(),a('#upgradeContestContainer').slideUp(),d.changeToArrowDown(g),a('.sub-total').html('0.00'),a('#contestUpgradeError').fadeOut(),a('#old-prize').val(initContestPrize),a('#upgradeContestButton').attr('disabled',!0)}else if(e.status=='insufficient_funds')window.location.replace(e.depositUrl);else{var k='',m=e.errors[0];a.each(m,function(b,c){a.each(c,function(a,b){k=k+b+'<br />'})}),a('#contestUpgradeError').html(k).fadeIn()}},error:function(){var a=T_('Server Error. Unable to perform contest upgrade.');d.errorMessagePopup(a)}})}function j(){var a={upgradeContestFn:i};e.initModal({amount:c.getTotalPrice(),currencyDetails:{id:currency.id,sign:currency.sign,code:currency.code}},function(a){a.upgradeContestFn()},a,function(a){},a,{},{})}function k(){var d=a('#extend-upgrade');a.ajax({type:'POST',url:'/contest/projectAction/getExtendedFees.php',data:{project_id:projectId},dataType:'json',success:function(a){if(a.result=='success'){extendedFee=a.extended_fees;var e={day3:extendedFee.formatted_3,day5:extendedFee.formatted_5,day7:extendedFee.formatted_7},g={currency:currency,extendedFee:e},h=b.template(f,g),i=parseFloat(extendedFee.formatted_3).toFixed(2);d.find('.extend-options').find('ul').html(h),c.addExtendListeners(),d.find('.upgradePrice .price').html(currency.sign+i)}}})}function l(){var b=a('.upgrade-check-box:checked').closest('.upgrade-option');k(),b.fadeIn(),b.find('.extend-options').hide(),b.removeClass('upgrade-selected'),a('#extend-contest').attr('checked',!1)}function m(b){var c=a('#contestViewContainer .upgrade-contest'),e=c.find('span'),f=a('#upgradeContestContainer');if(b){var g=f.find('.upgrade-check-box.pre-selected');for(var h in b){var i=f.find('#'+b[h]+'-contest.upgrade-check-box');i.length&&(i.is(':checked')||i.trigger('click'),g=g.not(i[0]),i.removeClass('pre-selected'))}g.removeAttr('checked'),g.closest('div.upgrade-option').removeClass('upgrade-selected')}c.attr('disabled')!=='disabled'&&(f.is(':hidden')?f.slideDown():d.changeToArrowDown(e)),d.toggleUpgradeButton()}function n(a){var b=0;switch(a){case'featured':b=feesInfo[4];break;default:}b>0&&e.initModal({amount:b,currencyDetails:{id:currency.id,sign:currency.sign,code:currency.code}},function(){o(a)})}function o(b){console.log('Call upsell function');var c=a('#contestViewContainer').data('contest-id'),e=a('#contest-budget #prize-amount').val(),f={project_id:c,prize:e};switch(b){case'featured':f.featured='on'}a.ajax({type:'POST',url:'/ajax/contest/update.php',data:f,dataType:'json',beforeSend:function(){},complete:function(){a('.upgrade-check-box').removeAttr('disabled'),a('#upgradeContestButton').siblings('.loading').hide(),a('#upgradeContestButton').show(),a('#cancelUpgradeContest').show()},success:function(b){b.status=='success'?(f.featured=='on'&&(a('.contest-featured-upsell-banner').hide(),_gaq.push(['_trackEvent','Contest_upsell_featured','ContestView_T7841'])),d.renderRibbons(f)):b.status=='insufficient_funds'&&window.location.replace(b.depositUrl)},error:function(){var a=T_('Server Error. Unable to perform contest featured upgrade.');d.errorMessagePopup(a)}})}return autoSelectFeatured&&h(),{init:g,showUpgradeForm:m}}),define('text!templates/contestView/contestsInterestedIn.htm',[],function(){return'<div class="span4 contest-related-wrapper">\n    <div class="contest-related-items">\n        <h3 class="contest-related-items-title"><%= T_("Similar Contests") %></h3>\n        <% _.each(contestsInterestedIn, function(contest) { %>\n        <div class="contest-related-item">\n            <span class="contest-related-item-title">\n                <a href="<%- contest.seoUrl %>"\n                   onclick="javascript:_gaq.push([\'_trackEvent\', \'ContestSimilar\', \'Active\', \'List\']);">\n                       <%- contest.project_name %>\n                </a>\n            </span>\n            <span class="contest-related-item-author">\n                <a href="<%- contest.user_info.url %>"\n                   onclick="javascript:_gaq.push([\'_trackEvent\', \'ContestSimilar\', \'Active\', \'Username\']);">\n                    <%= T_("by <[- uname ]>", {uname: contest.user_info.username}) %>\n                </a>\n            </span>\n            <span class="contest-related-item-value">\n                $<%- contest.bid_avg_usd %> USD\n            </span>\n        </div>\n        <% }); %>\n        <a class="contest-related-more" href="/jobs/featured/"\n           onclick="javascript:_gaq.push([\'_trackEvent\', \'ContestSimilar\', \'Active\', \'ViewMore\']);">\n               <%= T_("View more") %>\n        </a>\n    </div>\n    <div class="contest-related-items">\n        <h3 class="contest-related-items-title"><%= T_("Completed Contests") %></h3>\n        <% _.each(completedContests, function(contest) { %>\n        <div class="contest-related-item">\n            <span class="contest-related-item-title">\n                <a href="<%- contest.contestURL %>"\n                   onclick="javascript:_gaq.push([\'_trackEvent\', \'CompletedContest\', \'Active\', \'List\']);">\n                    <%- contest.contest_name %>\n                </a>\n            </span>\n            <span class="contest-related-item-author">\n                <a href="/u/<%- contest.username %>.html"\n                   onclick="javascript:_gaq.push([\'_trackEvent\', \'CompletedContest\', \'Active\', \'Username\']);">\n                    <%= T_("by <[- uname ]>", {uname: contest.username}) %>\n                </a>\n            </span>\n            <span class="contest-related-item-value">\n                $<%- contest.prizeInUSD %> USD\n            </span>\n        </div>\n        <% }); %>\n        <a class="contest-related-more" href="/contest/successful-contest.php"\n           onclick="javascript:_gaq.push([\'_trackEvent\', \'CompletedContest\', \'Active\', \'ViewMore\']);">\n               <%= T_("View more") %>\n        </a>\n    </div>\n</div>\n'}),define('contest/contestsInterestedIn',['jquery-wrapper','underscore-wrapper','text!templates/contestView/contestsInterestedIn.htm'],function(a,b,c){function d(){var b=a('#contestViewContainer'),c=b.data('contest-id'),d={project_id:c};e(d)}function e(b){var c=a('.contest-related-wrapper');a.ajax({type:'GET',url:'/contest/projectAction/getContestsInterestedIn.php',cache:!1,data:b,dataType:'json',success:function(a){a.status=='fail'?c.append('<div class="error">'+T_('Failed to get similar contests')+'</div>'):c.append(templateInterestedIn(a))},error:function(){window.onerror('Contest: Failed to get suggested contests','contestsInterestedIn')}})}return templateInterestedIn=b.template(c),{init:d}}),define('contest/contest',['jquery-wrapper','underscore-wrapper','jquery.rating.min','contest/contest_common','contest/submitEntry-fileupload','bootstrap-popover','payments/module-fixed-amount-payment-modal','payments/module-payments-source','contest/contestHoverIntent','contest/contestPCB','contest/joinContest','contest/entryQuickView','contest/inline-upgrade','contest/contestsInterestedIn','text!templates/contestView/publish_draft.htm','text!templates/contestView/contestEntryViolation.htm','text!templates/contestView/contestReportFreelancer.htm','text!templates/contestView/contestRejectFreelancer.htm','text!templates/contestView/contestEntryNavigation.htm','text!templates/contestView/contestEntryHighlight.htm','text!templates/contestView/contestInfoModal.htm'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function w(c,f){var h=4;(!Modernizr.draganddrop||jQuery.browser.msie)&&jQuery('#fileuploadHintText').hide(),a('#brief-toggle').click(function(){d.toggleBrief()}),a('#view-create-polls').click(function(){d.togglePolls()}),typeof getUserIdfromCookie=='function'&&(currentUserId=getUserIdfromCookie(),d.setCurrentUserId(currentUserId)),d.setContestId(a('#contestViewContainer').data('contest-id')),typeof addthis!='undefined'&&addthis&&addthis.init(),window.location.pathname=='/contest/contest.php'&&typeof isUsingDS!='undefined'&&isUsingDS===!1&&history.replaceState('','',seoURL),ttrefContest!==!1&&d.initTtref(ttrefContest),isUsingDS===!1&&c===!1&&isUserContest===!0&&m.init(),isUsingDS===!1&&A();if(isUserContest===!0&&autoSelectFeatured===!0)if(!f.featured)a('#contestViewContainer .upgrade-contest').trigger('click');else{var i=T_('Your contest has already been upgraded to Featured.'),o={infoMessage:i};a('#contest-response-container').html(b.template(u,o)),a('#contest-info-modal').modal('show')}d.fixEntryThumbnail(a('.contest_entry-image')),templateEntryNav=b.template(s),a('#engagement').popover_legacy({placement:'bottom',trigger:'hover',html:!0}),a('#upgradeRibbons').popover_legacy({placement:'right',template:d.popoverNoTitle(),trigger:'hover',html:!0}),a('#prizeHelp').popover_legacy({placement:'right',template:d.popoverNoTitle(),trigger:'hover',html:!0}),a('#submitEntryTooltip').popover_legacy({template:d.popoverNoTitle(),trigger:'hover',html:!0}),a('#prizePopover').popover_legacy({template:d.popoverNoTitle(),trigger:'hover',html:!0}),a('#upgradeRibbonsDS').popover_legacy({template:d.popoverNoTitle(),trigger:'hover',html:!0}),a('li.contest_entry').each(function(b){d.addToEntries(a(this).data('entry-id'),this),d.addToAllEntries(a(this).data('entry-id'))}),d.setFilteredEntries(d.getAllEntries()),d.setAllEntries(d.getAllEntries());var w=a('#project_status').data('status');(d.getAllEntries().length>h||w!='active')&&d.hideBrief(),a('.study').hover(function(){var b=a(this).data('hover');a('.learn').hide(),a('.'+b).show()},function(){var b=a(this).data('hover');a('.learn').hide(),a('.learn-more').show()}),a('.contest-banner .fullFeedback').on('click',function(){var b='"'+a(this).parent().data('fullfeedback')+'"';a(this).parent('.feedback').html(b)}),items_page=a('.contest-entry-wrapper').data('items-page'),num_entries=a('.contest-entry-wrapper').data('entry-count'),d.setItemPage(items_page),d.setNumEntries(num_entries),d.initPagination(),e.initFileUpload('#fileupload'),a('#entry_description').on('keyup',function(){checkCharacterLimit('#entry_description','#entry_description_count',1e3,!0)}),a('#entry-submit').on('click',function(){if(a(this).attr('disabled'))return!1;var b=d.validateEntry(),c=a('#addEntryForm');if(!b)return!1;a.ajax({type:'post',data:b,dataType:'json',url:'/contest/ajaxAddEntry.php',beforeSend:function(){a('#entry-file-input').hide(),c.find('#entry-submit').hide(),c.find('#entry-submit-process').show()},success:function(b){a('#entry-submit-errors').empty(),a('#entry-submit-errors').hide();if(b.status=='success'){if(b.redirect)return window.location.replace(b.redirect),!1;_lt.push({event:'Entries Submitted',xp_contest:a('#ttrefXPContest').length,realtime_contest:a('#ttrefRealtimeContest').length}),c.find('#entry_title').val(''),c.find('#entry_description').val(''),c.find('#original').attr('checked',!1),c.find('#entry_isSealed').attr('checked',!1),c.find('#entry_isHighlighted').attr('checked',!1),b.social_sharing&&a('#contest-content').prepend(b.social_sharing),a('.total-entry-text').html(b.total),d.toggleSubmit(),a('.clearBtn').click(),a('#project_files').html(''),a('#entry_success').show(),a('#entry_description_count').html('1000'),k.hideJoinButton()}else if(b){var e='';for(errorClass in b.errors)e=e+b.errors[errorClass].join('<br />')+'<br />';a('#entry-submit-errors').append(e),a('#entry-submit-errors').show()}c.find('#entry-submit').show(),c.find('#entry-submit-process').hide(),d.displayEntryPrice(),d.loadFirstPage()},error:function(){c.find('#entry-submit').show(),c.find('#entry-submit-process').hide();var a=T_('Failed to submit entry.');d.errorMessagePopup(a)}})}),a('.entry-upgrade-option-container').on('click',function(){var b=a(this).find('.entry-upgrade-option');b.is(':checked')?b.prop('checked',!1).change():b.prop('checked',!0).change()}),a('.entry-upgrade-option').on('click',function(b){a(this).change(),b.stopPropagation()}),a('.entry-upgrade-option').on('change',function(){d.displayEntryPrice()}),a('.contest-entry-wrapper').on('click','.report-entry',function(){entry=a(this).parents('.contest_entry');var c=entry.hasClass('contest-entry-rejected'),d=entry.hasClass('contest-entry-withdrawn'),e={entryId:entry.data('entry-id')},f=b.template(p),g=a(entry).offset();logged_in&&!c&&!d&&!showHelp&&(a('#contest_popup-container').html(f(e)),a('#contest-entry-violation').modal('show'),a(document).scrollTop(g.top-200))}),a('#report-designer').on('click',function(){var c=a('#contestViewContainer').data('user-id'),d=a('#contestViewContainer').data('contest-id'),e={userId:c,contestId:d},f=b.template(q);a('#contest_popup-container').html(f(e)),a('#contest-report-designer').modal('show')});var x=a('#reject-designer').attr('href');d.setRejectLink(x),a('#reject-designer').removeAttr('href'),a('#reject-designer').on('click',function(){var c=b.template(r);a('#contest_popup-container').html(c),a('#contest-reject-designer').modal('show')}),a('.contest-entry-wrapper').on('click','.entry-handover',function(){var b=a(this).parents('.contest_entry');window.location.href='handover.php?entry_id='+a(b).data('entry-id')}),a('.contest-entry-wrapper').on('click','.entry-give-feedback',function(){var b=a(this).parents('.contest_entry');window.location.href='viewentries.php?project_id='+a('.contest-details').data('contest-id')+'&user_id='+a(b).data('user-id')+'#contest_messages'}),a('.contest-entry-wrapper').on('click','.entry-withdraw',function(){var b=a(this).parents('.contest_entry');d.setWithdrawn(b),a.ajax({type:'GET',url:'/contest/projectAction/withdraw.php',cache:!1,data:'action=do&entry_id='+a(b).data('entry-id'),dataType:'json',beforeSend:function(){},success:function(c){if(c.result!='success'){var e=T_('Failed to withdraw entry, please try again');d.setActive(b),d.errorMessagePopup(e)}else{var f=a(b).find('.contest_entry-image');f.hide()}},error:function(){var a=T_('Server Error. Unable to withdraw entry.');d.errorMessagePopup(a)},complete:function(){}})}),a('.contest-entry-wrapper').on('click','.entry-unwithdraw',function(){var b=a(this).parents('.contest_entry');d.setActive(b),a.ajax({type:'GET',url:'/contest/projectAction/withdraw.php',cache:!1,data:'action=undo&entry_id='+a(b).data('entry-id'),dataType:'json',beforeSend:function(){},success:function(c){if(c.result!='success'){var e=T_('Failed to unwithdraw entry, please try again');d.setWithdrawn(b),d.errorMessagePopup(e)}else{var f=a(b).find('.contest_entry-image');f.find('img').filter(':first').attr('src',b.data('image-url')),f.show()}},error:function(){var a=T_('Server Error. Unable to unwithdraw entry.');d.errorMessagePopup(a)},complete:function(){}})}),a('.contest-entry-wrapper').on('click','.entry-reject',function(){var b=a(this).parents('.contest_entry'),c=a(b).data('entry-id'),e=function(a){if(a.result!='success'){var c=T_('Failed to eliminate entry, please try again');d.setActive(b),d.errorMessagePopup(c)}};d.setRejected(b),d.submitEntryReject(c,e)}),a('.contest-entry-wrapper').on('click','.entry-reconsider',function(){var b=a(this).parents('.contest_entry'),c=a(b).data('entry-id'),e=function(a){if(a.result!='success'){var c=T_('Failed to reconsider the eliminated entry, please try again');d.setRejected(b),d.errorMessagePopup(c)}},f=function(){var a=T_('Server Error. Unable to reconsider the eliminated entry.');d.errorMessagePopup(a)};d.setActive(b),d.submitEntryReconsider(c,e,f)}),a('.contest-entry-wrapper').on('click','.entry-award-prize',function(){var b=a(this).parents('.contest_entry'),c={thumb:b.data('image-url'),username:b.find('.entry_user_link').data('username'),userid:b.data('user-id'),number:b.data('entry-number'),prize:prize,prizeFormatted:prizeFormatted,required_deposit:required_deposit,entryId:b.data('entry-id'),currency:currency,hasEntryWinner:hasEntryWinner};d.setEntry(b),typeof isUsingDS!='undefined'&&isUsingDS===!0?d.showChooseModal(c):d.showAwardModal(c)}),a('.contest-entry-wrapper').on('click','.entry-highlight',function(){var c=a(this).parents('.contest_entry'),e={highlightPrice:v},f=b.template(t);a('#contest_popup-container').html(f(e));var g={entry_id:c.data('entry-id')};a('#contest-entry-highlight-confirm').click(function(){var b=a(this);b.prop('disabled',!0),a('#contest-entry-highlight-modal .loading').removeClass('hide'),a.ajax({type:'GET',url:'/ajax/contest/highlightEntry.php',data:g,dataType:'json',beforeSend:function(){},success:function(b){if(b&&b.status=='success'){if(b.redirect)return window.location.replace(b.redirect),!1;c.addClass('contest-entry-highlight'),c.addClass('contest-entry-highlight-upgrade'),c.data('is-highlighted','1'),c.removeClass('contest-entry-highlight-option'),a('#contest-entry-highlight-modal').modal('hide')}else{var d=T_('Failed to highlight entry: ');if(b&&b.errors)for(errorClass in b.errors)d=d+b.errors[errorClass].join('<br />')+'<br />';else d=T_('An error occured. Please try again or contact support.');a('#contest-entry-highlight-modal #errors').empty(),a('#contest-entry-highlight-modal #errors').append(d)}},error:function(){var a=T_('An error occured. Please try again or contact support.');d.errorMessagePopup(a)},complete:function(){a('#contest-entry-highlight-modal .loading').addClass('hide'),b.prop('disabled',!1)}})}),a('#contest-entry-highlight-modal').modal('show');var h=a(c).offset();a(document).scrollTop(h.top-200)}),a('#contest_popup-container').on('click','.contest-award-prize-entry',function(){var b=a(this).data('entry-id');typeof isUsingDS!='undefined'&&isUsingDS===!0&&d.confirmChoose(b)}),a('#contest_popup-container').on('click','.contest-report-entry-violation',function(){var b=a(this).parents('#contest-entry-violation').find('#entry-violation-reason').val(),c=a(this).parents('#contest-entry-violation').find('#entry-violation-reason option:selected').text();d.reportContestEntryViolation(a(this).data('entry-id'),b,c)}),a('#contest_popup-container').on('click','.confirm-report-designer',function(){var b=a(this).data('user-id'),c=a(this).data('contest-id'),e=a(this).parents('#contest-report-designer').find('#designer-violation-reason').val(),f=a(this).parents('#contest-report-designer').find('#designer-violation-reason option:selected').text();d.reportDesignerViolation(b,c,e,f)}),a('#contest_popup-container').on('click','.confirm-reject-designer',function(){d.confirmReject()}),a('#contestEntryContainer').on('mouseenter','.manage-contest .active-entry',function(){d.cleanButtonPannel(a(this)),a(this).find('.entry-hover-wrap').addClass('button-panel3').append(a(templateEntryNav()).find('a.entry-award-prize, a.entry-give-feedback, a.entry-reject'))}),a('#contestEntryContainer').on('mouseenter','.award-contest .active-entry',function(){a(this).find('.entry-hover-wrap').addClass('button-panel2').append(a(templateEntryNav()).find('a.entry-award-prize, a.entry-reject'))}),a('#contestEntryContainer').on('mouseenter','.manage-contest .contest-entry-rejected, .award-contest .contest-entry-rejected',function(){a(this).hasClass('contest-entry-withdrawn')||a(this).find('.entry-hover-wrap').addClass('button-panel1').append(a(templateEntryNav()).find('a.entry-reconsider'))}),a('#contestEntryContainer').on('mouseenter','.manage-contest .contest-entry-winner, .award-contest .contest-entry-winner',function(){a(this).find('.entry-hover-wrap').addClass('button-panel1').append(a(templateEntryNav()).find('a.entry-handover'))}),a('#contestEntryContainer').on('mouseenter','.manage-entry.active-entry',function(){d.cleanButtonPannel(a(this));var b=a('#contestEntryContainer'),c=!b.hasClass('restricted-contest-entries')&&a(this).hasClass('contest-entry-highlight-option');c?a(this).find('.entry-hover-wrap').addClass('button-panel2').append(a(templateEntryNav()).find('a.entry-highlight, a.entry-withdraw')):a(this).find('.entry-hover-wrap').addClass('button-panel1').append(a(templateEntryNav()).find('a.entry-withdraw'))}),a('#contestEntryContainer').on('mouseenter','.manage-entry.contest-entry-rejected',function(){a(this).hasClass('contest-entry-withdrawn')||a(this).find('.entry-hover-wrap').addClass('button-panel1').append(a(templateEntryNav()).find('a.entry-withdraw'))}),a('#contestEntryContainer').on('mouseenter','.manage-entry.contest-entry-withdrawn',function(){a(this).hasClass('contest-entry-rejected')||a(this).find('.entry-hover-wrap').addClass('button-panel1').append(a(templateEntryNav()).find('a.entry-unwithdraw'))}),a('#contestEntryContainer').on('mouseenter','.manage-entry.contest-entry-winner',function(){a(this).find('.entry-hover-wrap').addClass('button-panel1').append(a(templateEntryNav()).find('a.entry-handover'))}),a('#contestEntryContainer').on('mouseleave','.contest_entry',function(){d.cleanButtonPannel(a(this)),a(this).children('.entry-hover-wrap').empty()}),d.initRating(),a('#contestEntryContainer').on('click','.star-rating:not(.star-rating-readonly)',function(b){if(isUserContest){var c=a(b.target).text(),e=a(b.target).closest('.radio_option'),f=e.data('entry-id');d.submitEntryRating(f,c,e)}}),a('#contestEntryContainer').on('mouseenter','.entry-like-grid-view',function(a){a.stopPropagation(),d.setLikeHoverText(this)}),a('#contestEntryContainer').on('mouseleave','.entry-like-grid-view',function(b){var c=a(this).data('numLikes');d.setLikeText(this,c)}),a('#contestEntryContainer').on('click','.entry-like-grid-view',function(a){logged_in===!1?window.location=login_url:d.handleLikeClick(this)}),a('#contestEntryContainer').on('mouseenter','.contest-upgrade-icon',function(a){a.stopPropagation()}),a('#contestEntryContainer').on('mouseleave','.contest-upgrade-icon',function(a){a.stopPropagation()}),a('#sort').change(function(){d.resort()}),a('.entry-filters li').on('click',function(){a('.entry-filters li').each(function(){a(this).removeClass('active')}),a(this).addClass('active'),a('#filter').val(a(this).data('value')),d.setPageNum(0),d.refilter()});var z={id:projectId,upgrades:{},prizeInUSD:0};typeof f!='undefined'&&(z.upgrades=f),typeof prizeInUSD!='undefined'&&(z.prizeInUSD=prizeInUSD);var B=!c&&!isUsingDS;j.init({hashtagsEnabled:B},z),B&&(isUserContest?j.on('hashtagClicked',function(b){if(b.type==='upgrade'||b.type==='prize')m.showUpgradeForm(b.value?[b.value]:null),a('html, body').animate({scrollTop:a('#upgradeContestContainer').offset().top-100},'fast')}):j.on('hashtagPosted',function(a){_t.push(['user_action',{section:'ContestViewPage',subsection:'PCB',label:a.label,action:'Posted'}])})),a('#publishDraftContainer').on('click','.draft-contest-link',function(){var a={publishContestFn:y};g.initModal({amount:total_cost,currencyDetails:{id:currency.id,sign:currency.sign,code:currency.code}},function(a){a.publishContestFn()},a,function(a){},a,{},{})}),l.init(),isUsingDS||n.init(),k.init(),!isUserContest&&window.location.hash=='#submit-entry'&&d.toggleSubmit()}function x(c){if(typeof c=='undefined')return;a.ajax({type:'post',data:{currency:currency.id},url:'/ajax/payment/getUserPaymentMethodInfo.php',dataType:'json',success:function(d){if(d.status=='success'){var e={};d.firstAvailablePaymentMethod||c.required_deposit<=0?e={needs_deposit:!1,amount:c.total_cost_formatted}:e={needs_deposit:!0,amount:c.required_deposit_formatted},e.freelancerCount=total_freelancers;var f=b.template(o,e);a('#publishDraftContainer').html(f)}},error:function(){}})}function y(){window.location.href='/contest/publish.php?project_id='+projectId}function z(a){v=a}function A(){switch(contestStatus){case'1':_gaq.push(['_trackEvent','contest_pageview','state','DRAFT']);break;case'3':_gaq.push(['_trackEvent','contest_pageview','state','PENDING']);break;case'4':_gaq.push(['_trackEvent','contest_pageview','state','CLOSED']);break;default:_gaq.push(['_trackEvent','contest_pageview','state','ACTIVE'])}}var v='';return{initDraftPaymentDetails:x,init:w,setHighlightFee:z}})