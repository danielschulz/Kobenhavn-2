/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.1
 *
 */
define('jquery-wrapper',[],function(){return jQuery}),define('update_onlineuser_status',['jquery-wrapper'],function(a){function d(){a.ajax({type:'POST',data:{cachetimeout:b,location:''+window.location},url:'/users/onUpdateOnlineStatus.php',dataType:'text'}).done(function(a){a.indexOf('faster')>=0&&(b=5,window.clearTimeout(c),c=setTimeout(d,b*1e3))}),c=setTimeout(d,b*1e3)}var b=120,c=null;return d}),define('underscore-wrapper',['jquery-wrapper'],function(a){return _}),define('backbone-wrapper',['jquery-wrapper','underscore-wrapper'],function(a,b){return Backbone}),define('pinky/fixer',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=b.extend({},c.Events);return d.bind('fixer:fix',function(b){a(document).ready(function(){b?(a('#pinky-navigation-header .secondary-nav').show(),a('#user-nav').attr('data-state','show'),a('#user-login').attr('data-state','hidden')):(a('#pinky-navigation-header .secondary-nav').hide(),a('#user-nav').attr('data-state','hidden'),a('#user-login').attr('data-state','show'))})}),{events:d}}),define('collection',['backbone-wrapper'],function(){var a=function(){var a=function(a){if(a.target===undefined)throw{name:'TargetUndefined',message:'You must supply a target object'};if(a.criteria===undefined)throw{name:'criteriaUndefined',message:'You must supply a criteria function'};if(!_.isFunction(a.criteria))throw{name:'criteriaNotFunction',message:'You must supply a criteria function'}},b=function(a,b){b.target.bind('add',function(b,c){if(a.criteria(b)){var d=this.getByCid(b);d||this.add(b)}},b),b.target.bind('remove',function(a){var b=this;b.remove(a)},b),b.target.bind('reset',function(a){var b=this;b.reset()},b)},c=function(a,b){var c,d,e=function(b){a.criteria(b)?this.getByCid(b.cid)===undefined&&this.add(b):this.remove(b)};if(a.changes==='all'){b.target.bind('change',e,b);return}a.changes instanceof Array||(a.changes=[a.changes]),d=a.changes.length;for(c=0;c<d;c++)b.target.bind('change:'+a.changes[c],e,b)};return function(d){var e=d.filterObject||new Backbone.Collection;a(d),d.changes===undefined&&(d.changes='all'),e.target=d.target,e.model=e.target;if(d.opts!==undefined)for(opt in d.opts)d.opts.hasOwnProperty(opt)&&(e[opt]=d.opts[opt]);return b(d,e),c(d,e),e}}();return a}),define('freelancer-wrapper',[],function(){return freelancer}),function(a){var b=function(a){function h(){d=!1;for(var c=0;c<b.length;c++){var e=a(b[c]).filter(function(){return a(this).is(':appeared')});e.trigger('appear',[e]);if(g){var f=g.not(e);f.trigger('disappear',[f])}g=e}}var b=[],c=!1,d=!1,e={interval:250,force_process:!1},f=a(window),g;a.expr[':'].appeared=function(b){var c=a(b);if(!c.is(':visible'))return!1;var d=f.scrollLeft(),e=f.scrollTop(),g=c.offset(),h=g.left,i=g.top;return i+c.height()>=e&&i-(c.data('appear-top-offset')||0)<=e+f.height()&&h+c.width()>=d&&h-(c.data('appear-left-offset')||0)<=d+f.width()?!0:!1},a.fn.extend({appear:function(f){var g=a.extend({},e,f||{}),i=this.selector||this;if(!c){var j=function(){if(d)return;d=!0,setTimeout(h,g.interval)};a(window).scroll(j).resize(j),c=!0}return g.force_process&&setTimeout(h,g.interval),b.push(i),a(i)}}),a.extend({force_appear:function(){return c?(h(),!0):!1}})}(a);return define('pinky/utils/jquery.appear',['jquery-wrapper'],b)}(jQuery),define('pinky/stickBarPlugin/generalStickyBar',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.View.extend({el:'body',$defaultHeader:null,events:{'appear #pinky-navigation-header':'hideStickyBar','disappear #pinky-navigation-header':'showStickyBar'},hideStickyBar:function(){this.$defaultHeader.attr('data-state')=='sticky'&&(this.$defaultHeader.attr('data-state','static'),a('#user-balance').popover('hide'))},showStickyBar:function(){this.$defaultHeader.attr('data-state')=='static'&&(this.$defaultHeader.attr('data-state','sticky'),a('#user-balance, #user-profile, #user-gamification').popover('hide'))},render:function(){return a(this.el).find('#pinky-navigation-header').appear({force_process:!0}),this.$defaultHeader=a(this.el).find('#default-header'),a(this.el).find('#pinky-navigation-header').is(':appeared')||this.showStickyBar(),this}});return d}),define('pinky/stickBarPlugin/hiremeStickyBar',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.View.extend({el:'body',$defaultHeader:null,$hiremeForm:null,events:{'appear #pinky-navigation-header':'hideStickyBar','disappear #pinky-navigation-header':'showStickyBar','click #hireme-btn':'hireme','click #sticky-reviews':'showReview'},hideStickyBar:function(){this.$defaultHeader.attr('data-state')=='sticky'&&this.$defaultHeader.attr('data-state','hidden')},showStickyBar:function(){this.$defaultHeader.attr('data-state')=='hidden'&&this.$hiremeForm.is(':hidden')&&this.$defaultHeader.attr('data-state','sticky')},hireme:function(){_ttref.push(['_trackEvent','HireMe','Main','click_navbar']),clickFromNavBar=!0;var b=a('#hiremeBtn');b.length&&(b.click(),this.hideStickyBar()),clickFromNavBar=!0},showReview:function(){a('#rating_data_tab').click()},render:function(){return a('#sticky-header').after(jQuery('#hireMeStickyBarTemplate').html()),a(this.el).find('#pinky-navigation-header').appear({force_process:!0}),this.$hiremeForm=a(this.el).find('#hireme-form-container'),this.$defaultHeader=a('#sticky-hireme'),a(this.el).find('#pinky-navigation-header').is(':appeared')||this.showStickyBar(),this}});return d}),define('pinky/stickBarPlugin/refProjectStickyBar',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.View.extend({el:'body',$defaultHeader:null,events:{'appear #pinky-navigation-header':'hideStickyBar','disappear #pinky-navigation-header':'showStickyBar','click #award-btn':'award','click #sticky-reviews':'showReview','click #chat-btn':'chat'},hideStickyBar:function(){this.$defaultHeader.attr('data-state')=='sticky'&&this.$defaultHeader.attr('data-state','hidden')},showStickyBar:function(){this.$defaultHeader.attr('data-state')=='hidden'&&this.$defaultHeader.attr('data-state','sticky')},award:function(){_ttref.push(['_trackEvent','Award','Main','click_navbar']),clickFromNavBar=!0;var b=a('.open-ar-confirm:first');b.length&&b.click(),clickFromNavBar=!0},chat:function(){var b=a('.startChat:first');b.length&&b.click()},showReview:function(){a('#rating_data_tab').click()},render:function(){return a('#sticky-header').after(jQuery('#refProjectStickyBarTemplate').html()),a(this.el).find('#pinky-navigation-header').appear({force_process:!0}),this.$defaultHeader=a('#sticky-award'),a(this.el).find('#pinky-navigation-header').is(':appeared')||this.showStickyBar(),this}});return d}),define('pinky/stickBarPlugin/networkStickyBar',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c){var d=c.View.extend({el:'body',$defaultHeader:null,events:{'click #header-network-toggle':'toggle'},toggle:function(){this.$defaultHeader.attr('data-state')=='hidden'?this.$defaultHeader.attr('data-state','visible'):this.$defaultHeader.attr('data-state','hidden')},render:function(){return this.$defaultHeader=a(this.el).find('#freelancer-network'),this}});return d}),define('tracking/ga-session',[],function(){function a(){this.user_type=null,this.has_project_or_contest=null,this.has_bid_or_entry=null,this.membership_package_name=null,this.is_payment_verified_guess=null,this.sendable=!1}function b(b){a.call(this),this.user_type=b.data.usertype;switch(b.data.usertype){case'B':this.user_type='Buyer';break;case'S':this.user_type='Seller';break;default:this.user_type='None'}switch(b.data.hasProjectOrContest){case!0:this.has_project_or_contest='True';break;case!1:this.has_project_or_contest='False';break;default:this.has_project_or_contest='None'}switch(b.data.hasBidOrEntry){case!0:this.has_bid_or_entry='True';break;case!1:this.has_bid_or_entry='False';break;default:this.has_bid_or_entry='None'}typeof b.data.userHeader!='undefined'&&b['data']['userHeader']['membership']!=null?this.membership_package_name=b.data.userHeader.membership:this.membership_package_name='None';switch(b.data.isPaymentVerifiedGuess){case!0:this.is_payment_verified_guess='True';break;case!1:this.is_payment_verified_guess='False';break;default:this.is_payment_verified_guess='None'}b['data']['hashedUserId']!=null&&b['data']['hashedUserId']!=''&&'localStorage'in window&&localStorage.setItem('ga-session.hashedUserId',b.data.hashedUserId)}function c(){a.call(this),this.user_type='Logged Out',this.has_project_or_contest='Logged Out',this.has_bid_or_entry='Logged Out',this.membership_package_name='Logged Out',this.is_payment_verified_guess='Logged Out','localStorage'in window&&localStorage.removeItem('ga-session.hashedUserId')}return a.prototype.dispatch=function(){this.check(),this.sendable&&'dataLayer'in window?(window.dataLayer.push({'user.user_type':this.user_type}),window.dataLayer.push({'user.has_project_or_contest':this.has_project_or_contest}),window.dataLayer.push({'user.has_bid_or_entry':this.has_bid_or_entry}),window.dataLayer.push({'user.membership_name':this.membership_package_name}),window.dataLayer.push({'user.isPaymentVerifiedGuess':this.is_payment_verified_guess}),window.dataLayer.push({event:'user_data_defined'})):window.console&&console.log('You must have called check() before sending.'),this.sendable&&'dataLayerNew'in window?(window.dataLayerNew.push({'user.user_type':this.user_type}),window.dataLayerNew.push({'user.has_project_or_contest':this.has_project_or_contest}),window.dataLayerNew.push({'user.has_bid_or_entry':this.has_bid_or_entry}),window.dataLayerNew.push({'user.membership_name':this.membership_package_name}),window.dataLayerNew.push({'user.isPaymentVerifiedGuess':this.is_payment_verified_guess}),window.dataLayerNew.push({event:'user_data_defined'})):window.console&&console.log('You must have called check() before sending.')},a.prototype.check=function(){var a=!0;if(this.user_type==null||this.user_type!='Seller'&&this.user_type!='Buyer'&&this.user_type!='None'&&this.user_type!='Logged Out')window.console&&console.error('User type must be defined correctly'),a=!1;if(this.has_project_or_contest==null||this.has_project_or_contest!='True'&&this.has_project_or_contest!='False'&&this.has_project_or_contest!='None'&&this.has_project_or_contest!='Logged Out')window.console&&console.error('has_project_or_contest must be defined correctly'),a=!1;if(this.has_bid_or_entry==null||this.has_bid_or_entry!='True'&&this.has_bid_or_entry!='False'&&this.has_bid_or_entry!='None'&&this.has_bid_or_entry!='Logged Out')window.console&&console.error('has_bid_or_entry must be defined correctly'),a=!1;this.membership_package_name==null&&(window.console&&console.error('A membership package must be provided'),a=!1);if(this.is_payment_verified_guess==null||this.is_payment_verified_guess!='True'&&this.is_payment_verified_guess!='False'&&this.is_payment_verified_guess!='None'&&this.is_payment_verified_guess!='Logged Out')window.console&&console.error('is_payment_verified_guess must be defined correctly'),a=!1;a&&(this.sendable=!0)},b.prototype=new a,b.prototype.constructor=b,c.prototype=new a,c.prototype.constructor=c,{GaUserVariableHeaderLoggedIn:b,GaUserVariableHeaderLoggedOut:c,GaUserVariableBase:a}}),function(){var a=['Msxml2.XMLHTTP','Microsoft.XMLHTTP','Msxml2.XMLHTTP.4.0'],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!='undefined'&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,''),f=d&&location.hostname,g=d&&(location.port||undefined),h=[];define('text',[],function(){var i,j;return i={version:'1.0.8',strip:function(a){if(a){a=a.replace(b,'');var d=a.match(c);d&&(a=d[1])}else a='';return a},jsEscape:function(a){return a.replace(/(['\\])/g,'\\$1').replace(/[\f]/g,'\\f').replace(/[\b]/g,'\\b').replace(/[\n]/g,'\\n').replace(/[\t]/g,'\\t').replace(/[\r]/g,'\\r')},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!='undefined')return new XMLHttpRequest;if(typeof ActiveXObject!='undefined')for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}return b},parseName:function(a){var b=!1,c=a.indexOf('.'),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf('!'),c!==-1&&(b=e.substring(c+1,e.length),b=b==='strip',e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=i.xdRegExp.exec(a),f,g,h;return e?(f=e[2],g=e[3],g=g.split(':'),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===d)):!0},finishLoad:function(a,b,c,d,e){c=b?i.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText){c();return}var j=i.parseName(a),k=j.moduleName+'.'+j.ext,l=b.toUrl(k),m=h&&h.text&&h.text.useXhr||i.useXhr;!d||m(l,e,f,g)?i.get(l,function(b){i.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){i.finishLoad(j.moduleName+'.'+j.ext,j.strip,a,c,h)})},write:function(a,b,c,d){if(h.hasOwnProperty(b)){var e=i.jsEscape(h[b]);c.asModule(a+'!'+b,'define(function () { return \''+e+'\';});\n')}},writeFile:function(a,b,c,d,e){var f=i.parseName(b),g=f.moduleName+'.'+f.ext,h=c.toUrl(f.moduleName+'.'+f.ext)+'.js';i.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},i.write(a,g,c,e)},e)}},i.createXhr()?i.get=function(a,b){var c=i.createXhr();c.open('GET',a,!0),c.onreadystatechange=function(a){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!='undefined'&&process.versions&&!!process.versions.node?(j=require.nodeRequire('fs'),i.get=function(a,b){var c=j.readFileSync(a,'utf8');c.indexOf('ï»¿')===0&&(c=c.substring(1)),b(c)}):typeof Packages!='undefined'&&(i.get=function(a,b){var c='utf-8',d=new java.io.File(a),e=java.lang.System.getProperty('line.separator'),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(d),c)),g,h,i='';try{g=new java.lang.StringBuffer,h=f.readLine(),h&&h.length()&&h.charAt(0)===65279&&(h=h.substring(1)),g.append(h);while((h=f.readLine())!==null)g.append(e),g.append(h);i=String(g.toString())}finally{f.close()}b(i)}),i})}(),define('text!templates/pinky/userProfilePopover.htm',[],function(){return'<figure id="profile-figure" class="profile-img">\n    <img class="user-nav-profile-img" src="<%= logo %>">\n</figure>\n<div class="user-nav-name">\n    <div class="user-name-link"><%- username %></div>\n</div>\n'}),define('text!templates/pinky/userLogout.htm',[],function(){return'<div class="user-nav-logout">\n    <div class="user-nav-logout-info">\n        <a class="user-nav-profile-bt" href="/me/"><strong><%- T_("Welcome <[- username ]>", {username: username}) %></strong></a>\n        <a class="user-nav-membership" href="/membership/index.php?ref=nav_header"><%- T_("<[- membership ]> member", {membership: membership}) %></a>\n        <% if (isPlusTrialEligible) { %>\n            <a href="/payments/verify.php?TrialUpsell2=true&ref=nav_header_promo" class="btn btn-success btn-small user-upsell-trial-membership-bt">\n                <%=T_("Free 30-Day Trial!")%>\n            </a>\n        <% } else if (isBasicTrialEligible) { %>\n            <a href="/membership/trial.php?membership_package_id=2&ref=7DT_navheader" class="btn btn-success btn-small user-upsell-trial-membership-bt">\n                <%=T_("Free 7-Day Trial!")%>\n            </a>\n        <% } %>\n    </div>\n    <a class="user-nav-edit-bt" href="/users/settings.php"><%- T_("Edit Settings") %></a>\n    <a class="user-nav-logout-bt" href="/users/onsignout.php"><%- T_("Logout") %></a>\n</div>\n'}),define('text!templates/pinky/userBalancePopover.htm',[],function(){return'<span class="user-balance-currency"><%- data.code%></span>\n<span class="user-balance-total"><%- data.sign%><%- data.balance%></span>\n'}),define('text!templates/pinky/userBalance.htm',[],function(){return'<ul class="user-balance-list">\n    <% _.each(data, function(element) { %>\n        <li class="user-balance-item"><span class="user-balance-code"><%- element.code%></span><span class="user-balance-value"><%- element.sign%><%- element.balance%></span></li>\n    <% }) %>\n</ul>\n<a class="user-balance-transaction-bt" href="/payments/transactions.php"><strong><%- T_("View Transactions") %></strong></a>\n\n<div class="user-balance-deposit"><a href="/payments/deposit.php" class="btn btn-info btn-small user-balance-deposit-bt"><strong><%- T_("Deposit Funds") %></strong></a></div>\n'}),define('text!templates/pinky/userGamificationPopover.htm',[],function(){return'<span class="user-xp-level"><%- T_("Lvl") %><span class="user-xp-level-number"> <%- level %></span></span>\n    <div id="user-xp-progress" class="progress-bar-wrapper">\n        <progress class="progress-bar" value="<%- xp %>" max="<%- total %>" data-target="user-xp-progress-bar">\n            <div class="progress-bar-fallback">\n                <div class="progress-bar-fallback-value" style="width: <%- xpWidth %>px;"></div>\n            </div>\n        </progress>\n    </div>\n'}),define('text!templates/pinky/userGamification.htm',[],function(){return'<div class="game-dropdown">\n    <div class="game-dropdown-stat-wrapper">\n        <div class="gamification-dropdown-level">\n            <%- T_("Level <[- Level ]>", {Level: data.userXP.Level}) %>\n        </div>\n        <div class="gamification-dropdown-rank">\n            <%- data.userXP.Rank %>\n        </div>\n        <div id="hover-xp-progress" class="progress-bar-wrapper">\n            <progress class="progress-bar" value="<%- data.userXP.LevelProgress %>" max="<%- data.userXP.LevelTotal %>">\n                <div class="progress-bar-fallback">\n                    <div class="progress-bar-fallback-value"></div>\n                </div>\n            </progress>\n        </div>\n        <div class="game-dropdown-stat">\n            <div class="game-dropdown-xp-icon"></div>\n            <% if (data.userXP.NextLevel) { %>\n                <div class="game-dropdown-xp-total"><%- data.userXP.NextLevelXP - data.userXP.XP %></div>\n                <div class="game-dropdown-xp-title"><%- T_("to Level <[- NextLevel ]>", {NextLevel: data.userXP.NextLevel }) %></div>\n            <% } else { %>\n                <div class="game-dropdown-xp-title"><%- T_("Level <[- Level ]>", {Level: data.userXP.Level}) %></div>\n            <% } %>\n        </div>\n        <div class="game-dropdown-stat">\n            <div class="game-dropdown-credits-icon"></div>\n            <div class="game-dropdown-credits-total"><%- data.userXP.CreditBalance %></div>\n            <div class="game-dropdown-credits-title"><%- T_("Credits") %></div>\n        </div>\n    </div>\n    <div class="game-dropdown-rewards-wrapper">\n        <div class="game-dropdown-rewards">\n            <strong class="game-popover-heading"><%- T_("Active Rewards") %></strong>\n            <ul id="game-active-rewards" class="game-popover-active-rewards">\n                <% if (data.userXP.ValidMembership) {\n                    if (_.size(data.active_items) + _.size(data.perks) > 0) { %>\n                        <% _.each(data.active_items, function(element) { %>\n                            <li>\n                                <div class="reward-icon" data-reward="<%- element.iconlarge %>"></div>\n                            </li>\n                        <% }); %>\n                        <% _.each(data.perks, function(element) { %>\n                            <li>\n                                <div class="reward-icon" data-reward="<%- element.icon %>"\n                                    data-reward="<%- element.icon %>" data-toggle="tooltip" title="<%- element.description %>">\n                                    <span class="reward-expiry-time"><%- element.symbol %><%- element.magnitude%> </span>\n                                </div>\n                            </li>\n                        <% }); %>\n                 <% } else { %>\n                        <%= T_("No active rewards available. <a href=\'/users/game/index.php?current_tab=rewards\'>Click here to view all rewards</a>") %>\n                 <% }\n                } else { %>\n                        <% if (data.perks.length) {\n                            _.each(data.perks, function(element) { %>\n                            <% if (typeof(element.icon) != \'undefined\' && typeof(element.description) != \'undefined\' &&\n                                   typeof(element.symbol) != \'undefined\' && typeof(element.magnitude) != \'undefined\' &&\n                                   element.icon != \'undefined\' && element.description != \'undefined\' &&\n                                   element.symbol != \'undefined\' && element.magnitude != \'undefined\') { %>\n                                <li>\n                                    <div class="reward-icon reward-inactive"\n                                        data-reward="<%- element.icon %>" data-toggle="tooltip" title="<%- element.description %>">\n                                        <span class="reward-expiry-time"><%- element.symbol %><%- element.magnitude %></span>\n                                    </div>\n                                </li>\n                            <% } %>\n                        <% });\n                        } else { %>\n                        <% } %>\n                        <span class="membership-upsell-note">\n                            <%= T_("Membership is required to <a href=\'/users/game/index.php?current_tab=rewards\'>unlock rewards</a>.") %>\n                        </span>\n                        <% if (data.userXP.isFreeTrialEligible ) { %>\n                            <a href="/payments/verify.php?TrialUpsell2=true&ref=rewards_header_promo" class="btn btn-mini btn-info user-upgrade-membership-bt">\n                                <%= T_("Upgrade Membership! <br> Free 30-Day Trial") %>\n                            </a>\n                        <% } else { %>\n                            <a href="/membership/index.php?ref=rewards_dropdown" class="btn btn-mini btn-info user-upgrade-membership-bt">\n                                <%= T_("Upgrade membership now") %>\n                            </a>\n                        <% } %>\n                <% } %>\n            </ul>\n        </div>\n        <div class="game-dropdown-objectives">\n            <h4 class="game-objectives-heading popover-heading"><%- T_("Your Next Objectives") %></h4>\n            <ul id="game-objectives" class="game-popover-objectives">\n                <% _.each(data.objectives, function(element) { %>\n                <li>\n                    <a href="<%- element.url %>" class="game-popover-objectives-link"><%- element.message %></a>\n                    <span class="xp-bubbles" <% if (element.extra_descr) { %>data-toggle="tooltip" title="<%- T_("Variable XP") %>"<% } %>>\n                        <% if (element.extra_descr) { %>\n                        +?? XP\n                        <% } else { %>\n                        +<%- element.xp %> XP\n                        <% } %>\n                    </span>\n                </li>\n                <% }); %>\n            </ul>\n        </div>\n        <a class="popover-more-link" href="/users/game/index.php?current_tab=overview"><strong><%- T_("View My Rewards") %></strong></a>\n    </div>\n</div>\n'}),define('text!templates/pinky/domainSwitcher.htm',[],function(){return'<div class="popover fade top domain-switcher-country-popover">\n    <div class="arrow"></div>\n        <h2 class="popover-title"><%- T_("Select country site") %></h2>\n        <div class="popover-content">\n            <% _.each(cols, function(col, i) { %>\n            <div class="domain-switcher-col">\n                <% _.each(col.domains, function(region, i) { %>\n                <div class="domain-switcher-region">\n                    <h3 class="domain-switcher-region-title"><%- region.name %></h3>\n                    <ul class="domain-switcher-countries">\n                        <% _.each(region.domains, function(country, j) { %>\n                            <li>\n                                <a class="domain-switcher-toggle" href="<%= country.url %>" >\n                                    <span class="small-flag <%- country.short_name %>"></span><%- country.name %>\n                                </a>\n                            </li>\n                        <% }); %>\n                    </ul>\n                </div>\n                <% }); %>\n            </div>\n            <% }); %>\n        </div>\n        <div class="domain-switcher-language">\n                <label for="language-selector" class="domain-switcher-language-title"><strong><%- T_("Language") %>:</strong></label>\n                <select id="language-selector" class="domain-switcher-language-selector small-select">\n                    <% _.each(languages, function(language, i) { %>\n                        <option value="<%- language.code %>"><%- language.name %></option>\n                    <% }); %>\n                </select>\n        </div>\n    </div>\n</div>\n'}),define('text!templates/pinky/userLanguage.htm',[],function(){return' <a class="location-selector-bt">\n    <span class="selected-flag icon-flag-<%- country.flag %>"></span>\n    <span class="selected-country"><%- country.name %></span>\n    <span class="selected-language"><%- language %></span>\n</a>\n'}),define('text!templates/pinky/userHelp.htm',[],function(){return'<a class="user-help-sublink" href="/info/how-it-works.php" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > How Freelancer Works\']);"><%- T_("How Freelancer.com Works") %></a>\n<a class="user-help-sublink" href="/info/lookingforworkers.php" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > Looking for Workers\']);"><%- T_("Looking for Workers?") %></a>\n<a class="user-help-sublink" href="/info/lookingforwork.php" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > Looking for Work\']);"><%- T_("Looking for Work?") %></a>\n<a class="user-help-sublink" href="/faq/view.php" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > FAQ\']);"><%- T_("Frequently Asked Questions") %></a>\n<a class="user-help-sublink" href="/news/articles.html" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > Howtos and Articles\']);"><%- T_("How-To\'s & Articles") %></a>\n<a class="user-help-sublink" href="/users/helpdesk.php" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > Support Desk\']);" target="_blank">\n    <%- T_("Support Desk") %>\n</a>\n<a class="user-help-sublink" href="/feesandcharges" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > Fees & Charges\']);"><%- T_("Fees & Charges") %></a>\n<a class="user-help-sublink" href="/info/contact-us.php" onclick="_gaq.push([\'_trackEvent\', \'HeaderMenu\', \'click\', \'Help > Contact us\']);"><%- T_("Contact Us") %></a>\n'}),define('text!templates/announcements/new-language.htm',[],function(){return'<div id="default-language-announce">\n    <p><%- flns.config.site_name %> is now available in <%- domain.name %>!</p>\n    <div class="actions">\n        <a href="#" onclick="return false;" class="btn btn-primary btn-switch-to-domain-language" data-language="<%- domain.code %>">\n            Switch to <%- domain.name %>\n        </a>\n        <a href="#" onclick="return false;" class="close btn btn-dismiss-domain-language" data-domain="<%- flns.config.cookie_domain %>">\n            No thanks\n        </a>\n        <img src="<%= cdn_url(\'/img/ajax-loader.gif\') %>" class="loading" style="display:none"/>\n    </div>\n</div>\n'}),define('text!templates/pinky/trialUpsell.htm',[],function(){return'<a class="secondary-nav-sublink trial-upsell" href="/membership/index.php?ref=submenu_trial"><%- T_("Free Membership Trial") %></a>\n'}),define('text!templates/pinky/stickyBar/sticky-post-project.htm',[],function(){return'<div id="sticky-post-project" class="sticky-post-project" data-state="hidden">\n  <div class="sticky-post-project-content">\n    <a href="/" class="sticky-post-project-logo <% if (onFreemarket) { %>freemarket-logo<% } %>"></a>\n    <% if (!hideForm) { %>\n      <form class="sticky-post-project-form" id="sticky-post-project-form" action="/buyers/create.php" method="GET">\n        <strong class="sticky-post-project-cta" id="sticky-post-project-cta"><%- T_("Need some work done?") %></strong>\n        <select id="skill_category-fixed" class="sticky-skill-category-select small-select" name="skill_category">\n          <option value="-1" selected=""><%- T_("Select a Category") %></option>\n          <option value="1"><%- T_("Websites IT & Software") %></option>\n          <option value="2"><%- T_("Mobile") %></option>\n          <option value="3"><%- T_("Writing") %></option>\n          <option value="4"><%- T_("Design") %></option>\n          <option value="5"><%- T_("Data Entry") %></option>\n          <option value="6"><%- T_("Product Sourcing & Manufacturing") %></option>\n          <option value="7"><%- T_("Sales & Marketing") %></option>\n          <option value="8"><%- T_("Business, Accounting & Legal") %></option>\n        </select><select id="skill_subcategory-fixed" class="sticky-skill-subcategory-select small-select is-hidden" name="skill_subcategory"></select><button id="sticky-post-project" class="btn btn-primary btn-small sticky-post-project-bt" onclick="javascript:_ttref.push([\'_setCookie\', \'PostProject_DropdownNotLogged\']);"><%- T_("Post a project") %></button>\n      </form>\n    <% } %>\n    <div class="sticky-post-project-login">\n      <a id="login-normal" class="btn btn-plain-alt btn-small sticky-post-project-login-bt" href="#header-login-modal" role="button" data-toggle="modal"><%- T_("Login") %></a><a id="sign-up" class="btn btn-success btn-small sticky-post-project-signup-bt" href="/users/signup.php"><%- T_("Signup") %></a>\n    </div>\n  </div>\n</div>\n'}),define('pinky/stickBarPlugin/postProjectStickyBar',['jquery-wrapper','underscore-wrapper','backbone-wrapper','text!templates/pinky/stickyBar/sticky-post-project.htm'],function(a,b,c,d){var e=c.View.extend({el:'body',$defaultHeader:null,events:{'appear #pinky-navigation-header':'hideStickyBar','disappear #pinky-navigation-header':'showStickyBar','change #skill_category-fixed':'showSubCategory','click #sticky-post-project':'postProject'},hideStickyBar:function(){this.$defaultHeader.attr('data-state')=='sticky'&&this.$defaultHeader.attr('data-state','hidden')},showStickyBar:function(){this.$defaultHeader.attr('data-state')=='hidden'&&this.$defaultHeader.attr('data-state','sticky')},showSubCategory:function(){var b=this,c=jQuery(this.el).find('#skill_category-fixed').val();c!='-1'&&!isNaN(c)?jQuery.getJSON('/ajax/skill-bundle.php',{category:c},function(c){var d='';for(var e=0;e<c.length;e++)d+='<option value="'+c[e].id+'">'+c[e].name+'</option>';a(b.el).find('#skill_subcategory-fixed').removeAttr('disabled').html(d).removeClass('is-hidden'),a(b.el).find('#sticky-post-project-form').attr('data-state','choose-subcategory')}):jQuery(b.el).find('#skill_subcategory-fixed').attr('disabled','disabled').addClass('is-hidden')},postProject:function(){a(this.el).find('#post-fixed').submit()},render:function(c){var e=b.template(d,c);return a('#sticky-post-project').remove(),a('#sticky-header').after(e),a(this.el).find('#pinky-navigation-header').appear({force_process:!0}),this.$defaultHeader=a('#sticky-post-project'),a(this.el).find('#pinky-navigation-header').is(':appeared')||this.showStickyBar(),a('#sticky-header').attr('data-state','hidden'),this}});return e}),define('pinky/stickyBar',['jquery-wrapper','pinky/utils/jquery.appear','pinky/stickBarPlugin/generalStickyBar','pinky/stickBarPlugin/postProjectStickyBar','pinky/stickBarPlugin/hiremeStickyBar','pinky/stickBarPlugin/refProjectStickyBar','pinky/stickBarPlugin/networkStickyBar'],function(a,b,c,d,e,f,g){var h=function(b){a(document).ready(function(){var h=new g;h.render();if(typeof hideStickyNav!='undefined'&&hideStickyNav===!0)return;var i=window.location.search.indexOf('ref_project_id')!=-1;if(typeof stickyBarType!='undefined'&&stickyBarType==='hireme'&&!i)if(!b||userId!=getUserIdfromCookie()&&profile_award_project!='1'){var j=new e;j.render()}else{var k=new c;k.render()}else if(b)if(i){var l=new f;l.render()}else{var k=new c;k.render()}else{var m=a('#sticky-header').data('simple-sticky'),n=a('#sticky-header').data('freemarket'),o=new d;o.render({hideForm:m,onFreemarket:n})}})};return{build:h}}),define('text!templates/header-announcements.htm',[],function(){return'<div class="pinky-template">\n    <div class="global-announcement <%- classname || \'\' %>" style="display: none">\n        <div class="wrap"></div>\n    </div>\n</div>\n'}),define('header-announcements',['jquery-wrapper','underscore-wrapper','text!templates/header-announcements.htm'],function(a,b,c){var d=Backbone.View.extend({el:'#global-announcement-container',initialize:function(b){b=b||{},this.announcements=[],this.$el=a(this.el)},addOne:function(){arguments[1]instanceof Backbone.View?this.addView(arguments[0],arguments[1]):this.addTemplate.apply(this,arguments)},addTemplate:function(a,b,c,d){var e=new f({model:c||{}});e.setTemplate(b),this.addView(a,e),typeof d=='function'&&d(e.el)},addView:function(a,b){var c=new e({name:a,subView:b});this.announcements.push(c),c.renderAt(this.$el)},render:function(){this.$el.empty();for(var a=this.announcements.length-1;a>=0;a--)announcements.hide(),this.$el.append(this.announcements[a]),announcements.show()}}),e=Backbone.View.extend({template:b.template(c),events:{'click .close':'dismiss'},initialize:function(b){return b=b||{},this.className=b.name||'',this.subView=b.subView||new Backbone.View,this.$el=a(this.el),this},render:function(){return this.$el.html(this.template({classname:this.className})),this.subView.el=this.$el.find('.wrap')[0],this.subView.delegateEvents(),this.subView.render(),this},renderAt:function(a){return this.$el.appendTo(a),this.render(),this.show(),this},dismiss:function(){this.hide('fast',function(){this.remove()})},show:function(a,b){this.$el.find('.global-announcement').slideDown(a,b)},hide:function(a,b){this.$el.find('.global-announcement').slideUp(a,b)}}),f=Backbone.View.extend({template:function(){return''},render:function(){a(this.el).html(this.template(this.model))},setTemplate:function(a){this.template=b.template(a)}}),g=new d;return g}),function(a){jQuery.fn.extend({slimScroll:function(b){var c={width:'auto',height:'250px',size:'7px',color:'#000',position:'right',distance:'1px',start:'top',opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:'#333',railOpacity:.2,railDraggable:!0,railClass:'slimScrollRail',barClass:'slimScrollBar',wrapperClass:'slimScrollDiv',allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:'7px',railBorderRadius:'7px'},d=a.extend(c,b);return this.each(function(){function x(b){if(!c)return;var b=b||window.event,e=0;b.wheelDelta&&(e=-b.wheelDelta/120),b.detail&&(e=b.detail/3);var f=b.target||b.srcTarget||b.srcElement;a(f).closest('.'+d.wrapperClass).is(p.parent())&&y(e,!0),b.preventDefault&&!n&&b.preventDefault(),n||(b.returnValue=!1)}function y(a,b,c){n=!1;var e=a,f=p.outerHeight()-v.outerHeight();b&&(e=parseInt(v.css('top'))+a*parseInt(d.wheelStep)/100*v.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),v.css({top:e+'px'})),j=parseInt(v.css('top'))/(p.outerHeight()-v.outerHeight()),e=j*(p[0].scrollHeight-p.outerHeight());if(c){e=a;var g=e/p[0].scrollHeight*p.outerHeight();g=Math.min(Math.max(g,0),f),v.css({top:g+'px'})}p.scrollTop(e),p.trigger('slimscrolling',~~e),B(),C()}function z(){window.addEventListener?(this.addEventListener('DOMMouseScroll',x,!1),this.addEventListener('mousewheel',x,!1)):document.attachEvent('onmousewheel',x)}function A(){i=Math.max(p.outerHeight()/p[0].scrollHeight*p.outerHeight(),m),v.css({height:i+'px'});var a=i==p.outerHeight()?'none':'block';v.css({display:a})}function B(){A(),clearTimeout(g);if(j==~~j){n=d.allowPageScroll;if(k!=j){var a=~~j==0?'top':'bottom';p.trigger('slimscroll',a)}}else n=!1;k=j;if(i>=p.outerHeight()){n=!0;return}v.stop(!0,!0).fadeIn('fast'),d.railVisible&&u.stop(!0,!0).fadeIn('fast')}function C(){d.alwaysVisible||(g=setTimeout(function(){(!d.disableFadeOut||!c)&&!e&&!f&&(v.fadeOut('slow'),u.fadeOut('slow'))},1e3))}var c,e,f,g,h,i,j,k,l='<div></div>',m=30,n=!1,p=a(this);if(p.parent().hasClass(d.wrapperClass)){var q=p.scrollTop();v=p.parent().find('.'+d.barClass),u=p.parent().find('.'+d.railClass),A();if(a.isPlainObject(b)){if('height'in b&&b.height=='auto'){p.parent().css('height','auto'),p.css('height','auto');var r=p.parent().parent().height();p.parent().css('height',r),p.css('height',r)}if('scrollTo'in b)q=parseInt(d.scrollTo);else if('scrollBy'in b)q+=parseInt(d.scrollBy);else if('destroy'in b){v.remove(),u.remove(),p.unwrap();return}y(q,!1,!0)}return}d.height=d.height=='auto'?p.parent().height():d.height;var s=a(l).addClass(d.wrapperClass).css({position:'relative',overflow:'hidden',width:d.width,height:d.height});p.css({overflow:'hidden',width:d.width,height:d.height});var u=a(l).addClass(d.railClass).css({width:d.size,height:'100%',position:'absolute',top:0,display:d.alwaysVisible&&d.railVisible?'block':'none','border-radius':d.railBorderRadius,background:d.railColor,opacity:d.railOpacity,zIndex:90}),v=a(l).addClass(d.barClass).css({background:d.color,width:d.size,position:'absolute',top:0,opacity:d.opacity,display:d.alwaysVisible?'block':'none','border-radius':d.borderRadius,BorderRadius:d.borderRadius,MozBorderRadius:d.borderRadius,WebkitBorderRadius:d.borderRadius,zIndex:99}),w=d.position=='right'?{right:d.distance}:{left:d.distance};u.css(w),v.css(w),p.wrap(s),p.parent().append(v),p.parent().append(u),d.railDraggable&&v.bind('mousedown',function(b){var c=a(document);return f=!0,t=parseFloat(v.css('top')),pageY=b.pageY,c.bind('mousemove.slimscroll',function(a){currTop=t+a.pageY-pageY,v.css('top',currTop),y(0,v.position().top,!1)}),c.bind('mouseup.slimscroll',function(a){f=!1,C(),c.unbind('.slimscroll')}),!1}).bind('selectstart.slimscroll',function(a){return a.stopPropagation(),a.preventDefault(),!1}),u.hover(function(){B()},function(){C()}),v.hover(function(){e=!0},function(){e=!1}),p.hover(function(){c=!0,B(),C()},function(){c=!1,C()}),p.bind('touchstart',function(a,b){a.originalEvent.touches.length&&(h=a.originalEvent.touches[0].pageY)}),p.bind('touchmove',function(a){n||a.originalEvent.preventDefault();if(a.originalEvent.touches.length){var b=(h-a.originalEvent.touches[0].pageY)/d.touchScrollStep;y(b,!0),h=a.originalEvent.touches[0].pageY}}),A(),d.start==='bottom'?(v.css({top:p.outerHeight()-v.outerHeight()}),y(0,!0)):d.start!=='top'&&(y(a(d.start).position().top,null,!0),d.alwaysVisible||v.hide()),z()}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),define('jquery-slimscroll',function(){}),function(){var a=function(a,b,c,d,e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v){return e.coms=e.coms||{},e.coms.header=new Backbone.Model,e.coms.header.set({map:{message_notification:'#message-notification',notify_tab:'#tabmanager_notify #realtime-notification, #tabmanager_live #realtime-live'}}),function(a){var d=Backbone.Model.extend({toJSON:function(){var a=c.clone(this.attributes);return a.logo=a.logo||undefined,a}}),e=Backbone.View.extend({el:'#user-profile',compileUserProfileTemplate:c.template(l),compileLogoutTemplate:c.template(m),popover_ready:!1,initialize:function(){this.render()},prepareUserPopover:function(c){var d=this.compileLogoutTemplate({username:c.username,membership:c.membership,isFreeTrialEligible:c.isFreeTrialEligible,isPlusTrialEligible:c.isPlusTrialEligible,isBasicTrialEligible:c.isBasicTrialEligible,isPaymentVerified:c.isPaymentVerified});this.loginDialog=b(this.el),this.loginDialog.popover({html:!0,placement:'bottom',trigger:'manual',content:d,animation:!1,template:'<div class="popover user-nav-profile-popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"></div></div></div>'}),this.loginDialog.on('popover:click',function(c){b(this).popover('toggle'),b('.clickover').not(this).popover('hide'),b(a.get('map').message_notification).hide(),b(a.get('map').notify_tab).hide()}),this.popover_ready=!0},prepareUserTrialUpsellAtSubmenu:function(a){b('.secondary-nav-sublink.trial-upsell').length==0&&(a.isPlusTrialEligible?(b('#secondary-nav-sub-profile').append('<a class="secondary-nav-sublink dropdown-hl trial-upsell" href="/payments/verify.php?TrialUpsell2=true&ref=submenu_trial">'+T_('Free Membership Trial')+'<span class="fl-icon-checkmark"></span></a>'),b('#user-dashboard-nav-sub-profile').append('<a class="user-dashboard-nav-sublink dropdown-hl trial-upsell" href="/payments/verify.php?TrialUpsell2=true&ref=submenu_trial">'+T_('Free Membership Trial')+'<span class="fl-icon-checkmark"></span></a>'),b('.secondary-nav-sublink.trial-upsell, .user-dashboard-nav-sublink.trial-upsell').on('click',function(){_gaq.push(['_trackEvent','HeaderMenu','click','Profile &gt; Membership Trial'])})):a.isBasicTrialEligible&&(b('#secondary-nav-sub-profile').append('<a class="secondary-nav-sublink dropdown-hl trial-upsell" href="/membership/trial.php?membership_package_id=2&ref=7DT_submenu">'+T_('Free Membership Trial')+'<span class="fl-icon-checkmark"></span></a>'),b('#user-dashboard-nav-sub-profile').append('<a class="user-dashboard-nav-sublink dropdown-hl trial-upsell" href="/membership/trial.php?membership_package_id=2&ref=7DT_submenu">'+T_('Free Membership Trial')+'<span class="fl-icon-checkmark"></span></a>'),b('.secondary-nav-sublink.trial-upsell, .user-dashboard-nav-sublink.trial-upsell').on('click',function(){_gaq.push(['_trackEvent','HeaderMenu','click','Profile &gt; Membership Trial'])})))},preparePageIdentifier:function(a){var b=window.location.pathname,c={dashboard:jq('.secondary-nav-section:eq(0)'),myprojects:jq('.secondary-nav-section:eq(1)'),profile:jq('.secondary-nav-section:eq(2)'),inbox:jq('.secondary-nav-section:eq(3)'),finances:jq('.secondary-nav-section:eq(4)'),disputes:jq('.secondary-nav-section:eq(5)'),exams:jq('.secondary-nav-section:eq(6)'),invitefriends:jq('.secondary-nav-section:eq(7)'),freemarket:jq('.secondary-nav-section:eq(8)')},d=['/dashboard/','/dashboard/feedback.php'],e=['/dashboard/projects.php','/services/dashboard.php'],f=['/u/'+a.username+'.html','/users/settings.php','/users/game/index.php','/hireme/','/membership/index.php'],g=['/users/messages/index.php','/users/employerWatchList.php','/freelancers/'],h=['/users/financial-dash/','/payments/deposit.php','/payments/verify.php','/payments/ondemand.php','/payments/withdraw.php','/affiliates/manage/overral.php','/payments/transactions.php'],i=['/dispute/disputeslist.php','/dispute/newdispute.php'],j=['/exam/exams/index.php'],k=['/friend-invitation/inviteFriends.php'],l=['/marketplace/','/marketplace/upload.php','/marketplace/earnings.php','/marketplace/upload.php','/marketplace/store.php','/marketplace/exclusivity.php','/marketplace/my_downloads.php','/marketplace/collections.php','/marketplace/widgets/','/info/user_sales_agreement.php','/info/marketplace_user_agreement.php'];d.indexOf(b)!=-1?c.dashboard.hasClass('currentpage')||c.dashboard.addClass('currentpage'):e.indexOf(b)!=-1?c.myprojects.hasClass('currentpage')||c.myprojects.addClass('currentpage'):f.indexOf(b)!=-1?c.profile.hasClass('currentpage')||c.profile.addClass('currentpage'):g.indexOf(b)!=-1?c.inbox.hasClass('currentpage')||c.inbox.addClass('currentpage'):h.indexOf(b)!=-1?c.finances.hasClass('currentpage')||c.finances.addClass('currentpage'):i.indexOf(b)!=-1?c.disputes.hasClass('currentpage')||c.disputes.addClass('currentpage'):j.indexOf(b)!=-1?c.exams.hasClass('currentpage')||c.exams.addClass('currentpage'):k.indexOf(b)!=-1?c.invitefriends.hasClass('currentpage')||c.invitefriends.addClass('currentpage'):l.indexOf(b)!=-1&&(c.freemarket.hasClass('currentpage')||c.freemarket.addClass('currentpage'))},render:function(){var a=this.model.toJSON();return b(this.el).html(this.compileUserProfileTemplate(a)),this.popover_ready||(this.prepareUserPopover(a),this.prepareUserTrialUpsellAtSubmenu(a)),this.delegateEvents(),parseInt(a.id)%97<=48&&this.preparePageIdentifier(a),this}});a.bind('dataReady:userHeader',function(b,c){var f=new e({el:b,model:new d(c)});globalHeader=f,a.trigger('loaded:userHeader',f,f.model)})}(e.coms.header),function(a){var d=Backbone.View.extend({el:'#location-selector',initialize:function(){c.bindAll(this,'render','update'),a.bind('loaded:domainSwitcher',this.update),this.render()},update:function(){a.trigger('loaded:UserDomainAndLang',this.model)},render:function(){return this}});a.bind('dataReady:UserDomainAndLang',function(a,c){var e=new d({model:c.domain});this.trigger('loaded:UserDomainAndLang',e.model);var f=flns.config.cookie_base+'_dismiss_domain_lang';c.domain.language=='en'&&c.browser.code!='en'&&!getCookie(f)&&k.addTemplate('language-announcement',u,{domain:c.browser},function(a){b(a).on('click','.btn-switch-to-domain-language',function(){b('#language-selector').val(b(this).data('language')).trigger('change'),b(a).find('.btn').hide(),b(a).find('.loading').show()}),b(a).on('click','.btn-dismiss-domain-language',function(){setCookieToBrowser(f,!0,365,'/',b(this).data('domain'))})})})}(e.coms.header),function(a){var d=Backbone.View.extend({el:'#location-selector',compileDomainSwitcherTemplate:c.template(r),events:{'click #domain-country-selector':'toggleDomainSwitcher'},initialize:function(){a.bind('loaded:UserDomainAndLang',this.updateUserInfo),c.bindAll(this,'updateUserInfo','render'),this.render()},changeCountry:function(a){checkRedirect(flns.config.cookie_base,flns.config.cookie_domain),window.location=b(a.currentTarget).val()},updateUserInfo:function(a){var c=b('#location-selector #domain-country-selector');if(a.domain&&a.language){var d=b('#location-selector .domain-switcher-toggle[href="'+a.domain+'"]'),e=d.text(),f=d.find('span').attr('class'),g=b('#location-selector #language-selector option[value='+a.language+']').text();if(!f||f==='')f='usa';if(!e||e==='')e=T_('US (International)');if(!g||g==='')g=T_('English');b('#location-selector #chosen-country').text(e),b('#location-selector #chosen-language').text(g),b('#location-selector #language-selector').val(a.language),b('#location-selector .domain-switcher-country-flag').addClass(f)}},toggleDomainSwitcher:function(a){a.stopPropagation(),a.preventDefault(),b(this.el).find('#dc-popover-container').toggle()},changeLanguage:function(a){window.location.href='/changeLanguage.php?lang='+b(a.target).val()+'&last_page='+encodeURIComponent(window.location.pathname+window.location.search+window.location.hash)},render:function(){var a=this,c=0,d=this.options.data;for(var e=0;e<d.domains.length;e++)c<d.domains[e].domains.length&&(c=d.domains[e].domains.length);var f=[],g=null;for(var e=0;e<d.domains.length;e++)g!==null&&(g.numCountries+d.domains[e].domains.length<c?(g.domains.push(d.domains[e]),g.numCountries+=d.domains[e].domains.length):(f.push(g),g=null)),g===null&&(g={domains:[d.domains[e]],numCountries:d.domains[e].domains.length});return g!==null&&f.push(g),b(this.el).find('#dc-popover-container').html(this.compileDomainSwitcherTemplate({cols:f,languages:this.options.data.languages})).hide(),b(document).on('change','#language-selector',function(b){a.changeLanguage(b)}),b('.domain-switcher-country-label').hide(),b('.domain-switcher-container').css('display','inline-block'),this.delegateEvents(),this}});a.bind('dataReady:domainSwitcher',function(b){var c=new d({data:b});globalHeader=c,a.trigger('loaded:domainSwitcher',c,c.model)})}(e.coms.header),function(a){var d=Backbone.View.extend({el:'#user-balance',compileUserBalancePopoverTemplate:c.template(n),compileUserBalanceTemplate:c.template(o),popover_ready:!1,initialize:function(){this.render()},prepareBalancePopover:function(){var c=this.compileUserBalanceTemplate({data:this.model});b(this.el).popover({html:!0,placement:'bottom',trigger:'manual',content:c,animation:!1,template:'<div class="popover"><div class="arrow"></div><div class="popover-content"></div></div>'}),b(this.el).on('popover:click',function(c){b(this).popover('toggle'),b('.clickover').not(this).popover('hide'),b(a.get('map').message_notification).hide(),b(a.get('map').notify_tab).hide()}),this.popover_ready=!0},render:function(){return b(this.el).html(this.compileUserBalancePopoverTemplate({data:this.model[0]})),this.popover_ready||this.prepareBalancePopover(),this.delegateEvents(),this}});a.bind('dataReady:Balances',function(b,c){var e=new d({model:c,el:b});a.trigger('loaded:Balances',c)}),a.bind('loaded:Balances',function(a){})}(e.coms.header),function(a){var e=function(){var b=Backbone.Model.extend({initialize:function(){},toJSON:function(){return{perks:this.perks.toJSON(),userXP:this.userXP.toJSON(),objectives:this.objectives.toJSON()}}}),c=Backbone.Model.extend({defaults:{rejected:!1}}),e=Backbone.Model.extend({defaults:{start:0,end:5}}),g=Backbone.Model.extend({}),h=Backbone.Model.extend({initialize:function(){var b=this,c=function(){var a=b.get('LevelBase');b.set({LevelProgress:b.get('XP')-a>=0&&!b.get('CapReached')?b.get('XP')-a:a-b.get('PreviousLevelXP'),LevelTotal:b.get('NextLevelXP')-a>0?b.get('NextLevelXP')-a:a-b.get('PreviousLevelXP'),CapReached:b.get('CapReached')}),b.set({LevelPercentage:b.get('NextLevelXP')>=0&&!b.get('CapReached')?100*b.get('LevelProgress')/b.get('LevelTotal'):100})};this.bind('change:XP',c,this),this.bind('change:LevelBase',c,this),this.bind('change:NextLevelXP',c,this),c(),a.bind('credit:newBalance',function(a){this.set({CreditBalance:a})},this)},atLevelCap:function(){var a=this.get('levelCap'),b=this.get('level');return a!==undefined&&b!==undefined&&this.get('level')===this.get('levelCap')?!0:!1}}),k=Backbone.Collection.extend({model:c,initialize:function(){this.all=this,this.active=d({target:this,changes:'rejected',criteria:function(a){return a.get('rejected')===!1}}),this.rejected=d({target:this,changes:'rejected',criteria:function(a){return a.get('rejected')===!0}})}}),l=Backbone.Collection.extend({model:g}),m=new b;return a.bind('dataReady:ActiveRewardsHeader',function(a){var b;for(i in a){b=a[i];for(j=0;j<m.perks.length;j++)if(m.perks.models[j].get('type')==='item'&&parseInt(m.perks.models[j].get('id'))==parseInt(b.id)){m.perks.models[j].set({magnitude:parseInt(m.perks.models[j].get('magnitude'))+1,time:(new Date).getTime()});break}j==m.perks.length&&m.perks.add({id:b.id,name:b.name,description:b.description,symbol:'x',magnitude:1,expiry:null,time:(new Date).getTime(),icon:b.iconlarge,type:'item'})}m.perks.sort(),f.model=m,f.render()}),function(a){m.userXP=new h(a.userXP),m.objectives=new k(a.objectives),m.objectivesView=new e,a.objectives.length<5&&m.objectivesView.set({end:a.objectives.length});var b=new l,c,d=0;for(var f in a.perks){d++;if(d>4)break;c=a.perks[f],b.add({id:c.id,name:c.name,description:c.description,symbol:c.symbol,icon:c.icon,magnitude:c.magnitude,expiry:null,time:c.time,type:c.type})}return b.comparator=function(a){return-a.get('time')},b.sort(),m.perks=b,m}}(),f;(function(){var d=Backbone.View.extend({compileUserGamificationPopoverTemplate:c.template(p),compileUserGamificationTemplate:c.template(q),popover_ready:!1,initialize:function(){this.$el=b(this.el),this.model.userXP.bind('change',this.render,this),this.model.userXP.bind('change:CreditBalance',function(){a.trigger('change:CreditBalance',this.model.userXP.get('CreditBalance'))},this),this.computeProgressBarWidth()},prepareGamificationPopover:function(c){var d=this.compileUserGamificationTemplate({data:this.model.toJSON()});this.$el.popover({html:!0,placement:'bottom',trigger:'manual',content:d,animation:!1,template:'<div class="popover"><div class="arrow"></div><div class="popover-content"></div></div>'});var e=this;this.$el.on('popover:click',function(d){e.$el.popover('toggle');var f=e.$el.siblings('.popover');if(f.is(':visible')){b('.clickover').not(this).popover('hide'),b(a.get('map').message_notification).hide(),b(a.get('map').notify_tab).hide(),f.find('#game-objectives').slimscroll({height:'142px'}),f.find('#game-active-rewards .reward-icon').tooltip({delay:{show:200,hide:1},trigger:'hover'}),f.find('.xp-bubbles').tooltip({delay:{show:200,hide:1},trigger:'hover'});var g=b('#hover-xp-progress'),h=g.width(),i=Math.round(c*h/100);g.find('.progress-bar-fallback-value').width(i)}}),this.popover_ready=!0},computeProgressBarWidth:function(){var a=this;setTimeout(function(){a.render()},0)},render:function(){var a=this.model.userXP.get('LevelProgress'),c=this.model.userXP.get('LevelTotal'),d=this.model.userXP.get('LevelPercentage'),e=b('#user-xp-progress'),f=e.width(),g=Math.round(d*f/100);return this.$el.html(this.compileUserGamificationPopoverTemplate({level:this.model.userXP.get('Level'),xp:a,total:c,xpWidth:c===0?0:g})),this.popover_ready||this.prepareGamificationPopover(d),this.delegateEvents(),this}});a.bind('dataReady:IdentityBar',function(b,c){f=new d({model:e(c),el:b}),f.render(),a.trigger('loaded:IdentityBar',f,f.model.userXP),globalUserXPModel=f.model.userXP,a.trigger('loaded:UserXP',f.model.userXP),a.trigger('loaded:PerksAgg',f.model.perks)})})()}(e.coms.header),function(c){var d=Backbone.View.extend({initialize:function(){var a=this.options.data,d=this.options.userState,e=this.buildStructure();this.render(),getUserIdfromCookie()&&(c.trigger('dataReady:userHeader',e.userHeader,a.userHeader),c.trigger('dataReady:IdentityBar',e.identityBar,a.gameHeader),c.trigger('dataReady:Balances',e.balances,a.balances)),c.trigger('dataReady:UserDomainAndLang',e.domain_language,{domain:a.domain_language,browser:a.browser_language}),getUserIdfromCookie()&&d===0&&(b('#user-login').attr('data-state','show'),b('#user-nav').attr('data-state','hidden'))},buildStructure:function(){return{userHeader:b(this.el).find('#user-profile'),identityBar:b(this.el).find('#user-gamification'),balances:b(this.el).find('#user-balance')}},render:function(){return this}}),e=function(a){c.trigger('error:setup',a)},i=function(i,j){typeof i=='function'&&i(),b.ajax({url:'/ajax/pinky/header.php',cache:!1,dataType:'json',error:e,success:function(i){var k=i.data,l;if(typeof i=='undefined'&&i.status!=='success')return e(k);if(i.userState===1){if(k.userHeader===undefined||k.balances===undefined||k.gameHeader===undefined||k.gameHeader.userXP===undefined)return e('Invalid Data');flns.user_jobs=i.data.userJobs,typeof use_raw_assets=='undefined'||use_raw_assets===!1?b.getScript(updateQueryStringParam('lang',flns.assets.lang,null,cdn_url('/build/js/pinky/main-login-v2.js?v=03c91ae3296760fed1b7f44f5b463054&amp;m=2','//'))):b.getScript(updateQueryStringParam('lang',flns.assets.lang,null,cdn_url('/static/js/pinky/main-login-v2.js?v=918952b7123e5ca2a3677e1f145f13bd&amp;m=2','//'))),b(document).ready(function(){var c=new d({el:b('#'+a['page-header']),data:k,userState:i.userState});typeof j=='function'&&j()}),f.events.trigger('fixer:fix',!0),b(document).ready(function(){(new h.GaUserVariableHeaderLoggedIn(i,!1)).dispatch()})}else f.events.trigger('fixer:fix',!1),c.trigger('dataReady:UserDomainAndLang',null,{domain:k.domain_language,browser:k.browser_language}),window._adq=window._adq||[],window._adq.push({div:'adspot-header',size:1713,zone:53198}),b(document).ready(function(){(new h.GaUserVariableHeaderLoggedOut).dispatch()});g.build(i.userState);if(typeof k.showRemarketingPixel=='boolean'&&k.showRemarketingPixel===!0){adroll_adv_id='3QARESIIGBEK5CGL43JNXL',adroll_pix_id='W6DHNPOBR5FT3EZBP6QKTO',__adroll_loaded=!0;var m=document.createElement('script'),n='https:'==document.location.protocol?'https://s.adroll.com':'http://a.adroll.com';m.setAttribute('async','true'),m.type='text/javascript',m.src=n+'/j/roundtrip.js',((document.getElementsByTagName('head')||[null])[0]||document.getElementsByTagName('script')[0].parentNode).appendChild(m)}},error:function(){f.events.trigger('fixer:fix',!1)}})};i(),b.ajax({url:'/ajax/pinky/footer.php',cache:!0,dataType:'json',error:e,success:function(a){var d=a.data,f;if(typeof a=='undefined'&&a.status!=='success')return e(d);if(d.languages===undefined||d.domains===undefined)return e('Invalid Data');b(document).ready(function(){c.trigger('dataReady:domainSwitcher',{domains:d.domains,languages:d.languages})})}}),c.bind('header:reload',function(){i()}),c.bind('header:notificationUpdate',function(){i()}),c.bind('error:setup',function(){})}(e.coms.header),e},b={bs:{'template-header-user-details':'template-header-user-details','template-header-balance':'template-header-balance','template-header-game':'template-header-game','gamification-arrow':'gamification-arrow','gamification-dropdown':'gamification-dropdown','template-header-structure':'template-header-structure','page-header-welcome':'page-header-welcome','page-header-game':'user-gamification','page-header-balance':'user-balance','page-header':'pinky-header'}};define('pinky/header',['jquery-wrapper','underscore-wrapper','collection','freelancer-wrapper','pinky/fixer','pinky/stickyBar','tracking/ga-session','header-announcements','text!templates/pinky/userProfilePopover.htm','text!templates/pinky/userLogout.htm','text!templates/pinky/userBalancePopover.htm','text!templates/pinky/userBalance.htm','text!templates/pinky/userGamificationPopover.htm','text!templates/pinky/userGamification.htm','text!templates/pinky/domainSwitcher.htm','text!templates/pinky/userLanguage.htm','text!templates/pinky/userHelp.htm','text!templates/announcements/new-language.htm','text!templates/pinky/trialUpsell.htm','jquery-slimscroll'],function(){return[].unshift.call(arguments,b.bs),a.apply(this,arguments)})}();var globalUserXPModel,globalHeader;define('pinky/navigation',['jquery-wrapper','underscore-wrapper','backbone-wrapper'],function(a,b,c,d){var e=c.View.extend({el:'.header-and-nav',events:{'change .primary-nav-sub-mobile, .primary-nav-mini, .user-dashboard-nav-mobile':'redirect'},redirect:function(b){window.location=a(b.target).val()},render:function(){return this}});return e}),function(a){function f(b){this.$element=a(b),this.original_text=this.$element.html(),this.settings=a.extend({},a.fn.trunk8.defaults)}function g(){var b=this.data('trunk8'),d=b.settings,f=d.width,g=d.side,h=d.fill,i=c.getLineHeight(this)*d.lines,j=b.original_text,k=j.length,l='',m,n,o,p,q;this.html(j),q=this.text();if(f===e.auto){if(this.height()<=i)return;m=0,n=k-1;while(m<=n)o=m+(n-m>>1),p=c.eatStr(j,g,k-o,h),this.html(p),this.height()>i?n=o-1:(m=o+1,l=l.length>p.length?l:p);this.html(''),this.html(l),d.tooltip&&this.attr('title',q)}else isNaN(f)?a.error('Invalid width "'+f+'".'):(o=k-f,p=c.eatStr(j,g,o,h),this.html(p),d.tooltip&&this.attr('title',j))}var b,c,d={center:'center',left:'left',right:'right'},e={auto:'auto'};f.prototype.updateSettings=function(b){this.settings=a.extend(this.settings,b)},b={init:function(b){return this.each(function(){var c=a(this),d=c.data('trunk8');d||c.data('trunk8',d=new f(this)),d.updateSettings(b),g.call(c)})},update:function(b){return this.each(function(){var c=a(this);b&&(c.data('trunk8').original_text=b),g.call(c)})},revert:function(){return this.each(function(){var b=a(this).data('trunk8').original_text;a(this).html(b)})},getSettings:function(){return a(this.get(0)).data('trunk8').settings}},c={eatStr:function(b,e,f,g){var h=b.length,i=c.eatStr.generateKey.apply(null,arguments),j,k;if(c.eatStr.cache[i])return c.eatStr.cache[i];(typeof b!='string'||h===0)&&a.error('Invalid source string "'+b+'".');if(f<0||f>h)a.error('Invalid bite size "'+f+'".');else if(f===0)return b;typeof (g+'')!='string'&&a.error('Fill unable to be converted to a string.');switch(e){case d.right:return c.eatStr.cache[i]=a.trim(b.substr(0,h-f))+g;case d.left:return c.eatStr.cache[i]=g+a.trim(b.substr(f));case d.center:return j=h>>1,k=f>>1,c.eatStr.cache[i]=a.trim(c.eatStr(b.substr(0,h-j),d.right,f-k,''))+g+a.trim(c.eatStr(b.substr(h-j),d.left,k,''));default:a.error('Invalid side "'+e+'".')}},getLineHeight:function(b){var c=a(b).css('float');c!=='none'&&a(b).css('float','none');var d=a(b).css('position');d==='absolute'&&a(b).css('position','static');var e=a(b).html(),f='line-height-test',g;return a(b).html('i').wrap('<div id="'+f+'" />'),g=a('#'+f).innerHeight(),a(b).html(e).css({'float':c,position:d}).unwrap(),g}},c.eatStr.cache={},c.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,'')},a.fn.trunk8=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=='object'||!c)return b.init.apply(this,arguments);a.error('Method '+c+' does not exist on jQuery.trunk8')},a.fn.trunk8.defaults={fill:'&hellip;',lines:1,side:d.right,tooltip:!0,width:e.auto}}(jQuery),define('utils/trunk8',function(){}),define('pinky/mobile',['jquery-wrapper'],function(a){a(document).ready(function(){var a={$pnav_bt:jQuery('[data-target=\'touch-primary-nav-bt\']'),$user_nav_bt:jQuery('[data-target=\'touch-user-nav-bt\']'),$pnav:jQuery('[data-target=\'touch-primary-nav\']'),$user_nav:jQuery('[data-target=\'touch-user-nav\']'),$user_login:jQuery('[data-target=\'touch-user-login\']'),init:function(){this.listeners()},listeners:function(){var a=this;this.$pnav_bt.on('click',function(b){b.preventDefault(),a.toggle_menu(a.$pnav,null),a.toggle_menu(a.$user_nav,null),a.toggle_menu(a.$user_login,null),a.toggle_menu_bt(a.$pnav_bt)})},toggle_menu_bt:function(a,b){b==='open'?a.addClass('active-toggle-icon'):b==='close'?a.removeClass('active-toggle-icon'):a.toggleClass('active-toggle-icon')},toggle_menu:function(a,b){b==='open'?a.addClass('active'):b==='close'?a.removeClass('active'):a.toggleClass('active')}}.init()})}),define('pinky/api/login',['jquery-wrapper'],function(a){window.pinkyLoginAPI=window.pinkyLoginAPI||{defaultTitle:T_('Login to Freelancer.com'),defaultWelcomeMsg:'',$modal:a('#header-login-modal'),showLoginBox:function(b){b.title&&this.$modal.find('.modal-header>h3').text(b.title),b.keep===!0&&this.$modal.find('.modal-header>button').hide(),b.welcomeMsg&&this.$modal.find('#header-welcome').text(b.welcomeMsg).addClass('has-text');if(b.callbacks){pinkyHeaderAPI.registerCallback(b.callbacks);var c=navigator.userAgent.toLowerCase().indexOf('firefox')>-1;c?jq('.stayOnPage',window.frames['login-frame'].contentWindow.document).attr('value','true'):jq('.stayOnPage',window.frames['login-frame'].document).attr('value','true')}if(typeof b.persist=='undefined'||b.persist===!1){var d=this;a('#header-login-modal').off('hidden').on('hidden',function(){d.$modal.find('.modal-header>h3').text(d.defaultTitle),d.$modal.find('.modal-header #header-welcome').text('').removeClass('has-text'),d.$modal.find('.modal-header>button').show()})}b.staticBackdrop===!0&&this.$modal.modal({backdrop:'static'}),this.$modal.modal('show')}}}),require(['jquery-wrapper','pinky/fixer','pinky/api/login'],function(a,b){window.pinkyHeaderAPI=window.pinkyHeaderAPI||{callbacks:[],getCallbacks:function(){return this.callbacks},reload:function(){var c=this;a(document).ready(function(){getUserIdfromCookie()?freelancer.coms.header.trigger('header:reload'):b.events.trigger('fixer:fix',!1);for(var a=0;a<c.callbacks.length;a++)typeof c.callbacks[a]=='function'&&c.callbacks[a]()})},runCallbacks:function(){a(document).ready(function(){var a=pinkyHeaderAPI.getCallbacks();for(var b=0;b<a.length;b++)typeof a[b]=='function'&&a[b]()})},registerCallback:function(b){typeof b=='function'?this.callbacks.push(b):a.isArray(b)&&a.merge(this.callbacks,b)}}}),define('pinky/main-api',function(){}),define('pinky/facebookConnect',['jquery-wrapper','pinky/main-api'],function(){var a,b=!0,c=!0,d,e,f,g,h;if(typeof a=='undefined'){a=!0;var j;function k(){if(typeof FB=='undefined'||typeof FB.getLoginStatus=='undefined')return;FB.getLoginStatus(function(a){if(a.status!='connected')return;jq('.quick-hire-post-form').length>0&&jq('.quick-hire-post-form').is(':visible')?(jq('.quick-hire-post-form').trigger('integrateForm'),l(!0)):l(!1),m();return},!0)}function l(a){window.location.hash.indexOf('#signup-modal-shown')>=0&&(f=!0),window.location.hash.indexOf('#profile-update-shown')>=0&&(g=!0);if(typeof f!='undefined'){_gaq.push(['_trackEvent','Modal_Signup','Facebook button click','Click',1]),jQuery('#signup-modal').trigger('moveFBidentifierToSignupModal'),jQuery('#signup-modal .primary').hide(),jQuery('#signup-modal .fb-placeholder').show(),jQuery('#signup-modal .fb-placeholder').css('border','none');var b=jQuery('#signup-modal').width()+'px';jQuery('#signup-modal').css('width',b),jQuery('#signup-modal .secondary').hide()}else typeof g!='undefined'&&jQuery('#signup-modal').trigger('moveFBidentifierToProfileModal');jQuery('#fb_signup_welcome').hide(),jQuery('#fb_link_welcome').hide(),jQuery('#fb_error_title').hide(),jQuery('#fb_login_welcome').show();if(typeof FB=='undefined'||typeof FB.api=='undefined')return;a?FB.api('/me/picture?type=large',function(a){jQuery('#fb_profile_pic').css('background','url(\''+a.data.url+'\') no-repeat center'),jQuery('#fb_profile_pic').show()}):FB.api('/me/picture?type=normal',function(a){jQuery('#fb_profile_pic').css('background','url(\''+a.data.url+'\') no-repeat center'),jQuery('#fb_profile_pic').show()}),FB.api('/me',function(a){jQuery('.fb_fullname').html(a.first_name)}),f&&_gaq.push(['_trackEvent','Modal_Signup','Facebook signup form land','Land',1])}function m(){if(e)return!1;j=jQuery('#login_goto_id').val();var a=jQuery('#partner').val(),b=jQuery('#token').val(),c='/users/facebook/onLogin.php';q(jQuery('#fb_popup_window'),jQuery('.loggedout_header').offset());var g=jQuery('.loggedout_header').offset();return g||(g=Object(),g.top=0,g.left=0),jQuery('#popup_background').css('top','-'+g.top+'px'),jQuery('#popup_background').css('left','-'+g.left+'px'),jQuery('#popup_background').css('width',jQuery(document).width()),jQuery('#popup_background').css('height',jQuery(document).height()),jQuery('.fb_div').hide(),jQuery('#fb_loading').show(),(jq('.quick-hire-post-form').length==0||!jq('.quick-hire-post-form').is(':visible'))&&jQuery('#fb_popup').show(),e=jQuery.ajax({type:'POST',dataType:'json',url:c,data:'action=connect&auto_link=1&decode=1&goto_url='+j+'&partner='+a,success:function(a){e=!1,jQuery('#fb_loading').hide(),jQuery('.fb_submit_loading').hide(),jQuery('#fbSignupBtn').show(),jQuery('.fbLinkBtn').show(),removeError(jQuery('#fb_user'),!0),D();if(a.status=='successful')if(a.retAction=='signup')jQuery('#fb_email').html(a.email),jQuery('#fb_user').val(a.availableName),z(jQuery('#fb_user').val()),jQuery('#signupRadioBtns').show(),jQuery('#fb_signup').show(),jQuery('[value=fb_signup]').parent().parent().click(),jQuery('#signupRadioBtns').show(),jQuery('#fb_login_welcome').hide(),jQuery('#fb_signup_welcome').show(),jQuery('#fb_currency').val(a.currency),jQuery('#fb_timezone').val(a.timezone),d=a.token;else if(a.retAction=='link')jQuery('#fb_login_welcome').hide(),jQuery('#signupRadioBtns').hide(),jQuery('#fb_link_welcome').show(),jQuery('#linkUser').html(a.username),jQuery('#fb_link_email').html(a.email),jQuery('#fb_link_user_display').html(a.username),jQuery('#fb_link_user').val(a.username),jQuery('#fb_link').show(),d=a.token;else if(jq('.quick-hire-post-form').length>0&&jq('.quick-hire-post-form').is(':visible'))jq('.quick-hire-post-form').trigger('welcomeFacebook',[!1,n]);else{jQuery('#fb_login_status').html('Logging in...'),jQuery('#fb_login_welcome').show(),jQuery('#fb_loading').show();if(p())n(!1),jQuery('[class="container_bottom_newuser"]').remove();else{if(typeof payPalOfferFreeFeatured!='undefined')return window.location.reload(),!1;if(window.location.pathname=='/friend-invitation/inviteFriends.php')return window.location='/friend-invitation/inviteFriends.php?showFacebook',!1;if(typeof f!='undefined')return jQuery('#signup-modal').trigger('initialBid'),jQuery('#signup-modal').remove(),!1;if(!j)return window.location.reload(),!1;window.location.href=a.url}}else a.status=='failed'&&(a.reason=='FBAuth'?(jQuery('#fb_login_welcome').hide(),jQuery('#fb_error_title').text(a.long_reason).show(),setTimeout(function(){window.location.reload()},2e3)):a.reason=='userExists'?(jQuery('#fb_login_welcome').hide(),jQuery('#fb_error_title').html(a.error_title),jQuery('#fb_error_content').html(a.long_reason),jQuery('#fb_error_title').show(),jQuery('#fb_error_div').show()):a.type=='SUSPENDED'?(jQuery('#fb_popup').hide(),window.location.href='/users/usersuspended.php?userid='+a.users_id):alert(a.reason));return!1}}),!1}function n(a,b){jQuery.ajax({type:'get',dataType:'json',url:'/ajax/postproject/userdetails.php',success:function(c){if(c.status=='success')if(typeof b!='undefined')b(a,c);else{var d='<img src=\''+c.logo_url+'\' alt=\''+c.logoname+'\' border=0 width=80 height=80 style=\'margin-right: 20px;\'>';jQuery('#loggedinLogo').html(d),jQuery('#loggedinFullname').html(c.name),jQuery('#fb_popup').hide(),jQuery('#projectUserSelect').fadeOut('slow',function(){jQuery('#projectUserSelect').remove()}),jQuery('#fbConnect').fadeOut('slow',function(){jQuery('#fbConnect').remove()}),jQuery('#loginFl').fadeOut('slow'),jQuery('#default-header #user-login').fadeOut('slow',function(){a&&jQuery('#loggedinFullname').parent().html(jQuery('#loggedinFullname').parent().html().replace('back',''))}),jQuery('#headerTopLoggedIn').fadeIn('slow'),a===!1&&p()&&pinkyHeaderAPI.reload(),success=!0}}})}function o(){if(typeof FB=='undefined'||typeof FB.logout=='undefined')return;FB.logout()}function p(){return window.location.pathname=='/buyers/create.php'||window.location.pathname=='/buyers/onverifycreate.php'||window.location.pathname=='/heroes/hero.php'?!0:!1}function q(a,b){b||(b=Object(),b.top=0,b.left=0),a.css('position','absolute'),a.css('top',((jQuery(window).height()-a.outerHeight())/2-b.top)*.5+jQuery(window).scrollTop()+'px'),a.css('left',(jQuery(window).width()-a.outerWidth())/2+jQuery(window).scrollLeft()-b.left+'px')}window.fbAsyncInit_pinky=function(){if(typeof window.fbAsyncInit_pinky_run=='undefined'){window.fbAsyncInit_pinky_run=!0,jQuery(document).off('click','#header-fb-login',s).on('click','#header-fb-login',s),jQuery(document).off('click','.gaf-fb-connected-button',s).on('click','.gaf-fb-connected-button',s),jQuery(document).off('click','.gaf-fb-login-button',s).on('click','.gaf-fb-login-button',s),jQuery(document).off('click','.gaf-fb-accept-button',r).on('click','.gaf-fb-accept-button',r);if(typeof FB=='undefined'||typeof FB.getLoginStatus=='undefined')return;var a=FB.getLoginStatus(function(a){return a.status=='connected'||a.status=='not_authorized'?!0:!1});a&&jQuery('#fb_facepie').show()}};function r(){if(getUserIdfromCookie()!=='')return window.top.location.href=window.location.protocol+'//'+window.location.host+'/dashboard/',!0;if(window.self!=window.top)return window.top.location.href=window.location.href+'#showsignup',!0;s()}function s(){jQuery('#header-login-modal').modal('hide');if(typeof FB=='undefined'||typeof FB.getLoginStatus=='undefined'||typeof FB.Event=='undefined'||typeof FB.Event.subscribe=='undefined'||typeof FB.login=='undefined')return;FB.getLoginStatus(function(a){a.status!='connected'?(FB.Event.subscribe('auth.statusChange',function(){k()}),FB.login(function(a){k()},{scope:'user_location,user_website,email,user_birthday'})):k()})}function u(a){if(typeof FB=='undefined'||typeof FB.api=='undefined'||typeof FB.login=='undefined')return;FB.api('/me/permissions',function(b){typeof b!='object'||typeof b.data!='object'||typeof b.data[0]!='object'?FB.login(function(a){window.location='/friend-invitation/inviteFriends.php?showFacebook'},{scope:'user_location,user_website,email,user_birthday'}):a()})}function v(){return!jQuery('#fb_looking_to_hire').is(':checked')&&!jQuery('#fb_looking_for_work').is(':checked')?(jQuery('#fb_looking_for_label').parent('.control-group').addClass('error'),jQuery('#fb_looking_to_hire').closest('label').addClass('error'),jQuery('#fb_looking_for_work').closest('label').addClass('error'),!1):(jQuery('#fb_looking_for_label').parent('.control-group').removeClass('error'),jQuery('#fb_looking_to_hire').closest('label').removeClass('error'),jQuery('#fb_looking_for_work').closest('label').removeClass('error'),!0)}jQuery(document).ready(function(){typeof window.fbAsyncInit=='function'&&window.fbAsyncInit(),window.location.hash.substring(1)=='showsignup'&&setTimeout(s(),500),jQuery(document).on('change','[name=connect_type]',function(){jQuery('[name=connect_type]').attr('checked',''),jQuery(this).attr('checked','checked'),jQuery('.connect_div').hide(),jQuery('#'+jQuery(this).val()).show()}),jQuery(document).on('click','.close-fb-modal-bs',function(){jQuery('.modal').fadeOut()}),jQuery(document).on('focus','#fb_login_user, #fb_login_passwd, #fb_login_btn',function(){jQuery('.link-account-error').html('').hide()}),typeof isFBLink!='undefined'&&isFBLink?(jQuery('#fb_link').show(),jQuery('#signup-form').hide()):typeof isFBSignup!='undefined'&&isFBSignup&&(jQuery('#passwd').val(B(8)),jQuery('#passwd1').val(jQuery('#passwd').val()),jQuery('#looking_for').attr('checked','checked'),removeError(jQuery('#fb_user'),!0),jQuery('#signup-form').show(),jQuery('#fb_link').hide());var a=jQuery('#fb_popup .looking_for').data('default'),e=jQuery.inArray(a,['Employer','Worker'])>-1?!0:!1;e&&(jQuery('#fb_looking_for_label').hide(),jQuery('#fb_popup div.looking_for').hide()),a==='Employer'?(jQuery('#fb_looking_to_hire').attr('checked','checked'),jQuery('#fb_looking_for_work').attr('checked',!1)):a==='Worker'&&(jQuery('#fb_looking_to_hire').attr('checked',!1),jQuery('#fb_looking_for_work').attr('checked','checked')),jQuery('#fb_looking_to_hire, #fb_looking_for_work').click(function(){v()}),jQuery('.fbCloseBtn').click(function(){return jQuery('#fb_popup').hide(),!1}),jQuery('.fbLinkBtn').click(function(){var a='/users/facebook/onLink.php',b=jQuery(this).parent().attr('id'),e=jQuery('#'+b+'_user').val(),h=jQuery('#'+b+'_passwd').val();return jQuery.ajax({type:'POST',dataType:'json',url:a,data:'auto_link=1&decode=1&goto_url='+j+'&username='+e+'&passwd='+h+'&token='+d+'&importPic='+jQuery('#fb_link').data('importPic'),success:function(a){if(a.status=='success'){if(typeof f!='undefined')return _gaq.push(['_trackEvent','Modal_Signup','Link account with facebook','Link',1]),jQuery('#signup-modal').trigger('initialBid'),jQuery('#signup-modal').remove(),!1;if(window.location.pathname=='/users/signup.php')window.location='/dashboard/';else if(window.location.pathname=='/friend-invitation/inviteFriends.php')window.location='/friend-invitation/inviteFriends.php?showFacebook';else if(jq('.quick-hire-post-form').length>0&&jq('.quick-hire-post-form').is(':visible'))jq('.quick-hire-post-form').trigger('welcomeFacebook',[!1,n]);else if(window.location.pathname=='/sellers/profile-update.php')jQuery.ajax({url:'/sellers/profile-update.php',type:'GET',dataType:'json',data:'ajax=1&PicImported=1',success:function(a){a.status=='success'?(profileUpdateAjaxJSON=a.data,jQuery('#profile-update-placeholder').trigger('reRender'),jQuery('.fb-bs-identifier').fadeOut('slow',function(){jQuery('.fb-bs-identifier').remove()})):window.location='/sellers/profile-update.php?PicImported=1'},error:function(){window.location='/sellers/profile-update.php?PicImported=1'}});else if(typeof g!='undefined')jQuery.ajax({url:'/sellers/profile-update.php',type:'GET',dataType:'json',data:'ajax=1&PicImported=1',success:function(a){a.status=='success'?(profileUpdateAjaxJSON=a.data,jQuery('#profile-update-placeholder').trigger('reRender'),jQuery('.fb-bs-identifier').fadeOut('slow',function(){jQuery('.fb-bs-identifier').remove()}),jQuery('#profile-update-placeholder').trigger('checkProfilePicture')):window.location.reload()},error:function(){window.location.reload()}});else if(p())jQuery('#fb_signup_welcome').hide(),jQuery('#fb_link_welcome').hide(),jQuery('#fb_login_status').html('Logging in...'),jQuery('#fb_login_welcome').show(),n(!1),jQuery('[class="container_bottom_newuser"]').remove();else if(a.url){if(typeof payPalOfferFreeFeatured!='undefined')return window.location.reload(),!1;window.location.href=a.url}else window.location.reload()}else if(/different Facebook/i.test(a.reason))if(p())jQuery('#fb_link_welcome').hide(),jQuery('#fb_signup_welcome').hide(),jQuery('#fb_login_status').html('Logging in...'),jQuery('#fb_login_welcome').show(),n(!1),jQuery('[class="container_bottom_newuser"]').remove();else{if(typeof payPalOfferFreeFeatured!='undefined')return window.location.reload(),!1;a.url?window.location.href=a.url:window.location='/dashboard/'}else{if(/Invalid username or password/i.test(a.reason)){var b=T_('Invalid username or password!');jQuery('#fb_login_user').is(':visible')?c?jQuery('.link-account-error').text(b).show():addError(jQuery('#fb_login_user'),b):jQuery('#fb_link_passwd').is(':visible')&&(c?jQuery('.link-account-error').text(b).show():addError(jQuery('#fb_link_passwd'),b))}else{var b=T_('An unknown error occurred. Please try again later.');c?jQuery('.link-account-error').text(b).show():addError(jQuery('#fb_link_passwd'),b)}jQuery('.fb_submit_loading').hide(),jQuery('#fbSignupBtn').show(),jQuery('.fbLinkBtn').show(),D()}return!1}}),C(),jQuery(this).hide().next().show(),!1}),jQuery('#fbSignupBtn').click(function(a){if(!y)return!1;if(!b)return!1;var c='/users/facebook/onSignup.php',e;p()?e='1':e='0';if(jQuery('#fb_looking_to_hire').length!==0){if(!v())return a.stopPropagation(),!1;jQuery('#fb_looking_to_hire').is(':checked')?e='1':e='0'}return jQuery.ajax({type:'POST',dataType:'json',url:c,data:'goto_url='+j+'&decode=1&action=register&newusername='+jQuery('#fb_user').val()+'&currency='+jQuery('#fb_currency').val()+'&timezone='+jQuery('#fb_timezone').val()+'&isEmployer='+e+'&token='+d,success:function(a){if(a.status=='success'){if(typeof f!='undefined')return jQuery('#signup-modal').trigger('signupFunnel'),_gaq.push(['_trackEvent','Modal_Signup','Create account with facebook','Create',1]),!1;if(window.location.pathname=='/users/signup.php')a.url?window.location.href=a.url:window.location='/sellers/skill-select.php';else if(window.location.pathname.indexOf('socialapp/')>=0)jQuery('#post-project').submit();else if(jq('.quick-hire-post-form').length>0&&jq('.quick-hire-post-form').is(':visible'))jq('.quick-hire-post-form').trigger('welcomeFacebook',[!0,n]);else if(p())jQuery('#fb_signup_welcome').hide(),jQuery('#fb_login_status').html('Logging in...'),jQuery('#fb_login_welcome').show(),n(!0),jQuery('[class="container_bottom_newuser"]').remove();else if(a.url){if(typeof payPalOfferFreeFeatured!='undefined')return window.location.reload(),!1;window.location.href=a.url}else window.location='/sellers/skill-select.php'}else jQuery('.fb_submit_loading').hide(),jQuery('#fbSignupBtn').show(),jQuery('.fbLinkBtn').show(),D(),alert(a.reason);return b=!0,!1}}),C(),jQuery(this).hide().next().show(),b=!1,!1}),jQuery('#fb_user').focusout(function(){w=z(jQuery('#fb_user').val())}).keyup(function(a){return removeError(jQuery('#fb_user'),!0),a.keyCode==13&&jQuery('#fbSignupBtn').click(),w=z(jQuery('#fb_user').val()),c||jQuery('#chk_username_exist').hide(),!1}),jQuery('#fb_link_passwd').keyup(function(a){removeError(jQuery('#fb_link_passwd'),!0);if(a.keyCode==13)return jQuery('#fb_link_btn').click(),!1}),jQuery('#fb_login_user').keyup(function(){removeError(jQuery('#fb_login_user'),!0)}),jQuery('#fb_login_passwd').keyup(function(){removeError(jQuery('#fb_login_user'),!0)})});var w,y;function z(a){c||jQuery('#chk_username_exist').hide(),w&&w.abort();if(!A()){y=!1;var b=!1;return c&&(b=!0),jQuery.ajax({url:'/ajax/check-username-exist.php?username='+a+'&json='+b,dataType:'json',success:function(a){/exists/i.test(a.msg)?(y=!1,jQuery('#chk_username_exist').html(a.msg),c?jQuery('#chk_username_exist').closest('.control-group').removeClass('success').addClass('error'):jQuery('#chk_username_exist').removeClass('ns_success-msg').addClass('ns_error'),jQuery('#chk_username_exist').show()):(y=!0,jQuery('#chk_username_exist').html(a.msg),c?jQuery('#chk_username_exist').closest('.control-group').removeClass('error').addClass('success'):jQuery('#chk_username_exist').removeClass('ns_error').addClass('ns_success-msg'),jQuery('#chk_username_exist').show())}})}return y=!1,!1}function A(){if(jQuery('#fb_user').length!=0&&jQuery('input[name=connect_type][value=fb_signup]:radio').is(':checked')){var a=/^[a-z][a-z0-9]{2,15}$/i;return a.test(jQuery('#fb_user').val())?jQuery('#fb_user').hasClass('ns_error')?!0:(c?(jQuery('#chk_username_exist').html('Valid username'),jQuery('#chk_username_exist').closest('.control-group').addClass('success').removeClass('error').show()):removeError(jQuery('#fb_user'),!0),!1):(c?(jQuery('#chk_username_exist').html('Enter 3-16 alphanumeric characters [a-z 0-9] starting with a letter').show(),jQuery('#chk_username_exist').closest('.control-group').addClass('error').removeClass('success')):addError(jQuery('#fb_user'),'Enter 3-16 alphanumeric characters [a-z 0-9] starting with a letter'),!0)}return!1}function B(a){chars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890',pass='';for(x=0;x<a;x++)i=Math.floor(Math.random()*62),pass+=chars.charAt(i);return pass}function C(){jQuery('[name=connect_type]').each(function(){jQuery(this).attr('disabled','')})}function D(){jQuery('[name=connect_type]').each(function(){jQuery(this).removeAttr('disabled')})}function E(a,b,c){jq.ajax({type:'get',dataType:'json',url:'/ajax/friend-invitation/onLogFBInviteesId.php',data:{requestId:a,invitees:JSON.stringify(b),msg:c},success:function(a){}})}function F(a,b){var c=[],d=a.to;for(var e=0;e<d.length;e++){var f={};f.id=d[e];for(var g=0;g<h.length;g++)if(f['id']==h[g]['id']){f.name=h[g].name;break}c.push(f)}if(a==null)return hideAllModal(),!1;E(a.request,c,b);var i=parseInt(jQuery('#batchSeq').text())+1;jQuery('#batchSeq').text(i);var j=parseInt(100*i/parseInt(jq('#batchNum').text()));return jq('#batchRequestModal .progress .bar').css('width',j+'%'),!0}function G(a,b,c){jq('#batchNum').text(Math.ceil(a.length/50)),jq('#frdsCount').text(a.length),hideAllModal(),a.length>50&&showOverlayModal('#batchRequestModal');var d=[];for(var e=0;e<a.length;e++)d.push(a[e].id);h=a,I(d.slice(0,50),d.slice(50,d.length),b)}function H(){jq('.fb_dialog').each(function(a){jq(this).css('top')!='-10000px'&&jq(this).css('top',jq('#batchRequestModal').offset().top+130)}),setTimeout('addjustFBDialogPosition()',1e3)}function I(a,b,c){jq('#xpSumReview').text(a.length*20);var d=parseInt(100/parseInt(jq('#batchNum').text()));jq('#batchRequestModal .progress .bar').css('width',d+'%');if(typeof FB=='undefined'||typeof FB.ui=='undefined')return;b.length==0?FB.ui({method:'apprequests',message:c,display:'iframe',to:a},function(a){hideAllModal(),F(a,c)}):FB.ui({method:'apprequests',message:c,display:'iframe',to:a},function(a){var d=F(a,c);if(!d)return;I(b.slice(0,50),b.slice(50,b.length),c)}),parseInt(jq('#batchSeq').text())==1&&b.length>0&&(t=setTimeout('addjustFBDialogPosition()',1e3))}return{checkFBPostPermission:u,sendPrivateMessage:G}}}),define('pinky/login',['jquery-wrapper','pinky/main-api'],function(a){(function(){a(document).ready(function(){a('#login-frame').load(function(){var b=this;setTimeout(function(){var c=!1;a('#box-login').is(':visible')||(c=!0,a('#box-login').show()),height=a(b).contents().find('.box-login').height(),c&&a('#box-login').hide(),height==0&&(height='170px'),a(b).css({height:height}),a('#box-login').height(height);if(a(b).contents().find('body').attr('success')=='true')if(typeof enableDynamicPinkyHeader!='undefined'&&enableDynamicPinkyHeader===!0)Modernizr.cssanimations?(a('#header-login-modal').one('animationend webkitAnimationEnd oAnimationEnd',function(){a('#header-login-modal').modal('hide')}),pinkyHeaderAPI.reload(),a('#header-login-modal').addClass('out')):(pinkyHeaderAPI.reload(),a('#header-login-modal').modal('hide'));else{typeof runPinkyHeaderCallbacks!='undefined'&&runPinkyHeaderCallbacks===!0&&pinkyHeaderAPI.runCallbacks();var d=a(b).contents().find('body').attr('goto');!d||d.length==0?location.pathname=='/'||location.pathname==''||location.pathname=='/users/signup.php'?window.location.href='/dashboard/':window.location.reload():window.location.href=d}},50)})})})()}),function(a){a.fn.hoverIntent=function(b,c,d){var f={interval:100,sensitivity:7,timeout:0};typeof b=='object'?f=a.extend(f,b):a.isFunction(c)?f=a.extend(f,{over:b,out:c,selector:d}):f=a.extend(f,{over:b,out:b,selector:c});var g,h,i,j,k=function(a){g=a.pageX,h=a.pageY},l=function(b,c){c.hoverIntent_t=clearTimeout(c.hoverIntent_t);if(Math.abs(i-g)+Math.abs(j-h)<f.sensitivity)return a(c).off('mousemove.hoverIntent',k),c.hoverIntent_s=1,f.over.apply(c,[b]);i=g,j=h,c.hoverIntent_t=setTimeout(function(){l(b,c)},f.interval)},m=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,f.out.apply(b,[a])},n=function(b){var c=jQuery.extend({},b),d=this;d.hoverIntent_t&&(d.hoverIntent_t=clearTimeout(d.hoverIntent_t)),b.type=='mouseenter'?(i=c.pageX,j=c.pageY,a(d).on('mousemove.hoverIntent',k),d.hoverIntent_s!=1&&(d.hoverIntent_t=setTimeout(function(){l(c,d)},f.interval))):(a(d).off('mousemove.hoverIntent',k),d.hoverIntent_s==1&&(d.hoverIntent_t=setTimeout(function(){m(c,d)},f.timeout)))};return this.on({'mouseenter.hoverIntent':n,'mouseleave.hoverIntent':n},f.selector)}}(jQuery),define('pinky/utils/jquery.hoverIntent.minified',function(){}),define('jquery',[],function(){return jQuery}),define('text!templates/acquisitions-banner.htm',[],function(){return'<div class="pinky-template">\n    <div class="global-announcement <%- classname %>">\n        <div class="ns_wrap wrap">\n            <a href="#" class="ns_close close">Ã</a>\n            <div class="acquired">\n                <% if (site_logo !== false) { %>\n                    <img src="<%- cdn_url(\'/img/global-announcement/\' + site_logo) %>" border="0" />\n                <% } %>\n                <span <% if (site_logo == false) { %>class="noimage"<% } %>>\n                    <%- T_("Attention <[- site_name ]> users, <[- site_name ]> has been acquired by Freelancer.com!", {site_name: site_name}) %>\n                    <% if (site_blog !== false) { %><a href="<%- site_blog %>" target="_blank"><%- T_("Find out more") %></a><% } %>\n                </span>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define('acquisitions',['jquery','text!templates/acquisitions-banner.htm'],function(a,b){function d(a){var b;if(a==='#gaf')b={classname:'getafreelancer',site_name:'GetAFreelancer',site_logo:'GAF.png',site_blog:!1},e('XXX','0114');else if(a==='#euf')b={classname:'eufreelance',site_name:'EUFreelance',site_logo:!1,site_blog:!1},e('XXX','0113');else if(a==='#sl')b={classname:'scriptlance',site_name:'Scriptlance',site_logo:'scriptlance.png',site_blog:'http://blog.freelancer.com/general-announcements/freelancer-com-acquires-scriptlance/'},e('XXX','0115');else if(a==='#rac')b={classname:'rentacoder',site_name:'RentACoder',site_logo:!1,site_blog:!1},e('XXX','0117');else if(a==='#vw')b={classname:'vworker',site_name:'VWorker',site_logo:'vworker-colored.png',site_blog:'http://blog.freelancer.com/uncategorized/freelancer-com-acquires-vworker/'},e('XXX','0112');else if(a==='#le')b={classname:'limeexchange',site_name:'LimeExchange',site_logo:'limeexchange.png',site_blog:!1},e('XXX','0116');else{if(a!=='#zombies')return!1;e('XXX','0118')}return b}function e(b,c){a.ajax({type:'POST',url:'/ajax/recordAffiliateClick.php',data:{program:b,program_id:c}})}var c=function(){if(typeof window.location.hash!='undefined'){var c=window.location.hash,e=d(c);if(typeof c!='undefined'){var f=_.template(b,e);typeof e.classname!='undefined'&&a('#acquisition-banner').html(f).slideDown()}}a('.global-announcement .close').click(function(){a('#acquisition-banner').slideUp()})};return{init:c}}),define('text!templates/announcement-banner.htm',[],function(){return'<section class="important-announcement<% if (responsive) { %> is-responsive<% } %>" data-target="important-announcement">\n  <div class="<%- type %>-announcement <%- classname %>-announcement <%- is_hidden %>">\n      <div class="important-announcement-content">\n        <span class="important-announcement-icon-outer">\n          <span class="important-announcement-icon <%- icon %>"></span>\n        </span>\n        <div class="important-announcement-text">\n          <span class="important-announcement-title"><%= text %></span>\n          <span class="important-announcement-subtext"><%= subtext %></span>\n        </div>\n        <button class="important-announcement-close" title="close announcement"\n        id="<%- classname %>-announcement-close">\n          <span class="fl-icon-cross-thin"></span>\n        </button>\n      </div>\n  </div>\n</section>\n'}),define('banner-notification/android-app-banner',['jquery'],function(a){function b(a){a?(e(),g()):h()?e():d()}function c(){var a=/android(?=.*)/i;return a.test(window.navigator.userAgent)}function d(){a('.messaging-app-announcement').removeClass('is-hidden')}function e(){a('.messaging-app-announcement').addClass('is-hidden')}function f(){a.ajax({type:'get',dataType:'json',url:'/ajax/banner-notification/check-android-app-token.php',success:function(a){a.status==='success'&&(a.msg===!0?b(!0):b(!1))}})}function g(){Modernizr.localstorage?localStorage.getItem('android_app_checked')==null&&localStorage.setItem('android_app_checked',1):getCookie('android_app_checked')===''&&setCookie('android_app_checked',1,365)}function h(){return Modernizr.localstorage?localStorage.getItem('android_app_checked')?!0:!1:getCookie('android_app_checked')?!0:!1}return{showAndroidAppBanner:b,isAndroid:c,checkShowBannerApp:f,appAlreadyChecked:g,isAppAlreadyChecked:h}}),define('announcements',['jquery','text!templates/announcement-banner.htm','banner-notification/android-app-banner'],function(a,b,c){function e(a){var b=!1;return a==='#przez'&&(b={type:'success',classname:'zlecenia-przez',text:T_('Freelancer.com jest nowym wÅaÅcicielem witryny Zlecenia.przez.net! <a href="'+ssl_base_url+'/media/przezMigrationFAQ.pdf">Dowiedz siÄ wiÄcej</a>'),subtext:'',icon:'zlecenia-przez-logo-stylised',is_hidden:''},f('XXX','0119')),a==='#android'&&(b={type:'info',classname:'messaging-app',text:T_('<a href="https://play.google.com/store/apps/details?id=com.freelancer.android.messenger&referrer=utm_source%3Dpmb_notification%26utm_medium%3Demail" target="_blank">Get the Freelancer Messenger App for Android.</a>'),subtext:'',icon:'fl-icon-comments',is_hidden:'is-hidden'}),b}function f(b,c){a.ajax({type:'POST',url:'/ajax/recordAffiliateClick.php',data:{program:b,program_id:c}})}var d=function(d){if(typeof window.location.hash!='undefined'){var f=window.location.hash;c.isAndroid()&&getUserIdfromCookie()&&(f='#android');var g=e(f);g.responsive=d;if(typeof f!='undefined'){var h=_.template(b,g);typeof g.classname!='undefined'&&(d?a(h).insertBefore('.simple-hp'):a(h).insertBefore('#sticky-header'),c.isAppAlreadyChecked()||c.checkShowBannerApp())}}a('.important-announcement-close').click(function(){a('.important-announcement').slideUp()}),a('#messaging-app-announcement-close').click(function(){c.appAlreadyChecked()})};return{init:d}}),define('qtsbinds',['jquery-wrapper'],function(a){window.qtsv={timeout:!1,defaults:{},page:{},nav:{}},window.qtsv.defaults={pageContainer:'.gaf-container:first',navContainer:'.header-and-nav'};var b=function(a,b){if(typeof b=='boolean'&&b)for(var c in a)window.qtsv.nav[c]=a[c];else for(var c in a)window.qtsv.page[c]=a[c];window.qtsv.timeout=!1},c=function(a,b,c){var d=window.qtsv;if(!d.timeout){var e=typeof c=='undefined'?JSON.parse(JSON.stringify(d.page)):JSON.parse(JSON.stringify(d.nav));if(typeof a=='object')for(var f in a)f!='eventName'&&(e[f]=a[f]);else typeof a=='string'&&(e.label=a);typeof a.eventName!='undefined'?_t.push([a.eventName,e]):_t.push(['user_action',e]),setTimeout(function(){typeof b=='string'&&(window.location=b)},1e3),setTimeout(function(){d.timeout=!1},100),d.timeout=!0}},d=function(b,c,d){var e=window.qtsv;c=c||{};var f=e.defaults.pageContainer,g='[data-qts]';typeof b=='string'?g=b:typeof b=='object'&&(g=b.id,a(g).attr('data-qtcon',b.con),a(g).attr('data-qt0',b.falsy),a(g).attr('data-qt1',b.truthy)),typeof d=='string'?f=d:typeof d=='boolean'&&d==1&&(f=e.defaults.navContainer),a(f).on('click',g,function(b){b.preventDefault();var f=typeof d=='undefined'?JSON.parse(JSON.stringify(e.page)):JSON.parse(JSON.stringify(e.nav)),g=a(b.currentTarget),h=!1;typeof g.attr('href')!='undefined'&&(h=!0);if(!window.qtsv.timeout){for(var i in c)i!='eventName'&&(f[i]=c[i]);var j=g.data('qts');typeof g.data('qts')!='undefined'&&(f.label=g.data('qts'),typeof f.label!='undefined'?f.label=g.data('qts'):c.label=='undefined'&&(f.label=g.data('qts')));var k=typeof g.data('qtcon')!='undefined'?!0:!1;k&&(g.data('qtcon')==0?(f.label=g.data('qt1'),g.data('qtcon',!0)):(f.label=g.data('qt0'),g.data('qtcon',!1))),typeof f.action=='undefined'&&(f.action='click'),typeof j!=''&&(typeof c.eventName!='undefined'?_t.push([c.eventName,f]):_lt.push(['user_action',f])),window.qtsv.timer=setTimeout(function(){window.qtsv.timeout=!1,h&&(window.location=g.attr('href'))},1e3),window.qtsv.timeout=!0,window.qtsv.timerRun=0,window.qtsv.timer}})};return window.qtsv.push=c,{init:b,bind:d,push:c}}),function(jq){function _defaultRender(a){if(typeof a=='string')var b=a;else{var b;jq.each(a,function(a,c){return b=c,!1})}return'<strong>'+b+'</strong>'}var search={KEYWORDS_LENGTH:10,keywords:[],timeOutId:0,track:function(a,b){a=jq.trim(a.toLowerCase()),b=typeof b!='undefined'?!0:!1,a!=''&&jq.inArray(a,search.keywords)===-1&&(b?search.timeOutId=setTimeout(function(){search.sendAndPush(a)},1e3):search.sendAndPush(a))},sendAndPush:function(a){_lt.push({event:'Navigation Bar Search',keyword:a},{delay:1}),search.keywords.push(a),search.keywords.length>search.KEYWORDS_LENGTH&&search.keywords.shift()}},methods={init:function(a){var b=jq.extend({defaultText:T_('Search'),buckets:[],emptyMessage:T_('Nothing matched your search'),defaultRenderFunction:_defaultRender,onSelect:function(a){},action:!1,tracking:!1},a);if(!jq.isArray(b.buckets)||b.buckets.length==0)return jq.error('Invalid or missing buckets. Buckets to include in the bucketed search must be specified'),!1;var c=jq('<div />').addClass('bucket-search-drop').css('opacity',0).css('visibility','hidden').append(jq('<ul />').addClass('results')),d=this,e=[];jq.each(b.buckets,function(a,f){var g=jq.extend({name:'',show:!0,displayLength:5,url:!1,data:!1,searchFields:!1,showOnEmptyQuery:!1,renderFunction:b.defaultRenderFunction,onSelect:function(a){},searchResults:{},frozen:!1,leaked:!1,leakTunnel:'',titleImage:'project'},f);(typeof g.name!='string'||g.name.length==0)&&jq.error('Bucket name must be specified'),g.data===!1&&g.url===!1&&jq.error('Buckets must have either the data or a url specified'),g.id=g.name.toLowerCase().replace(/[^a-z]+/g,'-'),e.push(g);var h;g.leaked?h=jq('<li />').addClass('bucket-search-heading').attr('data-bucket',g.id).text(g.name).append('<span class="ns_right pull-right see_more_search"><a class="ns_link" src="'+g.leakTunnel+'">'+T_('See More')+'</a><span></span></span>'):h=jq('<li />').addClass('bucket-search-heading').attr('data-bucket',g.id).text(g.name),g.titleImage!=''&&h.prepend('<strong class="bucket-search-images '+g.titleImage+'"></strong>');var i=c.find('.include-bucket').first();i.length>0?i.before(h):c.find('.results').append(h);if(!g.show){h.hide().addClass('hidden');var j=jq('<li />').addClass('include-bucket').text(T_('Include <[- type ]>',{type:g.name})+' ').append(jq('<span />').addClass('icon'));j.bind('click',function(){h.show().removeClass('hidden'),jq(this).remove(),g.show=!0,methods.updateBucket.apply(d,[g]),d.focus()}).bind('mouseover',function(){c.find('.bucket-search-item.hover, .include-bucket.hover').removeClass('hover'),jq(d).addClass('hover')}),h.after(j)}});if(b.action){var f=jq.extend({name:'',onSelect:function(a,b){}},b.action),g=jq('<li />').addClass('include-bucket').text(f.name+' ').append(jq('<span />').addClass('icon'));c.find('.results').append(g),g.bind('click.bucketSearch',f.onSelect)}this.bind('focus.bucketSearch',function(){methods.show.apply(d),jq(this).parents('.site-search').addClass('focus')}).unbind('keyup.bucketSearch').bind('keyup.bucketSearch',function(a){return methods._keyup.apply(d,[a])}).unbind('keydown.bucketSearch').bind('keydown.bucketSearch',function(a){return methods._keydown.apply(d,[a])}).bind('focus.bucketSearch',function(){d.val()==b.defaultText&&d.removeClass('empty').val('')}).bind('blur.bucketSearch',function(a){d.val()==''&&d.addClass('empty').val(b.defaultText),jq(this).parents('.site-search').removeClass('focus')}).addClass('bucket-search-input'),this.val()==''&&this.addClass('empty').val(b.defaultText),jq('body').bind('click',function(){methods.hide.apply(d)}),c.bind('click',function(a){a.stopImmediatePropagation()}),this.bind('click',function(a){a.stopImmediatePropagation(),d.focus(),d.select()});var h=jq('<div />').addClass('bucket-search-wrapper');return h.insertBefore(d),h.append(d),h.append(c),jq(this).data('bucketedSearch',{dropdown:c,buckets:e,settings:b}),methods.update.apply(this),this},destroy:function(){return jq(this).data('bucketedSearch').div.remove(),this},show:function(){var a=jq(this).data('bucketedSearch'),b=!1;return jq(a.buckets).each(function(a,c){if(c.extended)return b=!0,!1}),b?(a.dropdown.width(this.outerWidth()-parseInt(a.dropdown.css('border-left-width'))-parseInt(a.dropdown.css('border-right-width'))+280),a.dropdown.css('right',0)):a.dropdown.width(this.outerWidth()-parseInt(a.dropdown.css('border-left-width'))-parseInt(a.dropdown.css('border-right-width'))),a.dropdown.css('top',this.outerHeight()-parseInt(this.css('border-bottom-width'))-parseInt(this.css('border-bottom-left-radius'))/2),a.dropdown.stop(!0).css('visibility','').fadeTo(200,1),window.searchShown=!0,this},hide:function(){var a=jq(this).data('bucketedSearch');if(a.dropdown.is(':visible')){a.dropdown.fadeTo(200,0,function(){a.dropdown.css('visibility','hidden')});var b=jq('#navigation-search').val()}return window.searchShown&&setTimeout(function(){_t.push(['user_search_box',{Search:b,Exit:'FailExit',Note:'This is when a user clicks out of the search box'}])},500),window.searchShown=!1,this},update:function(){var a=this,b=jq(this).data('bucketedSearch');return jq.each(b.buckets,function(b,c){methods.updateBucket.apply(a,[c])}),this},updateBucket:function(bucket){if(!bucket.show)return!1;var data=jq(this).data('bucketedSearch'),q=jq.trim(jq(this).val().toLowerCase());q==data.settings.defaultText.toLowerCase()&&(q='');if(bucket.searchResults[q]!==undefined)bucket.xhr!==undefined&&bucket.xhr.abort(),methods._replaceBucketResults.apply(this,[bucket,bucket.searchResults[q]]);else if(bucket.data!==!1){var results;if(q.length==0)bucket.showOnEmptyQuery?bucket.displayLength?results=bucket.data.slice(0,bucket.displayLength):results=bucket.data:results=new Array;else{results=bucket.data;var words=q.split(' ');for(var i=0;i<words.length;i++){var word=words[i];if(word.length>0){var matches=new Array;for(var j=0;j<results.length;j++){var record=results[j];if(bucket.searchFields)for(var k=0;k<bucket.searchFields.length;k++){var value=eval('record.'+bucket.searchFields[k]);if(typeof value=='string'&&value.toLowerCase().indexOf(word)>=0){matches.push(record);break}}else for(var l in record){var value=record[l];if(typeof value=='string'&&value.toLowerCase().indexOf(word)>=0){matches.push(record);break}}}results=matches}}bucket.displayLength&&(results=results.slice(0,bucket.displayLength))}bucket.searchResults[q]=results,methods._replaceBucketResults.apply(this,[bucket,results])}else if(bucket.url!==!1){if(q.length==0&&!bucket.showOnEmptyQuery)return bucket.searchResults[q]=new Array,methods._replaceBucketResults.apply(this,[bucket,bucket.searchResults[q]]),!1;var query={q:q};bucket.displayLength&&(query.limit=bucket.displayLength),bucket.xhr!==undefined&&bucket.xhr.abort();var header=data.dropdown.find('.bucket-search-heading[data-bucket='+bucket.id+']');header.hasClass('hidden')||(data.dropdown.find('.bucket-search-item[data-bucket='+bucket.id+'], .bucket-search-empty[data-bucket='+bucket.id+'], .bucket-search-loading[data-bucket='+bucket.id+']').remove(),header.after(jq('<li />').addClass('bucket-search-loading').attr('data-bucket',bucket.id)));var that=this;bucket.frozen?bucket.xhr=jq.ajax({url:bucket.url,data:query,dataType:'json',cache:!1,success:function(a){bucket.xhr=undefined,bucket.frozen?bucket.data=a.results:bucket.searchResults[q]=a.results,methods._replaceBucketResults.apply(that,[bucket,a.results])},complete:function(){bucket.xhr=undefined}}):bucket.xhr=jq.ajax({url:bucket.url,data:query,dataType:'json',success:function(a){bucket.xhr=undefined,bucket.frozen?bucket.data=a.results:bucket.searchResults[q]=a.results,methods._replaceBucketResults.apply(that,[bucket,a.results])},complete:function(){bucket.xhr=undefined}})}return this},select:function(a,b,c){var d=jq(this).data('bucketedSearch');return d.settings.onSelect(c,a),b.onSelect(c,a),methods.hide.apply(this),this},clearCache:function(a){var b=jq(this).data('bucketedSearch');if(a)a.searchResults={};else for(var c=0;c<b.buckets.length;c++)b.buckets[c].searchResults={};return this},getBuckets:function(){return jq(this).data('bucketedSearch').buckets},_keyup:function(a){var b=jq(this).data('bucketedSearch'),c=a.keyCode;if(c){if(c==27||c==9)return this.trigger('blur'),methods.hide.apply(this),!1;if(c==8||c>=44&&c<=90||c>=96&&c<=111||c>=186){if(b.settings.tracking){var d=jq.trim(jq(this).val().toLowerCase());methods._tracking(d)}return methods.update.apply(this),!0}if(c==13){search.timeOutId&&clearTimeout(search.timeOutId),search.track(jq(this).val());var e=b.dropdown.find('.bucket-search-item.hover, .include-bucket.hover');return e.length==0&&(e=b.dropdown.find('.bucket-search-item, .include-bucket').first()),this.trigger('blur'),e.trigger('click').addClass('active'),setTimeout(function(){e.removeClass('active')},300),!1}}return!0},_tracking:function(a){search.timeOutId&&clearTimeout(search.timeOutId),search.track(a,!0);if(typeof a=='undefined'||a==''||a.length<3||typeof getUserIdfromCookie!='function')return;var b,c;b=getUserIdfromCookie(),c=b==''?'nonLogin':getCookie(getCookieBase()+'_LOOKING_FOR'),_gaq.push(['_trackEvent','BucketedSearch','SearchBox',a])},_keydown:function(a){var b=jq(this).data('bucketedSearch'),c=a.keyCode;if(c)if(c==38||c==40){var d=b.dropdown.find('.bucket-search-item.hover, .include-bucket.hover'),e;return c==40?d.length==0?e=b.dropdown.find('.bucket-search-item, .include-bucket').first():e=d.nextAll('.bucket-search-item, .include-bucket').first():d.length==0?e=b.dropdown.find('.bucket-search-item, .include-bucket').last():e=d.prevAll('.bucket-search-item, .include-bucket').first(),d.removeClass('hover'),e.addClass('hover'),!1}return!0},_replaceBucketResults:function(a,b){var c=jq(this).data('bucketedSearch');c.dropdown.find('.bucket-search-item[data-bucket='+a.id+'], .bucket-search-empty[data-bucket='+a.id+'], .bucket-search-loading[data-bucket='+a.id+'], .bucket-search-empty:not([data-bucket]), .bucket-search-loading:not([data-bucket])').remove();var d=c.dropdown.find('.bucket-search-heading[data-bucket='+a.id+']');b.length>0?(d.show().removeClass('hidden'),a.displayLength&&b.slice(0,a.displayLength)):d.hide().addClass('hidden');var e=this;jq.each(b.reverse(),function(b,f){row=jq('<li />').addClass('bucket-search-item').attr('data-bucket',a.id),row.mousedown(function(b){methods.select.apply(e,[b,a,f])}),row.bind('mouseover',function(){c.dropdown.find('.bucket-search-item.hover, .include-bucket.hover').removeClass('hover'),jq(this).addClass('hover')}),d.after(row),row.append(a.renderFunction(f,row,e.width()));if(a.frozen&&b==a.displayLength-1)return!1}),b.reverse();if(c.dropdown.find('.bucket-search-heading:not(.hidden)').length==0){var f=!1;for(var g=0;g<c.buckets.length;g++)if(c.buckets[g].xhr!==undefined&&c.dropdown.find('.bucket-search-loading').length==0){c.dropdown.find('.results').prepend(jq('<li />').addClass('bucket-search-loading')),f=!0;break}!f&&c.settings.emptyMessage&&c.dropdown.find('.results').prepend(jq('<li />').addClass('bucket-search-empty').text(c.settings.emptyMessage))}else c.dropdown.find('.bucket-search-empty:not([data-bucket])').remove();return this},searchTrack:function(a){search.timeOutId&&clearTimeout(search.timeOutId),search.track(a)}};jq.fn.bucketedSearch=function(a){if(methods[a])return methods[a].apply(this,Array.prototype.slice.call(arguments,1));if(typeof a=='object'||!a)return methods.init.apply(this,arguments);jq.error('Method '+a+' does not exist on jQuery.bucketedSearch')}}(jQuery),function(a){var b=function(b,c){function g(a,c,d){var e=b('<span />').addClass('ns_right pull-right').text(T_('by <%- user %>',{user:a.user.username})),f=b('<p />').addClass('project-title').html('<strong></strong>').text(a.project.name),g=b('<span class="job-list"/>').html(a.jobList),h=b('<div />').addClass(' clear'),i=b('<div />').addClass(' clear');c.append(f).append(h).append(g).append(e).append(i);var j,k,l=!1;if(!c.is(':visible'))var l=c.parents().filter(function(){return b(this).css('display')=='none'}).show();l&&l.hide();var m=b('<div />').append(f).append(h).append(g).append(e).append(i);return m.html()}function h(a,c,d){var e=b('<p />').addClass('ns_right pull-right').html(a.currency.sign+''+a.prize+''+a.currency.code),f=b('<p />').addClass('project-title').text(a.name),g=b('<p class="job-list" />').html(a.skill),h=b('<div />').addClass(' clear'),i=b('<div />').addClass(' clear');c.append(f).append(h).append(g).append(e).append(i);var j=!1;if(!c.is(':visible'))var j=c.parents().filter(function(){return b(this).css('display')=='none'}).show();var k=a.currency;j&&j.hide();var l=b('<div />').append(f).append(h).append(g).append(e).append(i);return l.html()}function i(a,c,d){var e=b('<img />').attr('src',a.profile_logo_url).css('float','left').width(50).height(50),f=b('<div />').addClass('indent-wrap'),g=b('<strong />').addClass('user-name').html(a.username),h='';a.flag_icon===null?h=b('<div />'):h=b('<img />').attr('src','/'+a.flag_icon).css('padding-left','5px').width(16).height(11);var i;a.jobList===null?i='':i=a.jobList;var j=b('<div />').addClass('freelancer_job_list').html(i),k=b('<div />').addClass('ns_left pull-left').addClass('stars small ns_ratings-new'),l=b('<div />').addClass('ns_ratings-new ns_active-stars active').css('width',a.reputation*20+'%'),m=b('<div />').addClass('freelancer_reputation_number ns_left pull-left');a.reputation==0?m.html(T_('New!')):m.html(a.reputation.toFixed(1));var n=b('<div />').addClass('hireme-wrap').append(b('<a onclick="javascript:_ttref.push([\'_setCookie\',\'HireMe_SearchButton\']);" href="/u/'+a.username+'.html?hireme=true"'+' data-link="/u/'+a.username+'.html?hireme=true" />').addClass('ns_btn ns_blue btn btn-info branded sml searchBar-hireme').html('<span></span>'+T_('Hire Me!'))),o=b('<div />').addClass(' clear'),p=b('<div />'),q=b('<div />');k.append(l),f.append(g).append(h).append(p).append(j).append(q).append(k).append(m).append(o).append(n),c.append(e).append(f),c.hover(function(){b(this).find('.searchBar-hireme').show()},function(){b(this).find('.searchBar-hireme').hide()});var r,s=!1;if(!c.is(':visible'))var s=c.parents().filter(function(){return b(this).css('display')=='none'}).show();r=20;if(i.length>0)while(j.height()>r&&i.length>8)i=i.substr(0,i.length-1),j.html(i+'...');var t=b('<div />').append(e).append(f);return t.html()}function j(a,c,d){var e='';a.budget_period!==undefined?e=b('<p />').addClass('ns_right pull-right').html(a.currency.sign+''+a.min_budget+' - '+a.currency.sign+''+a.max_budget+''+a.currency.code):e=b('<p />').addClass('ns_right pull-right').html('&nbsp;');var f=b('<p />').addClass('project-title').html('<strong></strong>').text(a.name),g=b('<p class="job-list" />').html(a.jobList),h=b('<div />').addClass(' clear'),i=b('<div />').addClass(' clear');c.append(f).append(h).append(g).append(e).append(i);var j,k,l=!1;if(!c.is(':visible'))var l=c.parents().filter(function(){return b(this).css('display')=='none'}).show();l&&l.hide();var m=b('<div />').append(f).append(h).append(g).append(e).append(i);return m.html()}function k(a,c){if(c.which==3||b(c.target).parents('.hireme-wrap').length>0)return;if(c.ctrlKey==1||c.which==2)var d='_blank';else var d='_self';var e=!1,f='';switch(a.type){case'MyProject':e='/projects/'+a.project.id+'.html';break;case'MyContact':_ttref.push(['_setCookie','HireMe_Search']),e='/users/'+a.id+'.html';break;case'TopFreelancer':_ttref.push(['_setCookie','HireMe_Search']),f='Freelancer',e='/users/'+a.id+'.html';break;case'KeywordProject':_ttref.push(['_setEntrypoint','Project_Search']),f='Project',e='/projects/'+a.id+'.html';break;case'KeywordContest':_ttref.push(['_setEntrypoint','Contest_Search']),f='Contest',e='/contest/contest.php?project_id='+a.id;break;default:}var g=b('#navigation-search').val();_t.push(['user_search_box',{Search:g,Exit:'ResultExit',ResultType:f,ResultId:a.id,Note:'This is when a user clicks on a result.'}]),qtsv.push({eventName:'search_action',section:'NavBar',label:'NavigationSearch',query:g},!1,!0),setTimeout(function(){window.open(e,d)},500)}var d=[],e=getUserIdfromCookie();e&&d.push({name:T_('My Contacts:'),url:'/ajax/search/navSearchMyContacts.php',searchFields:['username','id'],showOnEmptyQuery:!0,displayLength:3,renderFunction:i,onSelect:k,frozen:!0,leaked:!1,leakTunnel:'/contacts/',titleImage:'contact',extended:!0}),d.push({name:T_('Freelancers'),url:'/ajax/search/navSearchTopFreelancer.php',displayLength:3,renderFunction:i,onSelect:k,leaked:!0,leakTunnel:'/users/search/',titleImage:'contact',extended:!0}),e&&d.push({name:T_('My Active Projects'),url:'/ajax/search/navSearchMyProjects.php?buyer=true&active=true',searchFields:['project.name','user.username','user.fullname'],showOnEmptyQuery:!0,displayLength:3,renderFunction:g,onSelect:k,frozen:!0,titleImage:'project',extended:!0}),d.push({name:T_('Projects'),url:'/ajax/search/navSearchKeywordProjects.php',displayLength:3,renderFunction:j,onSelect:k,leaked:!0,leakTunnel:'/search/search.php',titleImage:'project',extended:!0}),d.push({name:T_('Contests'),name_en:'Contests',url:'/ajax/search/navSearchKeywordContests.php',displayLength:3,renderFunction:h,onSelect:k,leaked:!0,leakTunnel:'/contest/browse/',titleImage:'contest',extended:!0});var f=function(a,c,d,e){var f=b('form#nav_search_form_submit');f.attr('action',d),f.attr('method',a);var g=b('<input />');g.attr('type','hidden'),g.attr('name',c),g.attr('value',e);if(c.indexOf('username')==0){var h=b('<input />');h.attr('type','hidden'),h.attr('name','search'),h.attr('value',1),f.append(h)}f.append(g),f.submit()};b(document).ready(function(){location.pathname.indexOf('freelancers/')==1&&location.search.indexOf('t=c')==1&&clean_page==1&&(b('.site-search').remove(),b('.secondary-nav-list').hide()),b('#navigation-search').length>0&&(b('#navigation-search').bucketedSearch({defaultText:'',emptyMessage:'',buckets:d,tracking:!0}),b('.see_more_search .ns_link, .site-search-submit.fl-icon-search').unbind('mousedown').mousedown(function(c){var d=a.trim(b('#navigation-search').val().toLowerCase());b('#navigation-search').bucketedSearch('searchTrack',d),qtsv.push({eventName:'search_action',section:'NavBar',label:'NavigationSearch',query:d},!1,!0);if(c.which==3)return;if(c.ctrlKey==1||c.which==2)var e='_blank';else var e='_self';var g=b('#navigation-search'),h=b(this).attr('src'),i,j;if(typeof h=='undefined'){if(d){i='GET',j='keyword',window.open('/search/'+d+'/',e);return}}else{if(h.indexOf('/users')==0){window.open('/freelancers/?q='+g.val(),e);return}if(h.indexOf('/search')==0){_t.push(['user_search_box',{Search:d,Exit:'SearchExit',Note:'This is when a user goes to the search page.'}]),i='GET',j='keyword';var k=g.val();k=k.replace(/ /g,'-'),window.open('/work/'+k+'/',e);return}if(h.indexOf('/market')==0)i='GET',j='keyword';else{if(h.indexOf('/contacts')!=0){if(h.indexOf('/contest')==0){i='GET',j='keyword',window.open('/contest/browse/?keyword='+g.val(),e);return}return!1}window.open('/contacts/',e)}}if(g.val()==g.data('bucketedSearch').settings.defaultText)return!1;f(i,j,h,g.val())}),b('#navigation-search').keypress(function(a){if(a.which==10||a.which==13){var c=b('#navigation-search').val(),d=b(this);_t.push(['user_search_box',{Search:c,Exit:'SearchExit',Note:'This is when a user goes to the search page.'}]),qtsv.push({eventName:'search_action',section:'NavBar',label:'NavigationSearch',query:c},!1,!0);var e=d.val();e=e.replace(/ /g,'-'),d.val()&&setTimeout(function(){f('POST','','/work/'+encodeURIComponent(e),'')},500)}}))})};return b(a),define('pinky/navSearch',['jquery-wrapper','qtsbinds','utils/trunk8'],b)}(jQuery),function(a,b,c){function d(d,e){function h(b){a(f).each(function(){var c=a(this);this!==b.target&&!c.has(b.target).length&&c.triggerHandler(e,[b.target])})}e=e||d+c;var f=a(),g=d+'.'+e+'-special-event';a.event.special[e]={setup:function(){f=f.add(this),f.length===1&&a(b).bind(g,h)},teardown:function(){f=f.not(this),f.length===0&&a(b).unbind(g)},add:function(a){var b=a.handler;a.handler=function(a,c){a.target=c,b.apply(this,arguments)}}}}a.map('click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup'.split(' '),function(a){d(a)}),d('focusin','focus'+c),d('focusout','blur'+c),a.addOutsideEvent=d}(jQuery,document,'outside'),define('jquery.ba-outside-events.min',function(){}),define('banner-notification/warningBanners',['jquery-wrapper'],function(a){var b={init:function(){var b,c;c=this,b=a('[data-warning-banner]'),b.each(function(){c.create_banner(a(this))})},create_banner:function(a){var b,c;b=a.attr('data-warning-banner'),c=b+'_banner_closed_by_user',localStorage.getItem(c)!=='true'&&a.removeClass('is-hidden'),a.find('.js-warning-close').on('click',function(){a.slideUp(300,function(){a.addClass('is-hidden'),localStorage.setItem(c,'true')})})}},c=function(){b.init()};return{init:c}}),require(['jquery-wrapper','update_onlineuser_status','pinky/fixer','pinky/header','pinky/navigation','pinky/navSearch','pinky/mobile','pinky/facebookConnect','pinky/login','pinky/utils/jquery.hoverIntent.minified','acquisitions','announcements','qtsbinds','jquery.ba-outside-events.min','banner-notification/warningBanners'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b(),getUserIdfromCookie()?c.events.trigger('fixer:fix',!0):c.events.trigger('fixer:fix',!1),a(document).ready(function(){k.init(),o.init(),l.init(!1);var b=new e;b.render(),a('#dc-popover-container').on('clickoutside',function(b){a('#dc-popover-container').hide()}),a(document).on('keydown',function(b){b.keyCode===27&&a('#dc-popover-container').is(':visible')&&a('#dc-popover-container').hide()});var c=jQuery('#default-header').find('.clickover[data-show_on_hover=true]');Modernizr.touch?c.each(function(){a(this).on('click',function(){a(this).trigger('popover:click')})}):c.each(function(){var a=jQuery(this),b,c,d,e,f=function(){c=setTimeout(function(){b.hasClass('popover')&&!b.is(':hidden')&&(j(),i(),a.trigger('popover:click'))},250)},g=function(){d=setTimeout(function(){b.hasClass('popover')&&!b.is(':hidden')&&(j(),h(),a.trigger('popover:click'))},200)},h=function(){clearTimeout(c)},i=function(){clearTimeout(d)},j=function(){b.off('mouseenter',h),b.off('mouseleave',g),b.off('mouseenter',i)};a.hoverIntent({over:function(){b=a.next(),i(),h(),(!b.hasClass('popover')||b.hasClass('popover')&&b.is(':hidden'))&&a.trigger('popover:click')},out:function(){b=a.next(),b.hasClass('popover')&&!b.is(':hidden')&&(f(),b.on('mouseenter',h),b.on('mouseleave',g),b.on('mouseenter',i),e&&h())},interval:30}),a.parent().on('mouseenter','.popover',function(){e=!0}),a.parent().on('mouseleave','.popover',function(){e=!1})}),m.init({section:'NavBar',action:'click'},!0),m.bind('[data-qts]',{},!0)})}),define('pinky/main',function(){})